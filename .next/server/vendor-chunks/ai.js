"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/ai";
exports.ids = ["vendor-chunks/ai"];
exports.modules = {

/***/ "(ssr)/./node_modules/ai/node_modules/nanoid/non-secure/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/ai/node_modules/nanoid/non-secure/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   customAlphabet: () => (/* binding */ customAlphabet),\n/* harmony export */   nanoid: () => (/* binding */ nanoid)\n/* harmony export */ });\nlet urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nlet customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = ''\n    let i = size\n    while (i--) {\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\nlet nanoid = (size = 21) => {\n  let id = ''\n  let i = size\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWkvbm9kZV9tb2R1bGVzL25hbm9pZC9ub24tc2VjdXJlL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNpQyIsInNvdXJjZXMiOlsid2VicGFjazovL25ldy1wcm9qZWN0Ly4vbm9kZV9tb2R1bGVzL2FpL25vZGVfbW9kdWxlcy9uYW5vaWQvbm9uLXNlY3VyZS9pbmRleC5qcz84ZDcxIl0sInNvdXJjZXNDb250ZW50IjpbImxldCB1cmxBbHBoYWJldCA9XG4gICd1c2VhbmRvbS0yNlQxOTgzNDBQWDc1cHhKQUNLVkVSWU1JTkRCVVNIV09MRl9HUVpiZmdoamtscXZ3eXpyaWN0J1xubGV0IGN1c3RvbUFscGhhYmV0ID0gKGFscGhhYmV0LCBkZWZhdWx0U2l6ZSA9IDIxKSA9PiB7XG4gIHJldHVybiAoc2l6ZSA9IGRlZmF1bHRTaXplKSA9PiB7XG4gICAgbGV0IGlkID0gJydcbiAgICBsZXQgaSA9IHNpemVcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBpZCArPSBhbHBoYWJldFsoTWF0aC5yYW5kb20oKSAqIGFscGhhYmV0Lmxlbmd0aCkgfCAwXVxuICAgIH1cbiAgICByZXR1cm4gaWRcbiAgfVxufVxubGV0IG5hbm9pZCA9IChzaXplID0gMjEpID0+IHtcbiAgbGV0IGlkID0gJydcbiAgbGV0IGkgPSBzaXplXG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZCArPSB1cmxBbHBoYWJldFsoTWF0aC5yYW5kb20oKSAqIDY0KSB8IDBdXG4gIH1cbiAgcmV0dXJuIGlkXG59XG5leHBvcnQgeyBuYW5vaWQsIGN1c3RvbUFscGhhYmV0IH1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/ai/node_modules/nanoid/non-secure/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/ai/react/dist/index.mjs":
/*!**********************************************!*\
  !*** ./node_modules/ai/react/dist/index.mjs ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   experimental_useAssistant: () => (/* binding */ experimental_useAssistant),\n/* harmony export */   useAssistant: () => (/* binding */ useAssistant),\n/* harmony export */   useChat: () => (/* binding */ useChat),\n/* harmony export */   useCompletion: () => (/* binding */ useCompletion)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var swr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! swr */ \"(ssr)/./node_modules/swr/core/dist/index.mjs\");\n/* harmony import */ var nanoid_non_secure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! nanoid/non-secure */ \"(ssr)/./node_modules/ai/node_modules/nanoid/non-secure/index.js\");\n/* __next_internal_client_entry_do_not_use__ experimental_useAssistant,useAssistant,useChat,useCompletion auto */ // react/use-chat.ts\n\n\n// shared/stream-parts.ts\nvar textStreamPart = {\n    code: \"0\",\n    name: \"text\",\n    parse: (value)=>{\n        if (typeof value !== \"string\") {\n            throw new Error('\"text\" parts expect a string value.');\n        }\n        return {\n            type: \"text\",\n            value\n        };\n    }\n};\nvar functionCallStreamPart = {\n    code: \"1\",\n    name: \"function_call\",\n    parse: (value)=>{\n        if (value == null || typeof value !== \"object\" || !(\"function_call\" in value) || typeof value.function_call !== \"object\" || value.function_call == null || !(\"name\" in value.function_call) || !(\"arguments\" in value.function_call) || typeof value.function_call.name !== \"string\" || typeof value.function_call.arguments !== \"string\") {\n            throw new Error('\"function_call\" parts expect an object with a \"function_call\" property.');\n        }\n        return {\n            type: \"function_call\",\n            value\n        };\n    }\n};\nvar dataStreamPart = {\n    code: \"2\",\n    name: \"data\",\n    parse: (value)=>{\n        if (!Array.isArray(value)) {\n            throw new Error('\"data\" parts expect an array value.');\n        }\n        return {\n            type: \"data\",\n            value\n        };\n    }\n};\nvar errorStreamPart = {\n    code: \"3\",\n    name: \"error\",\n    parse: (value)=>{\n        if (typeof value !== \"string\") {\n            throw new Error('\"error\" parts expect a string value.');\n        }\n        return {\n            type: \"error\",\n            value\n        };\n    }\n};\nvar assistantMessageStreamPart = {\n    code: \"4\",\n    name: \"assistant_message\",\n    parse: (value)=>{\n        if (value == null || typeof value !== \"object\" || !(\"id\" in value) || !(\"role\" in value) || !(\"content\" in value) || typeof value.id !== \"string\" || typeof value.role !== \"string\" || value.role !== \"assistant\" || !Array.isArray(value.content) || !value.content.every((item)=>item != null && typeof item === \"object\" && \"type\" in item && item.type === \"text\" && \"text\" in item && item.text != null && typeof item.text === \"object\" && \"value\" in item.text && typeof item.text.value === \"string\")) {\n            throw new Error('\"assistant_message\" parts expect an object with an \"id\", \"role\", and \"content\" property.');\n        }\n        return {\n            type: \"assistant_message\",\n            value\n        };\n    }\n};\nvar assistantControlDataStreamPart = {\n    code: \"5\",\n    name: \"assistant_control_data\",\n    parse: (value)=>{\n        if (value == null || typeof value !== \"object\" || !(\"threadId\" in value) || !(\"messageId\" in value) || typeof value.threadId !== \"string\" || typeof value.messageId !== \"string\") {\n            throw new Error('\"assistant_control_data\" parts expect an object with a \"threadId\" and \"messageId\" property.');\n        }\n        return {\n            type: \"assistant_control_data\",\n            value: {\n                threadId: value.threadId,\n                messageId: value.messageId\n            }\n        };\n    }\n};\nvar dataMessageStreamPart = {\n    code: \"6\",\n    name: \"data_message\",\n    parse: (value)=>{\n        if (value == null || typeof value !== \"object\" || !(\"role\" in value) || !(\"data\" in value) || typeof value.role !== \"string\" || value.role !== \"data\") {\n            throw new Error('\"data_message\" parts expect an object with a \"role\" and \"data\" property.');\n        }\n        return {\n            type: \"data_message\",\n            value\n        };\n    }\n};\nvar toolCallStreamPart = {\n    code: \"7\",\n    name: \"tool_calls\",\n    parse: (value)=>{\n        if (value == null || typeof value !== \"object\" || !(\"tool_calls\" in value) || typeof value.tool_calls !== \"object\" || value.tool_calls == null || !Array.isArray(value.tool_calls) || value.tool_calls.some((tc)=>tc == null || typeof tc !== \"object\" || !(\"id\" in tc) || typeof tc.id !== \"string\" || !(\"type\" in tc) || typeof tc.type !== \"string\" || !(\"function\" in tc) || tc.function == null || typeof tc.function !== \"object\" || !(\"arguments\" in tc.function) || typeof tc.function.name !== \"string\" || typeof tc.function.arguments !== \"string\")) {\n            throw new Error('\"tool_calls\" parts expect an object with a ToolCallPayload.');\n        }\n        return {\n            type: \"tool_calls\",\n            value\n        };\n    }\n};\nvar messageAnnotationsStreamPart = {\n    code: \"8\",\n    name: \"message_annotations\",\n    parse: (value)=>{\n        if (!Array.isArray(value)) {\n            throw new Error('\"message_annotations\" parts expect an array value.');\n        }\n        return {\n            type: \"message_annotations\",\n            value\n        };\n    }\n};\nvar streamParts = [\n    textStreamPart,\n    functionCallStreamPart,\n    dataStreamPart,\n    errorStreamPart,\n    assistantMessageStreamPart,\n    assistantControlDataStreamPart,\n    dataMessageStreamPart,\n    toolCallStreamPart,\n    messageAnnotationsStreamPart\n];\nvar streamPartsByCode = {\n    [textStreamPart.code]: textStreamPart,\n    [functionCallStreamPart.code]: functionCallStreamPart,\n    [dataStreamPart.code]: dataStreamPart,\n    [errorStreamPart.code]: errorStreamPart,\n    [assistantMessageStreamPart.code]: assistantMessageStreamPart,\n    [assistantControlDataStreamPart.code]: assistantControlDataStreamPart,\n    [dataMessageStreamPart.code]: dataMessageStreamPart,\n    [toolCallStreamPart.code]: toolCallStreamPart,\n    [messageAnnotationsStreamPart.code]: messageAnnotationsStreamPart\n};\nvar StreamStringPrefixes = {\n    [textStreamPart.name]: textStreamPart.code,\n    [functionCallStreamPart.name]: functionCallStreamPart.code,\n    [dataStreamPart.name]: dataStreamPart.code,\n    [errorStreamPart.name]: errorStreamPart.code,\n    [assistantMessageStreamPart.name]: assistantMessageStreamPart.code,\n    [assistantControlDataStreamPart.name]: assistantControlDataStreamPart.code,\n    [dataMessageStreamPart.name]: dataMessageStreamPart.code,\n    [toolCallStreamPart.name]: toolCallStreamPart.code,\n    [messageAnnotationsStreamPart.name]: messageAnnotationsStreamPart.code\n};\nvar validCodes = streamParts.map((part)=>part.code);\nvar parseStreamPart = (line)=>{\n    const firstSeparatorIndex = line.indexOf(\":\");\n    if (firstSeparatorIndex === -1) {\n        throw new Error(\"Failed to parse stream string. No separator found.\");\n    }\n    const prefix = line.slice(0, firstSeparatorIndex);\n    if (!validCodes.includes(prefix)) {\n        throw new Error(`Failed to parse stream string. Invalid code ${prefix}.`);\n    }\n    const code = prefix;\n    const textValue = line.slice(firstSeparatorIndex + 1);\n    const jsonValue = JSON.parse(textValue);\n    return streamPartsByCode[code].parse(jsonValue);\n};\n// shared/read-data-stream.ts\nvar NEWLINE = \"\\n\".charCodeAt(0);\nfunction concatChunks(chunks, totalLength) {\n    const concatenatedChunks = new Uint8Array(totalLength);\n    let offset = 0;\n    for (const chunk of chunks){\n        concatenatedChunks.set(chunk, offset);\n        offset += chunk.length;\n    }\n    chunks.length = 0;\n    return concatenatedChunks;\n}\nasync function* readDataStream(reader, { isAborted } = {}) {\n    const decoder = new TextDecoder();\n    const chunks = [];\n    let totalLength = 0;\n    while(true){\n        const { value } = await reader.read();\n        if (value) {\n            chunks.push(value);\n            totalLength += value.length;\n            if (value[value.length - 1] !== NEWLINE) {\n                continue;\n            }\n        }\n        if (chunks.length === 0) {\n            break;\n        }\n        const concatenatedChunks = concatChunks(chunks, totalLength);\n        totalLength = 0;\n        const streamParts2 = decoder.decode(concatenatedChunks, {\n            stream: true\n        }).split(\"\\n\").filter((line)=>line !== \"\").map(parseStreamPart);\n        for (const streamPart of streamParts2){\n            yield streamPart;\n        }\n        if (isAborted == null ? void 0 : isAborted()) {\n            reader.cancel();\n            break;\n        }\n    }\n}\n// shared/generate-id.ts\n\nvar generateId = (0,nanoid_non_secure__WEBPACK_IMPORTED_MODULE_2__.customAlphabet)(\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\", 7);\n// shared/parse-complex-response.ts\nfunction assignAnnotationsToMessage(message, annotations) {\n    if (!message || !annotations || !annotations.length) return message;\n    return {\n        ...message,\n        annotations: [\n            ...annotations\n        ]\n    };\n}\nasync function parseComplexResponse({ reader, abortControllerRef, update, onFinish, generateId: generateId2 = generateId, getCurrentDate = ()=>/* @__PURE__ */ new Date() }) {\n    const createdAt = getCurrentDate();\n    const prefixMap = {\n        data: []\n    };\n    let message_annotations = void 0;\n    for await (const { type, value } of readDataStream(reader, {\n        isAborted: ()=>(abortControllerRef == null ? void 0 : abortControllerRef.current) === null\n    })){\n        if (type === \"text\") {\n            if (prefixMap[\"text\"]) {\n                prefixMap[\"text\"] = {\n                    ...prefixMap[\"text\"],\n                    content: (prefixMap[\"text\"].content || \"\") + value\n                };\n            } else {\n                prefixMap[\"text\"] = {\n                    id: generateId2(),\n                    role: \"assistant\",\n                    content: value,\n                    createdAt\n                };\n            }\n        }\n        let functionCallMessage = null;\n        if (type === \"function_call\") {\n            prefixMap[\"function_call\"] = {\n                id: generateId2(),\n                role: \"assistant\",\n                content: \"\",\n                function_call: value.function_call,\n                name: value.function_call.name,\n                createdAt\n            };\n            functionCallMessage = prefixMap[\"function_call\"];\n        }\n        let toolCallMessage = null;\n        if (type === \"tool_calls\") {\n            prefixMap[\"tool_calls\"] = {\n                id: generateId2(),\n                role: \"assistant\",\n                content: \"\",\n                tool_calls: value.tool_calls,\n                createdAt\n            };\n            toolCallMessage = prefixMap[\"tool_calls\"];\n        }\n        if (type === \"data\") {\n            prefixMap[\"data\"].push(...value);\n        }\n        let responseMessage = prefixMap[\"text\"];\n        if (type === \"message_annotations\") {\n            if (!message_annotations) {\n                message_annotations = [\n                    ...value\n                ];\n            } else {\n                message_annotations.push(...value);\n            }\n            functionCallMessage = assignAnnotationsToMessage(prefixMap[\"function_call\"], message_annotations);\n            toolCallMessage = assignAnnotationsToMessage(prefixMap[\"tool_calls\"], message_annotations);\n            responseMessage = assignAnnotationsToMessage(prefixMap[\"text\"], message_annotations);\n        }\n        if (message_annotations == null ? void 0 : message_annotations.length) {\n            const messagePrefixKeys = [\n                \"text\",\n                \"function_call\",\n                \"tool_calls\"\n            ];\n            messagePrefixKeys.forEach((key)=>{\n                if (prefixMap[key]) {\n                    prefixMap[key].annotations = [\n                        ...message_annotations\n                    ];\n                }\n            });\n        }\n        const merged = [\n            functionCallMessage,\n            toolCallMessage,\n            responseMessage\n        ].filter(Boolean).map((message)=>({\n                ...assignAnnotationsToMessage(message, message_annotations)\n            }));\n        update(merged, [\n            ...prefixMap[\"data\"]\n        ]);\n    }\n    onFinish == null ? void 0 : onFinish(prefixMap);\n    return {\n        messages: [\n            prefixMap.text,\n            prefixMap.function_call,\n            prefixMap.tool_calls\n        ].filter(Boolean),\n        data: prefixMap.data\n    };\n}\n// shared/utils.ts\nfunction createChunkDecoder(complex) {\n    const decoder = new TextDecoder();\n    if (!complex) {\n        return function(chunk) {\n            if (!chunk) return \"\";\n            return decoder.decode(chunk, {\n                stream: true\n            });\n        };\n    }\n    return function(chunk) {\n        const decoded = decoder.decode(chunk, {\n            stream: true\n        }).split(\"\\n\").filter((line)=>line !== \"\");\n        return decoded.map(parseStreamPart).filter(Boolean);\n    };\n}\n// shared/call-chat-api.ts\nasync function callChatApi({ api, messages, body, streamMode = \"stream-data\", credentials, headers, abortController, restoreMessagesOnFailure, onResponse, onUpdate, onFinish, generateId: generateId2 }) {\n    var _a;\n    const response = await fetch(api, {\n        method: \"POST\",\n        body: JSON.stringify({\n            messages,\n            ...body\n        }),\n        headers: {\n            \"Content-Type\": \"application/json\",\n            ...headers\n        },\n        signal: (_a = abortController == null ? void 0 : abortController()) == null ? void 0 : _a.signal,\n        credentials\n    }).catch((err)=>{\n        restoreMessagesOnFailure();\n        throw err;\n    });\n    if (onResponse) {\n        try {\n            await onResponse(response);\n        } catch (err) {\n            throw err;\n        }\n    }\n    if (!response.ok) {\n        restoreMessagesOnFailure();\n        throw new Error(await response.text() || \"Failed to fetch the chat response.\");\n    }\n    if (!response.body) {\n        throw new Error(\"The response body is empty.\");\n    }\n    const reader = response.body.getReader();\n    switch(streamMode){\n        case \"text\":\n            {\n                const decoder = createChunkDecoder();\n                const resultMessage = {\n                    id: generateId2(),\n                    createdAt: /* @__PURE__ */ new Date(),\n                    role: \"assistant\",\n                    content: \"\"\n                };\n                while(true){\n                    const { done, value } = await reader.read();\n                    if (done) {\n                        break;\n                    }\n                    resultMessage.content += decoder(value);\n                    resultMessage.id = generateId2();\n                    onUpdate([\n                        {\n                            ...resultMessage\n                        }\n                    ], []);\n                    if ((abortController == null ? void 0 : abortController()) === null) {\n                        reader.cancel();\n                        break;\n                    }\n                }\n                onFinish == null ? void 0 : onFinish(resultMessage);\n                return {\n                    messages: [\n                        resultMessage\n                    ],\n                    data: []\n                };\n            }\n        case \"stream-data\":\n            {\n                return await parseComplexResponse({\n                    reader,\n                    abortControllerRef: abortController != null ? {\n                        current: abortController()\n                    } : void 0,\n                    update: onUpdate,\n                    onFinish (prefixMap) {\n                        if (onFinish && prefixMap.text != null) {\n                            onFinish(prefixMap.text);\n                        }\n                    },\n                    generateId: generateId2\n                });\n            }\n        default:\n            {\n                const exhaustiveCheck = streamMode;\n                throw new Error(`Unknown stream mode: ${exhaustiveCheck}`);\n            }\n    }\n}\n// shared/process-chat-stream.ts\nasync function processChatStream({ getStreamedResponse: getStreamedResponse2, experimental_onFunctionCall, experimental_onToolCall, updateChatRequest, getCurrentMessages }) {\n    while(true){\n        const messagesAndDataOrJustMessage = await getStreamedResponse2();\n        if (\"messages\" in messagesAndDataOrJustMessage) {\n            let hasFollowingResponse = false;\n            for (const message of messagesAndDataOrJustMessage.messages){\n                if ((message.function_call === void 0 || typeof message.function_call === \"string\") && (message.tool_calls === void 0 || typeof message.tool_calls === \"string\")) {\n                    continue;\n                }\n                hasFollowingResponse = true;\n                if (experimental_onFunctionCall) {\n                    const functionCall = message.function_call;\n                    if (typeof functionCall !== \"object\") {\n                        console.warn(\"experimental_onFunctionCall should not be defined when using tools\");\n                        continue;\n                    }\n                    const functionCallResponse = await experimental_onFunctionCall(getCurrentMessages(), functionCall);\n                    if (functionCallResponse === void 0) {\n                        hasFollowingResponse = false;\n                        break;\n                    }\n                    updateChatRequest(functionCallResponse);\n                }\n                if (experimental_onToolCall) {\n                    const toolCalls = message.tool_calls;\n                    if (!Array.isArray(toolCalls) || toolCalls.some((toolCall)=>typeof toolCall !== \"object\")) {\n                        console.warn(\"experimental_onToolCall should not be defined when using tools\");\n                        continue;\n                    }\n                    const toolCallResponse = await experimental_onToolCall(getCurrentMessages(), toolCalls);\n                    if (toolCallResponse === void 0) {\n                        hasFollowingResponse = false;\n                        break;\n                    }\n                    updateChatRequest(toolCallResponse);\n                }\n            }\n            if (!hasFollowingResponse) {\n                break;\n            }\n        } else {\n            let fixFunctionCallArguments2 = function(response) {\n                for (const message of response.messages){\n                    if (message.tool_calls !== void 0) {\n                        for (const toolCall of message.tool_calls){\n                            if (typeof toolCall === \"object\") {\n                                if (toolCall.function.arguments && typeof toolCall.function.arguments !== \"string\") {\n                                    toolCall.function.arguments = JSON.stringify(toolCall.function.arguments);\n                                }\n                            }\n                        }\n                    }\n                    if (message.function_call !== void 0) {\n                        if (typeof message.function_call === \"object\") {\n                            if (message.function_call.arguments && typeof message.function_call.arguments !== \"string\") {\n                                message.function_call.arguments = JSON.stringify(message.function_call.arguments);\n                            }\n                        }\n                    }\n                }\n            };\n            var fixFunctionCallArguments = fixFunctionCallArguments2;\n            const streamedResponseMessage = messagesAndDataOrJustMessage;\n            if ((streamedResponseMessage.function_call === void 0 || typeof streamedResponseMessage.function_call === \"string\") && (streamedResponseMessage.tool_calls === void 0 || typeof streamedResponseMessage.tool_calls === \"string\")) {\n                break;\n            }\n            if (experimental_onFunctionCall) {\n                const functionCall = streamedResponseMessage.function_call;\n                if (!(typeof functionCall === \"object\")) {\n                    console.warn(\"experimental_onFunctionCall should not be defined when using tools\");\n                    continue;\n                }\n                const functionCallResponse = await experimental_onFunctionCall(getCurrentMessages(), functionCall);\n                if (functionCallResponse === void 0) break;\n                fixFunctionCallArguments2(functionCallResponse);\n                updateChatRequest(functionCallResponse);\n            }\n            if (experimental_onToolCall) {\n                const toolCalls = streamedResponseMessage.tool_calls;\n                if (!(typeof toolCalls === \"object\")) {\n                    console.warn(\"experimental_onToolCall should not be defined when using functions\");\n                    continue;\n                }\n                const toolCallResponse = await experimental_onToolCall(getCurrentMessages(), toolCalls);\n                if (toolCallResponse === void 0) break;\n                fixFunctionCallArguments2(toolCallResponse);\n                updateChatRequest(toolCallResponse);\n            }\n        }\n    }\n}\n// react/use-chat.ts\nvar getStreamedResponse = async (api, chatRequest, mutate, mutateStreamData, existingData, extraMetadataRef, messagesRef, abortControllerRef, generateId2, streamMode, onFinish, onResponse, sendExtraMessageFields)=>{\n    var _a, _b;\n    const previousMessages = messagesRef.current;\n    mutate(chatRequest.messages, false);\n    const constructedMessagesPayload = sendExtraMessageFields ? chatRequest.messages : chatRequest.messages.map(({ role, content, name, function_call, tool_calls, tool_call_id })=>({\n            role,\n            content,\n            tool_call_id,\n            ...name !== void 0 && {\n                name\n            },\n            ...function_call !== void 0 && {\n                function_call\n            },\n            ...tool_calls !== void 0 && {\n                tool_calls\n            }\n        }));\n    if (typeof api !== \"string\") {\n        const replyId = generateId2();\n        const createdAt = /* @__PURE__ */ new Date();\n        let responseMessage = {\n            id: replyId,\n            createdAt,\n            content: \"\",\n            role: \"assistant\"\n        };\n        async function readRow(promise) {\n            const { content, ui, next } = await promise;\n            responseMessage[\"content\"] = content;\n            responseMessage[\"ui\"] = await ui;\n            mutate([\n                ...chatRequest.messages,\n                {\n                    ...responseMessage\n                }\n            ], false);\n            if (next) {\n                await readRow(next);\n            }\n        }\n        try {\n            const promise = api({\n                messages: constructedMessagesPayload,\n                data: chatRequest.data\n            });\n            await readRow(promise);\n        } catch (e) {\n            mutate(previousMessages, false);\n            throw e;\n        }\n        if (onFinish) {\n            onFinish(responseMessage);\n        }\n        return responseMessage;\n    }\n    return await callChatApi({\n        api,\n        messages: constructedMessagesPayload,\n        body: {\n            data: chatRequest.data,\n            ...extraMetadataRef.current.body,\n            ...(_a = chatRequest.options) == null ? void 0 : _a.body,\n            ...chatRequest.functions !== void 0 && {\n                functions: chatRequest.functions\n            },\n            ...chatRequest.function_call !== void 0 && {\n                function_call: chatRequest.function_call\n            },\n            ...chatRequest.tools !== void 0 && {\n                tools: chatRequest.tools\n            },\n            ...chatRequest.tool_choice !== void 0 && {\n                tool_choice: chatRequest.tool_choice\n            }\n        },\n        streamMode,\n        credentials: extraMetadataRef.current.credentials,\n        headers: {\n            ...extraMetadataRef.current.headers,\n            ...(_b = chatRequest.options) == null ? void 0 : _b.headers\n        },\n        abortController: ()=>abortControllerRef.current,\n        restoreMessagesOnFailure () {\n            mutate(previousMessages, false);\n        },\n        onResponse,\n        onUpdate (merged, data) {\n            mutate([\n                ...chatRequest.messages,\n                ...merged\n            ], false);\n            mutateStreamData([\n                ...existingData || [],\n                ...data || []\n            ], false);\n        },\n        onFinish,\n        generateId: generateId2\n    });\n};\nfunction useChat({ api = \"/api/chat\", id, initialMessages, initialInput = \"\", sendExtraMessageFields, experimental_onFunctionCall, experimental_onToolCall, streamMode, onResponse, onFinish, onError, credentials, headers, body, generateId: generateId2 = generateId } = {}) {\n    const hookId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useId)();\n    const idKey = id != null ? id : hookId;\n    const chatKey = typeof api === \"string\" ? [\n        api,\n        idKey\n    ] : idKey;\n    const [initialMessagesFallback] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const { data: messages, mutate } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        chatKey,\n        \"messages\"\n    ], null, {\n        fallbackData: initialMessages != null ? initialMessages : initialMessagesFallback\n    });\n    const { data: isLoading = false, mutate: mutateLoading } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        chatKey,\n        \"loading\"\n    ], null);\n    const { data: streamData, mutate: mutateStreamData } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        chatKey,\n        \"streamData\"\n    ], null);\n    const { data: error = void 0, mutate: setError } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        chatKey,\n        \"error\"\n    ], null);\n    const messagesRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(messages || []);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        messagesRef.current = messages || [];\n    }, [\n        messages\n    ]);\n    const abortControllerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const extraMetadataRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\n        credentials,\n        headers,\n        body\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        extraMetadataRef.current = {\n            credentials,\n            headers,\n            body\n        };\n    }, [\n        credentials,\n        headers,\n        body\n    ]);\n    const triggerRequest = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (chatRequest)=>{\n        try {\n            mutateLoading(true);\n            setError(void 0);\n            const abortController = new AbortController();\n            abortControllerRef.current = abortController;\n            await processChatStream({\n                getStreamedResponse: ()=>getStreamedResponse(api, chatRequest, mutate, mutateStreamData, streamData, extraMetadataRef, messagesRef, abortControllerRef, generateId2, streamMode, onFinish, onResponse, sendExtraMessageFields),\n                experimental_onFunctionCall,\n                experimental_onToolCall,\n                updateChatRequest: (chatRequestParam)=>{\n                    chatRequest = chatRequestParam;\n                },\n                getCurrentMessages: ()=>messagesRef.current\n            });\n            abortControllerRef.current = null;\n        } catch (err) {\n            if (err.name === \"AbortError\") {\n                abortControllerRef.current = null;\n                return null;\n            }\n            if (onError && err instanceof Error) {\n                onError(err);\n            }\n            setError(err);\n        } finally{\n            mutateLoading(false);\n        }\n    }, [\n        mutate,\n        mutateLoading,\n        api,\n        extraMetadataRef,\n        onResponse,\n        onFinish,\n        onError,\n        setError,\n        mutateStreamData,\n        streamData,\n        sendExtraMessageFields,\n        experimental_onFunctionCall,\n        experimental_onToolCall,\n        messagesRef,\n        abortControllerRef,\n        generateId2\n    ]);\n    const append = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (message, { options, functions, function_call, tools, tool_choice, data } = {})=>{\n        if (!message.id) {\n            message.id = generateId2();\n        }\n        const chatRequest = {\n            messages: messagesRef.current.concat(message),\n            options,\n            data,\n            ...functions !== void 0 && {\n                functions\n            },\n            ...function_call !== void 0 && {\n                function_call\n            },\n            ...tools !== void 0 && {\n                tools\n            },\n            ...tool_choice !== void 0 && {\n                tool_choice\n            }\n        };\n        return triggerRequest(chatRequest);\n    }, [\n        triggerRequest,\n        generateId2\n    ]);\n    const reload = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ({ options, functions, function_call, tools, tool_choice } = {})=>{\n        if (messagesRef.current.length === 0) return null;\n        const lastMessage = messagesRef.current[messagesRef.current.length - 1];\n        if (lastMessage.role === \"assistant\") {\n            const chatRequest2 = {\n                messages: messagesRef.current.slice(0, -1),\n                options,\n                ...functions !== void 0 && {\n                    functions\n                },\n                ...function_call !== void 0 && {\n                    function_call\n                },\n                ...tools !== void 0 && {\n                    tools\n                },\n                ...tool_choice !== void 0 && {\n                    tool_choice\n                }\n            };\n            return triggerRequest(chatRequest2);\n        }\n        const chatRequest = {\n            messages: messagesRef.current,\n            options,\n            ...functions !== void 0 && {\n                functions\n            },\n            ...function_call !== void 0 && {\n                function_call\n            },\n            ...tools !== void 0 && {\n                tools\n            },\n            ...tool_choice !== void 0 && {\n                tool_choice\n            }\n        };\n        return triggerRequest(chatRequest);\n    }, [\n        triggerRequest\n    ]);\n    const stop = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (abortControllerRef.current) {\n            abortControllerRef.current.abort();\n            abortControllerRef.current = null;\n        }\n    }, []);\n    const setMessages = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((messages2)=>{\n        mutate(messages2, false);\n        messagesRef.current = messages2;\n    }, [\n        mutate\n    ]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialInput);\n    const handleSubmit = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e, options = {}, metadata)=>{\n        if (metadata) {\n            extraMetadataRef.current = {\n                ...extraMetadataRef.current,\n                ...metadata\n            };\n        }\n        e.preventDefault();\n        if (!input) return;\n        append({\n            content: input,\n            role: \"user\",\n            createdAt: /* @__PURE__ */ new Date()\n        }, options);\n        setInput(\"\");\n    }, [\n        input,\n        append\n    ]);\n    const handleInputChange = (e)=>{\n        setInput(e.target.value);\n    };\n    return {\n        messages: messages || [],\n        error,\n        append,\n        reload,\n        stop,\n        setMessages,\n        input,\n        setInput,\n        handleInputChange,\n        handleSubmit,\n        isLoading,\n        data: streamData\n    };\n}\n// react/use-completion.ts\n\n\n// shared/call-completion-api.ts\nasync function callCompletionApi({ api, prompt, credentials, headers, body, streamMode = \"stream-data\", setCompletion, setLoading, setError, setAbortController, onResponse, onFinish, onError, onData }) {\n    try {\n        setLoading(true);\n        setError(void 0);\n        const abortController = new AbortController();\n        setAbortController(abortController);\n        setCompletion(\"\");\n        const res = await fetch(api, {\n            method: \"POST\",\n            body: JSON.stringify({\n                prompt,\n                ...body\n            }),\n            credentials,\n            headers: {\n                \"Content-Type\": \"application/json\",\n                ...headers\n            },\n            signal: abortController.signal\n        }).catch((err)=>{\n            throw err;\n        });\n        if (onResponse) {\n            try {\n                await onResponse(res);\n            } catch (err) {\n                throw err;\n            }\n        }\n        if (!res.ok) {\n            throw new Error(await res.text() || \"Failed to fetch the chat response.\");\n        }\n        if (!res.body) {\n            throw new Error(\"The response body is empty.\");\n        }\n        let result = \"\";\n        const reader = res.body.getReader();\n        switch(streamMode){\n            case \"text\":\n                {\n                    const decoder = createChunkDecoder();\n                    while(true){\n                        const { done, value } = await reader.read();\n                        if (done) {\n                            break;\n                        }\n                        result += decoder(value);\n                        setCompletion(result);\n                        if (abortController === null) {\n                            reader.cancel();\n                            break;\n                        }\n                    }\n                    break;\n                }\n            case \"stream-data\":\n                {\n                    for await (const { type, value } of readDataStream(reader, {\n                        isAborted: ()=>abortController === null\n                    })){\n                        switch(type){\n                            case \"text\":\n                                {\n                                    result += value;\n                                    setCompletion(result);\n                                    break;\n                                }\n                            case \"data\":\n                                {\n                                    onData == null ? void 0 : onData(value);\n                                    break;\n                                }\n                        }\n                    }\n                    break;\n                }\n            default:\n                {\n                    const exhaustiveCheck = streamMode;\n                    throw new Error(`Unknown stream mode: ${exhaustiveCheck}`);\n                }\n        }\n        if (onFinish) {\n            onFinish(prompt, result);\n        }\n        setAbortController(null);\n        return result;\n    } catch (err) {\n        if (err.name === \"AbortError\") {\n            setAbortController(null);\n            return null;\n        }\n        if (err instanceof Error) {\n            if (onError) {\n                onError(err);\n            }\n        }\n        setError(err);\n    } finally{\n        setLoading(false);\n    }\n}\n// react/use-completion.ts\nfunction useCompletion({ api = \"/api/completion\", id, initialCompletion = \"\", initialInput = \"\", credentials, headers, body, streamMode, onResponse, onFinish, onError } = {}) {\n    const hookId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useId)();\n    const completionId = id || hookId;\n    const { data, mutate } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        api,\n        completionId\n    ], null, {\n        fallbackData: initialCompletion\n    });\n    const { data: isLoading = false, mutate: mutateLoading } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        completionId,\n        \"loading\"\n    ], null);\n    const { data: streamData, mutate: mutateStreamData } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        completionId,\n        \"streamData\"\n    ], null);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0);\n    const completion = data;\n    const [abortController, setAbortController] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const extraMetadataRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\n        credentials,\n        headers,\n        body\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        extraMetadataRef.current = {\n            credentials,\n            headers,\n            body\n        };\n    }, [\n        credentials,\n        headers,\n        body\n    ]);\n    const triggerRequest = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (prompt, options)=>callCompletionApi({\n            api,\n            prompt,\n            credentials: extraMetadataRef.current.credentials,\n            headers: {\n                ...extraMetadataRef.current.headers,\n                ...options == null ? void 0 : options.headers\n            },\n            body: {\n                ...extraMetadataRef.current.body,\n                ...options == null ? void 0 : options.body\n            },\n            streamMode,\n            setCompletion: (completion2)=>mutate(completion2, false),\n            setLoading: mutateLoading,\n            setError,\n            setAbortController,\n            onResponse,\n            onFinish,\n            onError,\n            onData: (data2)=>{\n                mutateStreamData([\n                    ...streamData || [],\n                    ...data2 || []\n                ], false);\n            }\n        }), [\n        mutate,\n        mutateLoading,\n        api,\n        extraMetadataRef,\n        setAbortController,\n        onResponse,\n        onFinish,\n        onError,\n        setError,\n        streamData,\n        mutateStreamData\n    ]);\n    const stop = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (abortController) {\n            abortController.abort();\n            setAbortController(null);\n        }\n    }, [\n        abortController\n    ]);\n    const setCompletion = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((completion2)=>{\n        mutate(completion2, false);\n    }, [\n        mutate\n    ]);\n    const complete = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (prompt, options)=>{\n        return triggerRequest(prompt, options);\n    }, [\n        triggerRequest\n    ]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialInput);\n    const handleSubmit = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e)=>{\n        e.preventDefault();\n        if (!input) return;\n        return complete(input);\n    }, [\n        input,\n        complete\n    ]);\n    const handleInputChange = (e)=>{\n        setInput(e.target.value);\n    };\n    return {\n        completion,\n        complete,\n        error,\n        setCompletion,\n        stop,\n        input,\n        setInput,\n        handleInputChange,\n        handleSubmit,\n        isLoading,\n        data: streamData\n    };\n}\n// react/use-assistant.ts\n\nfunction useAssistant({ api, threadId: threadIdParam, credentials, headers, body, onError }) {\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [threadId, setThreadId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0);\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"awaiting_message\");\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0);\n    const handleInputChange = (event)=>{\n        setInput(event.target.value);\n    };\n    const append = async (message, requestOptions)=>{\n        var _a;\n        setStatus(\"in_progress\");\n        setMessages((messages2)=>{\n            var _a2;\n            return [\n                ...messages2,\n                {\n                    ...message,\n                    id: (_a2 = message.id) != null ? _a2 : generateId()\n                }\n            ];\n        });\n        setInput(\"\");\n        try {\n            const result = await fetch(api, {\n                method: \"POST\",\n                credentials,\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    ...headers\n                },\n                body: JSON.stringify({\n                    ...body,\n                    // always use user-provided threadId when available:\n                    threadId: (_a = threadIdParam != null ? threadIdParam : threadId) != null ? _a : null,\n                    message: message.content,\n                    // optional request data:\n                    data: requestOptions == null ? void 0 : requestOptions.data\n                })\n            });\n            if (result.body == null) {\n                throw new Error(\"The response body is empty.\");\n            }\n            for await (const { type, value } of readDataStream(result.body.getReader())){\n                switch(type){\n                    case \"assistant_message\":\n                        {\n                            setMessages((messages2)=>[\n                                    ...messages2,\n                                    {\n                                        id: value.id,\n                                        role: value.role,\n                                        content: value.content[0].text.value\n                                    }\n                                ]);\n                            break;\n                        }\n                    case \"text\":\n                        {\n                            setMessages((messages2)=>{\n                                const lastMessage = messages2[messages2.length - 1];\n                                return [\n                                    ...messages2.slice(0, messages2.length - 1),\n                                    {\n                                        id: lastMessage.id,\n                                        role: lastMessage.role,\n                                        content: lastMessage.content + value\n                                    }\n                                ];\n                            });\n                            break;\n                        }\n                    case \"data_message\":\n                        {\n                            setMessages((messages2)=>{\n                                var _a2;\n                                return [\n                                    ...messages2,\n                                    {\n                                        id: (_a2 = value.id) != null ? _a2 : generateId(),\n                                        role: \"data\",\n                                        content: \"\",\n                                        data: value.data\n                                    }\n                                ];\n                            });\n                            break;\n                        }\n                    case \"assistant_control_data\":\n                        {\n                            setThreadId(value.threadId);\n                            setMessages((messages2)=>{\n                                const lastMessage = messages2[messages2.length - 1];\n                                lastMessage.id = value.messageId;\n                                return [\n                                    ...messages2.slice(0, messages2.length - 1),\n                                    lastMessage\n                                ];\n                            });\n                            break;\n                        }\n                    case \"error\":\n                        {\n                            const errorObj = new Error(value);\n                            setError(errorObj);\n                            break;\n                        }\n                }\n            }\n        } catch (error2) {\n            if (onError && error2 instanceof Error) {\n                onError(error2);\n            }\n            setError(error2);\n        }\n        setStatus(\"awaiting_message\");\n    };\n    const submitMessage = async (event, requestOptions)=>{\n        var _a;\n        (_a = event == null ? void 0 : event.preventDefault) == null ? void 0 : _a.call(event);\n        if (input === \"\") {\n            return;\n        }\n        append({\n            role: \"user\",\n            content: input\n        }, requestOptions);\n    };\n    return {\n        append,\n        messages,\n        setMessages,\n        threadId,\n        input,\n        setInput,\n        handleInputChange,\n        submitMessage,\n        status,\n        error\n    };\n}\nvar experimental_useAssistant = useAssistant;\n //# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWkvcmVhY3QvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBZ0U7QUFDM0I7O0FDY3JDLElBQU1NLGlCQUFrRDtJQUN0REMsTUFBTTtJQUNOQyxNQUFNO0lBQ05DLE9BQU8sQ0FBQ0M7UUFDTixJQUFJLE9BQU9BLFVBQVUsVUFBVTtZQUM3QixNQUFNLElBQUlDLE1BQU07UUFDbEI7UUFDQSxPQUFPO1lBQUVDLE1BQU07WUFBUUY7UUFBTTtJQUMvQjtBQUNGO0FBRUEsSUFBTUcseUJBSUY7SUFDRk4sTUFBTTtJQUNOQyxNQUFNO0lBQ05DLE9BQU8sQ0FBQ0M7UUFDTixJQUNFQSxTQUFTLFFBQ1QsT0FBT0EsVUFBVSxZQUNqQixDQUFFLG9CQUFtQkEsS0FBQSxLQUNyQixPQUFPQSxNQUFNSSxhQUFBLEtBQWtCLFlBQy9CSixNQUFNSSxhQUFBLElBQWlCLFFBQ3ZCLENBQUUsV0FBVUosTUFBTUksYUFBQSxLQUNsQixDQUFFLGdCQUFlSixNQUFNSSxhQUFBLEtBQ3ZCLE9BQU9KLE1BQU1JLGFBQUEsQ0FBY04sSUFBQSxLQUFTLFlBQ3BDLE9BQU9FLE1BQU1JLGFBQUEsQ0FBY0MsU0FBQSxLQUFjLFVBQ3pDO1lBQ0EsTUFBTSxJQUFJSixNQUNSO1FBRUo7UUFFQSxPQUFPO1lBQ0xDLE1BQU07WUFDTkY7UUFDRjtJQUNGO0FBQ0Y7QUFFQSxJQUFNTSxpQkFBNEQ7SUFDaEVULE1BQU07SUFDTkMsTUFBTTtJQUNOQyxPQUFPLENBQUNDO1FBQ04sSUFBSSxDQUFDTyxNQUFNQyxPQUFBLENBQVFSLFFBQVE7WUFDekIsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUEsT0FBTztZQUFFQyxNQUFNO1lBQVFGO1FBQU07SUFDL0I7QUFDRjtBQUVBLElBQU1TLGtCQUFvRDtJQUN4RFosTUFBTTtJQUNOQyxNQUFNO0lBQ05DLE9BQU8sQ0FBQ0M7UUFDTixJQUFJLE9BQU9BLFVBQVUsVUFBVTtZQUM3QixNQUFNLElBQUlD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LE1BQU07WUFBUUMsU0FBU3VLO1FBQU0sR0FBRzBCO0lBQzNDO0lBRUEsT0FBTztRQUNMakM7UUFDQWxGO1FBQ0F3RjtRQUNBaks7UUFDQWtLO1FBQ0FDO1FBQ0FJO1FBQ0F1QjtRQUNBTDtRQUNBbkM7SUFDRjtBQUNGO0FBS08sSUFBTTBDLDRCQUE0QlYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXctcHJvamVjdC8uLi91c2UtY2hhdC50cz84ODI4Iiwid2VicGFjazovL25ldy1wcm9qZWN0Ly4uLy4uL3NoYXJlZC9zdHJlYW0tcGFydHMudHM/YzRhOCIsIndlYnBhY2s6Ly9uZXctcHJvamVjdC8uLi8uLi9zaGFyZWQvcmVhZC1kYXRhLXN0cmVhbS50cz8xOGYxIiwid2VicGFjazovL25ldy1wcm9qZWN0Ly4uLy4uL3NoYXJlZC9nZW5lcmF0ZS1pZC50cz8wZDVmIiwid2VicGFjazovL25ldy1wcm9qZWN0Ly4uLy4uL3NoYXJlZC9wYXJzZS1jb21wbGV4LXJlc3BvbnNlLnRzPzY1ZTAiLCJ3ZWJwYWNrOi8vbmV3LXByb2plY3QvLi4vLi4vc2hhcmVkL3V0aWxzLnRzP2Y4Y2YiLCJ3ZWJwYWNrOi8vbmV3LXByb2plY3QvLi4vLi4vc2hhcmVkL2NhbGwtY2hhdC1hcGkudHM/YjU1YiIsIndlYnBhY2s6Ly9uZXctcHJvamVjdC8uLi8uLi9zaGFyZWQvcHJvY2Vzcy1jaGF0LXN0cmVhbS50cz84ZDdmIiwid2VicGFjazovL25ldy1wcm9qZWN0Ly4uL3VzZS1jb21wbGV0aW9uLnRzP2FlN2YiLCJ3ZWJwYWNrOi8vbmV3LXByb2plY3QvLi4vLi4vc2hhcmVkL2NhbGwtY29tcGxldGlvbi1hcGkudHM/ODUyNSIsIndlYnBhY2s6Ly9uZXctcHJvamVjdC8uLi91c2UtYXNzaXN0YW50LnRzPzI4MTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlSWQsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlU1dSLCB7IEtleWVkTXV0YXRvciB9IGZyb20gJ3N3cic7XG5pbXBvcnQgeyBjYWxsQ2hhdEFwaSB9IGZyb20gJy4uL3NoYXJlZC9jYWxsLWNoYXQtYXBpJztcbmltcG9ydCB7IGdlbmVyYXRlSWQgYXMgZ2VuZXJhdGVJZEZ1bmMgfSBmcm9tICcuLi9zaGFyZWQvZ2VuZXJhdGUtaWQnO1xuaW1wb3J0IHsgcHJvY2Vzc0NoYXRTdHJlYW0gfSBmcm9tICcuLi9zaGFyZWQvcHJvY2Vzcy1jaGF0LXN0cmVhbSc7XG5pbXBvcnQgdHlwZSB7XG4gIENoYXRSZXF1ZXN0LFxuICBDaGF0UmVxdWVzdE9wdGlvbnMsXG4gIENyZWF0ZU1lc3NhZ2UsXG4gIElkR2VuZXJhdG9yLFxuICBKU09OVmFsdWUsXG4gIE1lc3NhZ2UsXG4gIFVzZUNoYXRPcHRpb25zLFxufSBmcm9tICcuLi9zaGFyZWQvdHlwZXMnO1xuaW1wb3J0IHR5cGUge1xuICBSZWFjdFJlc3BvbnNlUm93LFxuICBleHBlcmltZW50YWxfU3RyZWFtaW5nUmVhY3RSZXNwb25zZSxcbn0gZnJvbSAnLi4vc3RyZWFtcy9zdHJlYW1pbmctcmVhY3QtcmVzcG9uc2UnO1xuZXhwb3J0IHR5cGUgeyBDcmVhdGVNZXNzYWdlLCBNZXNzYWdlLCBVc2VDaGF0T3B0aW9ucyB9O1xuXG5leHBvcnQgdHlwZSBVc2VDaGF0SGVscGVycyA9IHtcbiAgLyoqIEN1cnJlbnQgbWVzc2FnZXMgaW4gdGhlIGNoYXQgKi9cbiAgbWVzc2FnZXM6IE1lc3NhZ2VbXTtcbiAgLyoqIFRoZSBlcnJvciBvYmplY3Qgb2YgdGhlIEFQSSByZXF1ZXN0ICovXG4gIGVycm9yOiB1bmRlZmluZWQgfCBFcnJvcjtcbiAgLyoqXG4gICAqIEFwcGVuZCBhIHVzZXIgbWVzc2FnZSB0byB0aGUgY2hhdCBsaXN0LiBUaGlzIHRyaWdnZXJzIHRoZSBBUEkgY2FsbCB0byBmZXRjaFxuICAgKiB0aGUgYXNzaXN0YW50J3MgcmVzcG9uc2UuXG4gICAqIEBwYXJhbSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIGFwcGVuZFxuICAgKiBAcGFyYW0gb3B0aW9ucyBBZGRpdGlvbmFsIG9wdGlvbnMgdG8gcGFzcyB0byB0aGUgQVBJIGNhbGxcbiAgICovXG4gIGFwcGVuZDogKFxuICAgIG1lc3NhZ2U6IE1lc3NhZ2UgfCBDcmVhdGVNZXNzYWdlLFxuICAgIGNoYXRSZXF1ZXN0T3B0aW9ucz86IENoYXRSZXF1ZXN0T3B0aW9ucyxcbiAgKSA9PiBQcm9taXNlPHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ+O1xuICAvKipcbiAgICogUmVsb2FkIHRoZSBsYXN0IEFJIGNoYXQgcmVzcG9uc2UgZm9yIHRoZSBnaXZlbiBjaGF0IGhpc3RvcnkuIElmIHRoZSBsYXN0XG4gICAqIG1lc3NhZ2UgaXNuJ3QgZnJvbSB0aGUgYXNzaXN0YW50LCBpdCB3aWxsIHJlcXVlc3QgdGhlIEFQSSB0byBnZW5lcmF0ZSBhXG4gICAqIG5ldyByZXNwb25zZS5cbiAgICovXG4gIHJlbG9hZDogKFxuICAgIGNoYXRSZXF1ZXN0T3B0aW9ucz86IENoYXRSZXF1ZXN0T3B0aW9ucyxcbiAgKSA9PiBQcm9taXNlPHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ+O1xuICAvKipcbiAgICogQWJvcnQgdGhlIGN1cnJlbnQgcmVxdWVzdCBpbW1lZGlhdGVseSwga2VlcCB0aGUgZ2VuZXJhdGVkIHRva2VucyBpZiBhbnkuXG4gICAqL1xuICBzdG9wOiAoKSA9PiB2b2lkO1xuICAvKipcbiAgICogVXBkYXRlIHRoZSBgbWVzc2FnZXNgIHN0YXRlIGxvY2FsbHkuIFRoaXMgaXMgdXNlZnVsIHdoZW4geW91IHdhbnQgdG9cbiAgICogZWRpdCB0aGUgbWVzc2FnZXMgb24gdGhlIGNsaWVudCwgYW5kIHRoZW4gdHJpZ2dlciB0aGUgYHJlbG9hZGAgbWV0aG9kXG4gICAqIG1hbnVhbGx5IHRvIHJlZ2VuZXJhdGUgdGhlIEFJIHJlc3BvbnNlLlxuICAgKi9cbiAgc2V0TWVzc2FnZXM6IChtZXNzYWdlczogTWVzc2FnZVtdKSA9PiB2b2lkO1xuICAvKiogVGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIGlucHV0ICovXG4gIGlucHV0OiBzdHJpbmc7XG4gIC8qKiBzZXRTdGF0ZS1wb3dlcmVkIG1ldGhvZCB0byB1cGRhdGUgdGhlIGlucHV0IHZhbHVlICovXG4gIHNldElucHV0OiBSZWFjdC5EaXNwYXRjaDxSZWFjdC5TZXRTdGF0ZUFjdGlvbjxzdHJpbmc+PjtcbiAgLyoqIEFuIGlucHV0L3RleHRhcmVhLXJlYWR5IG9uQ2hhbmdlIGhhbmRsZXIgdG8gY29udHJvbCB0aGUgdmFsdWUgb2YgdGhlIGlucHV0ICovXG4gIGhhbmRsZUlucHV0Q2hhbmdlOiAoXG4gICAgZTpcbiAgICAgIHwgUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHwgUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFRleHRBcmVhRWxlbWVudD4sXG4gICkgPT4gdm9pZDtcbiAgLyoqIEZvcm0gc3VibWlzc2lvbiBoYW5kbGVyIHRvIGF1dG9tYXRpY2FsbHkgcmVzZXQgaW5wdXQgYW5kIGFwcGVuZCBhIHVzZXIgbWVzc2FnZSAqL1xuICBoYW5kbGVTdWJtaXQ6IChcbiAgICBlOiBSZWFjdC5Gb3JtRXZlbnQ8SFRNTEZvcm1FbGVtZW50PixcbiAgICBjaGF0UmVxdWVzdE9wdGlvbnM/OiBDaGF0UmVxdWVzdE9wdGlvbnMsXG4gICkgPT4gdm9pZDtcbiAgbWV0YWRhdGE/OiBPYmplY3Q7XG4gIC8qKiBXaGV0aGVyIHRoZSBBUEkgcmVxdWVzdCBpcyBpbiBwcm9ncmVzcyAqL1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG4gIC8qKiBBZGRpdGlvbmFsIGRhdGEgYWRkZWQgb24gdGhlIHNlcnZlciB2aWEgU3RyZWFtRGF0YSAqL1xuICBkYXRhPzogSlNPTlZhbHVlW107XG59O1xuXG50eXBlIFN0cmVhbWluZ1JlYWN0UmVzcG9uc2VBY3Rpb24gPSAocGF5bG9hZDoge1xuICBtZXNzYWdlczogTWVzc2FnZVtdO1xuICBkYXRhPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbn0pID0+IFByb21pc2U8ZXhwZXJpbWVudGFsX1N0cmVhbWluZ1JlYWN0UmVzcG9uc2U+O1xuXG5jb25zdCBnZXRTdHJlYW1lZFJlc3BvbnNlID0gYXN5bmMgKFxuICBhcGk6IHN0cmluZyB8IFN0cmVhbWluZ1JlYWN0UmVzcG9uc2VBY3Rpb24sXG4gIGNoYXRSZXF1ZXN0OiBDaGF0UmVxdWVzdCxcbiAgbXV0YXRlOiBLZXllZE11dGF0b3I8TWVzc2FnZVtdPixcbiAgbXV0YXRlU3RyZWFtRGF0YTogS2V5ZWRNdXRhdG9yPEpTT05WYWx1ZVtdIHwgdW5kZWZpbmVkPixcbiAgZXhpc3RpbmdEYXRhOiBKU09OVmFsdWVbXSB8IHVuZGVmaW5lZCxcbiAgZXh0cmFNZXRhZGF0YVJlZjogUmVhY3QuTXV0YWJsZVJlZk9iamVjdDxhbnk+LFxuICBtZXNzYWdlc1JlZjogUmVhY3QuTXV0YWJsZVJlZk9iamVjdDxNZXNzYWdlW10+LFxuICBhYm9ydENvbnRyb2xsZXJSZWY6IFJlYWN0Lk11dGFibGVSZWZPYmplY3Q8QWJvcnRDb250cm9sbGVyIHwgbnVsbD4sXG4gIGdlbmVyYXRlSWQ6IElkR2VuZXJhdG9yLFxuICBzdHJlYW1Nb2RlPzogJ3N0cmVhbS1kYXRhJyB8ICd0ZXh0JyxcbiAgb25GaW5pc2g/OiAobWVzc2FnZTogTWVzc2FnZSkgPT4gdm9pZCxcbiAgb25SZXNwb25zZT86IChyZXNwb25zZTogUmVzcG9uc2UpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+LFxuICBzZW5kRXh0cmFNZXNzYWdlRmllbGRzPzogYm9vbGVhbixcbikgPT4ge1xuICAvLyBEbyBhbiBvcHRpbWlzdGljIHVwZGF0ZSB0byB0aGUgY2hhdCBzdGF0ZSB0byBzaG93IHRoZSB1cGRhdGVkIG1lc3NhZ2VzXG4gIC8vIGltbWVkaWF0ZWx5LlxuICBjb25zdCBwcmV2aW91c01lc3NhZ2VzID0gbWVzc2FnZXNSZWYuY3VycmVudDtcbiAgbXV0YXRlKGNoYXRSZXF1ZXN0Lm1lc3NhZ2VzLCBmYWxzZSk7XG5cbiAgY29uc3QgY29uc3RydWN0ZWRNZXNzYWdlc1BheWxvYWQgPSBzZW5kRXh0cmFNZXNzYWdlRmllbGRzXG4gICAgPyBjaGF0UmVxdWVzdC5tZXNzYWdlc1xuICAgIDogY2hhdFJlcXVlc3QubWVzc2FnZXMubWFwKFxuICAgICAgICAoeyByb2xlLCBjb250ZW50LCBuYW1lLCBmdW5jdGlvbl9jYWxsLCB0b29sX2NhbGxzLCB0b29sX2NhbGxfaWQgfSkgPT4gKHtcbiAgICAgICAgICByb2xlLFxuICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgdG9vbF9jYWxsX2lkLFxuICAgICAgICAgIC4uLihuYW1lICE9PSB1bmRlZmluZWQgJiYgeyBuYW1lIH0pLFxuICAgICAgICAgIC4uLihmdW5jdGlvbl9jYWxsICE9PSB1bmRlZmluZWQgJiYge1xuICAgICAgICAgICAgZnVuY3Rpb25fY2FsbDogZnVuY3Rpb25fY2FsbCxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICAuLi4odG9vbF9jYWxscyAhPT0gdW5kZWZpbmVkICYmIHtcbiAgICAgICAgICAgIHRvb2xfY2FsbHM6IHRvb2xfY2FsbHMsXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgKTtcblxuICBpZiAodHlwZW9mIGFwaSAhPT0gJ3N0cmluZycpIHtcbiAgICAvLyBJbiB0aGlzIGNhc2UsIHdlIGFyZSBoYW5kbGluZyBhIFNlcnZlciBBY3Rpb24uIE5vIGNvbXBsZXggbW9kZSBoYW5kbGluZyBuZWVkZWQuXG5cbiAgICBjb25zdCByZXBseUlkID0gZ2VuZXJhdGVJZCgpO1xuICAgIGNvbnN0IGNyZWF0ZWRBdCA9IG5ldyBEYXRlKCk7XG4gICAgbGV0IHJlc3BvbnNlTWVzc2FnZTogTWVzc2FnZSA9IHtcbiAgICAgIGlkOiByZXBseUlkLFxuICAgICAgY3JlYXRlZEF0LFxuICAgICAgY29udGVudDogJycsXG4gICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICB9O1xuXG4gICAgYXN5bmMgZnVuY3Rpb24gcmVhZFJvdyhwcm9taXNlOiBQcm9taXNlPFJlYWN0UmVzcG9uc2VSb3c+KSB7XG4gICAgICBjb25zdCB7IGNvbnRlbnQsIHVpLCBuZXh0IH0gPSBhd2FpdCBwcm9taXNlO1xuXG4gICAgICAvLyBUT0RPOiBIYW5kbGUgZnVuY3Rpb24gY2FsbHMuXG4gICAgICByZXNwb25zZU1lc3NhZ2VbJ2NvbnRlbnQnXSA9IGNvbnRlbnQ7XG4gICAgICByZXNwb25zZU1lc3NhZ2VbJ3VpJ10gPSBhd2FpdCB1aTtcblxuICAgICAgbXV0YXRlKFsuLi5jaGF0UmVxdWVzdC5tZXNzYWdlcywgeyAuLi5yZXNwb25zZU1lc3NhZ2UgfV0sIGZhbHNlKTtcblxuICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgYXdhaXQgcmVhZFJvdyhuZXh0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJvbWlzZSA9IGFwaSh7XG4gICAgICAgIG1lc3NhZ2VzOiBjb25zdHJ1Y3RlZE1lc3NhZ2VzUGF5bG9hZCBhcyBNZXNzYWdlW10sXG4gICAgICAgIGRhdGE6IGNoYXRSZXF1ZXN0LmRhdGEsXG4gICAgICB9KSBhcyBQcm9taXNlPFJlYWN0UmVzcG9uc2VSb3c+O1xuICAgICAgYXdhaXQgcmVhZFJvdyhwcm9taXNlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBSZXN0b3JlIHRoZSBwcmV2aW91cyBtZXNzYWdlcyBpZiB0aGUgcmVxdWVzdCBmYWlscy5cbiAgICAgIG11dGF0ZShwcmV2aW91c01lc3NhZ2VzLCBmYWxzZSk7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cblxuICAgIGlmIChvbkZpbmlzaCkge1xuICAgICAgb25GaW5pc2gocmVzcG9uc2VNZXNzYWdlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzcG9uc2VNZXNzYWdlO1xuICB9XG5cbiAgcmV0dXJuIGF3YWl0IGNhbGxDaGF0QXBpKHtcbiAgICBhcGksXG4gICAgbWVzc2FnZXM6IGNvbnN0cnVjdGVkTWVzc2FnZXNQYXlsb2FkLFxuICAgIGJvZHk6IHtcbiAgICAgIGRhdGE6IGNoYXRSZXF1ZXN0LmRhdGEsXG4gICAgICAuLi5leHRyYU1ldGFkYXRhUmVmLmN1cnJlbnQuYm9keSxcbiAgICAgIC4uLmNoYXRSZXF1ZXN0Lm9wdGlvbnM/LmJvZHksXG4gICAgICAuLi4oY2hhdFJlcXVlc3QuZnVuY3Rpb25zICE9PSB1bmRlZmluZWQgJiYge1xuICAgICAgICBmdW5jdGlvbnM6IGNoYXRSZXF1ZXN0LmZ1bmN0aW9ucyxcbiAgICAgIH0pLFxuICAgICAgLi4uKGNoYXRSZXF1ZXN0LmZ1bmN0aW9uX2NhbGwgIT09IHVuZGVmaW5lZCAmJiB7XG4gICAgICAgIGZ1bmN0aW9uX2NhbGw6IGNoYXRSZXF1ZXN0LmZ1bmN0aW9uX2NhbGwsXG4gICAgICB9KSxcbiAgICAgIC4uLihjaGF0UmVxdWVzdC50b29scyAhPT0gdW5kZWZpbmVkICYmIHtcbiAgICAgICAgdG9vbHM6IGNoYXRSZXF1ZXN0LnRvb2xzLFxuICAgICAgfSksXG4gICAgICAuLi4oY2hhdFJlcXVlc3QudG9vbF9jaG9pY2UgIT09IHVuZGVmaW5lZCAmJiB7XG4gICAgICAgIHRvb2xfY2hvaWNlOiBjaGF0UmVxdWVzdC50b29sX2Nob2ljZSxcbiAgICAgIH0pLFxuICAgIH0sXG4gICAgc3RyZWFtTW9kZSxcbiAgICBjcmVkZW50aWFsczogZXh0cmFNZXRhZGF0YVJlZi5jdXJyZW50LmNyZWRlbnRpYWxzLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIC4uLmV4dHJhTWV0YWRhdGFSZWYuY3VycmVudC5oZWFkZXJzLFxuICAgICAgLi4uY2hhdFJlcXVlc3Qub3B0aW9ucz8uaGVhZGVycyxcbiAgICB9LFxuICAgIGFib3J0Q29udHJvbGxlcjogKCkgPT4gYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQsXG4gICAgcmVzdG9yZU1lc3NhZ2VzT25GYWlsdXJlKCkge1xuICAgICAgbXV0YXRlKHByZXZpb3VzTWVzc2FnZXMsIGZhbHNlKTtcbiAgICB9LFxuICAgIG9uUmVzcG9uc2UsXG4gICAgb25VcGRhdGUobWVyZ2VkLCBkYXRhKSB7XG4gICAgICBtdXRhdGUoWy4uLmNoYXRSZXF1ZXN0Lm1lc3NhZ2VzLCAuLi5tZXJnZWRdLCBmYWxzZSk7XG4gICAgICBtdXRhdGVTdHJlYW1EYXRhKFsuLi4oZXhpc3RpbmdEYXRhIHx8IFtdKSwgLi4uKGRhdGEgfHwgW10pXSwgZmFsc2UpO1xuICAgIH0sXG4gICAgb25GaW5pc2gsXG4gICAgZ2VuZXJhdGVJZCxcbiAgfSk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlQ2hhdCh7XG4gIGFwaSA9ICcvYXBpL2NoYXQnLFxuICBpZCxcbiAgaW5pdGlhbE1lc3NhZ2VzLFxuICBpbml0aWFsSW5wdXQgPSAnJyxcbiAgc2VuZEV4dHJhTWVzc2FnZUZpZWxkcyxcbiAgZXhwZXJpbWVudGFsX29uRnVuY3Rpb25DYWxsLFxuICBleHBlcmltZW50YWxfb25Ub29sQ2FsbCxcbiAgc3RyZWFtTW9kZSxcbiAgb25SZXNwb25zZSxcbiAgb25GaW5pc2gsXG4gIG9uRXJyb3IsXG4gIGNyZWRlbnRpYWxzLFxuICBoZWFkZXJzLFxuICBib2R5LFxuICBnZW5lcmF0ZUlkID0gZ2VuZXJhdGVJZEZ1bmMsXG59OiBPbWl0PFVzZUNoYXRPcHRpb25zLCAnYXBpJz4gJiB7XG4gIGFwaT86IHN0cmluZyB8IFN0cmVhbWluZ1JlYWN0UmVzcG9uc2VBY3Rpb247XG4gIGtleT86IHN0cmluZztcbn0gPSB7fSk6IFVzZUNoYXRIZWxwZXJzIHtcbiAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgaWQgZm9yIHRoZSBjaGF0IGlmIG5vdCBwcm92aWRlZC5cbiAgY29uc3QgaG9va0lkID0gdXNlSWQoKTtcbiAgY29uc3QgaWRLZXkgPSBpZCA/PyBob29rSWQ7XG4gIGNvbnN0IGNoYXRLZXkgPSB0eXBlb2YgYXBpID09PSAnc3RyaW5nJyA/IFthcGksIGlkS2V5XSA6IGlkS2V5O1xuXG4gIC8vIFN0b3JlIGEgZW1wdHkgYXJyYXkgYXMgdGhlIGluaXRpYWwgbWVzc2FnZXNcbiAgLy8gKGluc3RlYWQgb2YgdXNpbmcgYSBkZWZhdWx0IHBhcmFtZXRlciB2YWx1ZSB0aGF0IGdldHMgcmUtY3JlYXRlZCBlYWNoIHRpbWUpXG4gIC8vIHRvIGF2b2lkIHJlLXJlbmRlcnM6XG4gIGNvbnN0IFtpbml0aWFsTWVzc2FnZXNGYWxsYmFja10gPSB1c2VTdGF0ZShbXSk7XG5cbiAgLy8gU3RvcmUgdGhlIGNoYXQgc3RhdGUgaW4gU1dSLCB1c2luZyB0aGUgY2hhdElkIGFzIHRoZSBrZXkgdG8gc2hhcmUgc3RhdGVzLlxuICBjb25zdCB7IGRhdGE6IG1lc3NhZ2VzLCBtdXRhdGUgfSA9IHVzZVNXUjxNZXNzYWdlW10+KFxuICAgIFtjaGF0S2V5LCAnbWVzc2FnZXMnXSxcbiAgICBudWxsLFxuICAgIHsgZmFsbGJhY2tEYXRhOiBpbml0aWFsTWVzc2FnZXMgPz8gaW5pdGlhbE1lc3NhZ2VzRmFsbGJhY2sgfSxcbiAgKTtcblxuICAvLyBXZSBzdG9yZSBsb2FkaW5nIHN0YXRlIGluIGFub3RoZXIgaG9vayB0byBzeW5jIGxvYWRpbmcgc3RhdGVzIGFjcm9zcyBob29rIGludm9jYXRpb25zXG4gIGNvbnN0IHsgZGF0YTogaXNMb2FkaW5nID0gZmFsc2UsIG11dGF0ZTogbXV0YXRlTG9hZGluZyB9ID0gdXNlU1dSPGJvb2xlYW4+KFxuICAgIFtjaGF0S2V5LCAnbG9hZGluZyddLFxuICAgIG51bGwsXG4gICk7XG5cbiAgY29uc3QgeyBkYXRhOiBzdHJlYW1EYXRhLCBtdXRhdGU6IG11dGF0ZVN0cmVhbURhdGEgfSA9IHVzZVNXUjxcbiAgICBKU09OVmFsdWVbXSB8IHVuZGVmaW5lZFxuICA+KFtjaGF0S2V5LCAnc3RyZWFtRGF0YSddLCBudWxsKTtcblxuICBjb25zdCB7IGRhdGE6IGVycm9yID0gdW5kZWZpbmVkLCBtdXRhdGU6IHNldEVycm9yIH0gPSB1c2VTV1I8XG4gICAgdW5kZWZpbmVkIHwgRXJyb3JcbiAgPihbY2hhdEtleSwgJ2Vycm9yJ10sIG51bGwpO1xuXG4gIC8vIEtlZXAgdGhlIGxhdGVzdCBtZXNzYWdlcyBpbiBhIHJlZi5cbiAgY29uc3QgbWVzc2FnZXNSZWYgPSB1c2VSZWY8TWVzc2FnZVtdPihtZXNzYWdlcyB8fCBbXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbWVzc2FnZXNSZWYuY3VycmVudCA9IG1lc3NhZ2VzIHx8IFtdO1xuICB9LCBbbWVzc2FnZXNdKTtcblxuICAvLyBBYm9ydCBjb250cm9sbGVyIHRvIGNhbmNlbCB0aGUgY3VycmVudCBBUEkgY2FsbC5cbiAgY29uc3QgYWJvcnRDb250cm9sbGVyUmVmID0gdXNlUmVmPEFib3J0Q29udHJvbGxlciB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IGV4dHJhTWV0YWRhdGFSZWYgPSB1c2VSZWYoe1xuICAgIGNyZWRlbnRpYWxzLFxuICAgIGhlYWRlcnMsXG4gICAgYm9keSxcbiAgfSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBleHRyYU1ldGFkYXRhUmVmLmN1cnJlbnQgPSB7XG4gICAgICBjcmVkZW50aWFscyxcbiAgICAgIGhlYWRlcnMsXG4gICAgICBib2R5LFxuICAgIH07XG4gIH0sIFtjcmVkZW50aWFscywgaGVhZGVycywgYm9keV0pO1xuXG4gIGNvbnN0IHRyaWdnZXJSZXF1ZXN0ID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKGNoYXRSZXF1ZXN0OiBDaGF0UmVxdWVzdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbXV0YXRlTG9hZGluZyh0cnVlKTtcbiAgICAgICAgc2V0RXJyb3IodW5kZWZpbmVkKTtcblxuICAgICAgICBjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50ID0gYWJvcnRDb250cm9sbGVyO1xuXG4gICAgICAgIGF3YWl0IHByb2Nlc3NDaGF0U3RyZWFtKHtcbiAgICAgICAgICBnZXRTdHJlYW1lZFJlc3BvbnNlOiAoKSA9PlxuICAgICAgICAgICAgZ2V0U3RyZWFtZWRSZXNwb25zZShcbiAgICAgICAgICAgICAgYXBpLFxuICAgICAgICAgICAgICBjaGF0UmVxdWVzdCxcbiAgICAgICAgICAgICAgbXV0YXRlLFxuICAgICAgICAgICAgICBtdXRhdGVTdHJlYW1EYXRhLFxuICAgICAgICAgICAgICBzdHJlYW1EYXRhISxcbiAgICAgICAgICAgICAgZXh0cmFNZXRhZGF0YVJlZixcbiAgICAgICAgICAgICAgbWVzc2FnZXNSZWYsXG4gICAgICAgICAgICAgIGFib3J0Q29udHJvbGxlclJlZixcbiAgICAgICAgICAgICAgZ2VuZXJhdGVJZCxcbiAgICAgICAgICAgICAgc3RyZWFtTW9kZSxcbiAgICAgICAgICAgICAgb25GaW5pc2gsXG4gICAgICAgICAgICAgIG9uUmVzcG9uc2UsXG4gICAgICAgICAgICAgIHNlbmRFeHRyYU1lc3NhZ2VGaWVsZHMsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIGV4cGVyaW1lbnRhbF9vbkZ1bmN0aW9uQ2FsbCxcbiAgICAgICAgICBleHBlcmltZW50YWxfb25Ub29sQ2FsbCxcbiAgICAgICAgICB1cGRhdGVDaGF0UmVxdWVzdDogY2hhdFJlcXVlc3RQYXJhbSA9PiB7XG4gICAgICAgICAgICBjaGF0UmVxdWVzdCA9IGNoYXRSZXF1ZXN0UGFyYW07XG4gICAgICAgICAgfSxcbiAgICAgICAgICBnZXRDdXJyZW50TWVzc2FnZXM6ICgpID0+IG1lc3NhZ2VzUmVmLmN1cnJlbnQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBJZ25vcmUgYWJvcnQgZXJyb3JzIGFzIHRoZXkgYXJlIGV4cGVjdGVkLlxuICAgICAgICBpZiAoKGVyciBhcyBhbnkpLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgICAgIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvbkVycm9yICYmIGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgb25FcnJvcihlcnIpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0RXJyb3IoZXJyIGFzIEVycm9yKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIG11dGF0ZUxvYWRpbmcoZmFsc2UpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW1xuICAgICAgbXV0YXRlLFxuICAgICAgbXV0YXRlTG9hZGluZyxcbiAgICAgIGFwaSxcbiAgICAgIGV4dHJhTWV0YWRhdGFSZWYsXG4gICAgICBvblJlc3BvbnNlLFxuICAgICAgb25GaW5pc2gsXG4gICAgICBvbkVycm9yLFxuICAgICAgc2V0RXJyb3IsXG4gICAgICBtdXRhdGVTdHJlYW1EYXRhLFxuICAgICAgc3RyZWFtRGF0YSxcbiAgICAgIHNlbmRFeHRyYU1lc3NhZ2VGaWVsZHMsXG4gICAgICBleHBlcmltZW50YWxfb25GdW5jdGlvbkNhbGwsXG4gICAgICBleHBlcmltZW50YWxfb25Ub29sQ2FsbCxcbiAgICAgIG1lc3NhZ2VzUmVmLFxuICAgICAgYWJvcnRDb250cm9sbGVyUmVmLFxuICAgICAgZ2VuZXJhdGVJZCxcbiAgICBdLFxuICApO1xuXG4gIGNvbnN0IGFwcGVuZCA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jIChcbiAgICAgIG1lc3NhZ2U6IE1lc3NhZ2UgfCBDcmVhdGVNZXNzYWdlLFxuICAgICAge1xuICAgICAgICBvcHRpb25zLFxuICAgICAgICBmdW5jdGlvbnMsXG4gICAgICAgIGZ1bmN0aW9uX2NhbGwsXG4gICAgICAgIHRvb2xzLFxuICAgICAgICB0b29sX2Nob2ljZSxcbiAgICAgICAgZGF0YSxcbiAgICAgIH06IENoYXRSZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgICkgPT4ge1xuICAgICAgaWYgKCFtZXNzYWdlLmlkKSB7XG4gICAgICAgIG1lc3NhZ2UuaWQgPSBnZW5lcmF0ZUlkKCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNoYXRSZXF1ZXN0OiBDaGF0UmVxdWVzdCA9IHtcbiAgICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzUmVmLmN1cnJlbnQuY29uY2F0KG1lc3NhZ2UgYXMgTWVzc2FnZSksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIC4uLihmdW5jdGlvbnMgIT09IHVuZGVmaW5lZCAmJiB7IGZ1bmN0aW9ucyB9KSxcbiAgICAgICAgLi4uKGZ1bmN0aW9uX2NhbGwgIT09IHVuZGVmaW5lZCAmJiB7IGZ1bmN0aW9uX2NhbGwgfSksXG4gICAgICAgIC4uLih0b29scyAhPT0gdW5kZWZpbmVkICYmIHsgdG9vbHMgfSksXG4gICAgICAgIC4uLih0b29sX2Nob2ljZSAhPT0gdW5kZWZpbmVkICYmIHsgdG9vbF9jaG9pY2UgfSksXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gdHJpZ2dlclJlcXVlc3QoY2hhdFJlcXVlc3QpO1xuICAgIH0sXG4gICAgW3RyaWdnZXJSZXF1ZXN0LCBnZW5lcmF0ZUlkXSxcbiAgKTtcblxuICBjb25zdCByZWxvYWQgPSB1c2VDYWxsYmFjayhcbiAgICBhc3luYyAoe1xuICAgICAgb3B0aW9ucyxcbiAgICAgIGZ1bmN0aW9ucyxcbiAgICAgIGZ1bmN0aW9uX2NhbGwsXG4gICAgICB0b29scyxcbiAgICAgIHRvb2xfY2hvaWNlLFxuICAgIH06IENoYXRSZXF1ZXN0T3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgICBpZiAobWVzc2FnZXNSZWYuY3VycmVudC5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gICAgICAvLyBSZW1vdmUgbGFzdCBhc3Npc3RhbnQgbWVzc2FnZSBhbmQgcmV0cnkgbGFzdCB1c2VyIG1lc3NhZ2UuXG4gICAgICBjb25zdCBsYXN0TWVzc2FnZSA9IG1lc3NhZ2VzUmVmLmN1cnJlbnRbbWVzc2FnZXNSZWYuY3VycmVudC5sZW5ndGggLSAxXTtcbiAgICAgIGlmIChsYXN0TWVzc2FnZS5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICBjb25zdCBjaGF0UmVxdWVzdDogQ2hhdFJlcXVlc3QgPSB7XG4gICAgICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzUmVmLmN1cnJlbnQuc2xpY2UoMCwgLTEpLFxuICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgLi4uKGZ1bmN0aW9ucyAhPT0gdW5kZWZpbmVkICYmIHsgZnVuY3Rpb25zIH0pLFxuICAgICAgICAgIC4uLihmdW5jdGlvbl9jYWxsICE9PSB1bmRlZmluZWQgJiYgeyBmdW5jdGlvbl9jYWxsIH0pLFxuICAgICAgICAgIC4uLih0b29scyAhPT0gdW5kZWZpbmVkICYmIHsgdG9vbHMgfSksXG4gICAgICAgICAgLi4uKHRvb2xfY2hvaWNlICE9PSB1bmRlZmluZWQgJiYgeyB0b29sX2Nob2ljZSB9KSxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdHJpZ2dlclJlcXVlc3QoY2hhdFJlcXVlc3QpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjaGF0UmVxdWVzdDogQ2hhdFJlcXVlc3QgPSB7XG4gICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlc1JlZi5jdXJyZW50LFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICAuLi4oZnVuY3Rpb25zICE9PSB1bmRlZmluZWQgJiYgeyBmdW5jdGlvbnMgfSksXG4gICAgICAgIC4uLihmdW5jdGlvbl9jYWxsICE9PSB1bmRlZmluZWQgJiYgeyBmdW5jdGlvbl9jYWxsIH0pLFxuICAgICAgICAuLi4odG9vbHMgIT09IHVuZGVmaW5lZCAmJiB7IHRvb2xzIH0pLFxuICAgICAgICAuLi4odG9vbF9jaG9pY2UgIT09IHVuZGVmaW5lZCAmJiB7IHRvb2xfY2hvaWNlIH0pLFxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHRyaWdnZXJSZXF1ZXN0KGNoYXRSZXF1ZXN0KTtcbiAgICB9LFxuICAgIFt0cmlnZ2VyUmVxdWVzdF0sXG4gICk7XG5cbiAgY29uc3Qgc3RvcCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50LmFib3J0KCk7XG4gICAgICBhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3Qgc2V0TWVzc2FnZXMgPSB1c2VDYWxsYmFjayhcbiAgICAobWVzc2FnZXM6IE1lc3NhZ2VbXSkgPT4ge1xuICAgICAgbXV0YXRlKG1lc3NhZ2VzLCBmYWxzZSk7XG4gICAgICBtZXNzYWdlc1JlZi5jdXJyZW50ID0gbWVzc2FnZXM7XG4gICAgfSxcbiAgICBbbXV0YXRlXSxcbiAgKTtcblxuICAvLyBJbnB1dCBzdGF0ZSBhbmQgaGFuZGxlcnMuXG4gIGNvbnN0IFtpbnB1dCwgc2V0SW5wdXRdID0gdXNlU3RhdGUoaW5pdGlhbElucHV0KTtcblxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSB1c2VDYWxsYmFjayhcbiAgICAoXG4gICAgICBlOiBSZWFjdC5Gb3JtRXZlbnQ8SFRNTEZvcm1FbGVtZW50PixcbiAgICAgIG9wdGlvbnM6IENoYXRSZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgICAgbWV0YWRhdGE/OiBPYmplY3QsXG4gICAgKSA9PiB7XG4gICAgICBpZiAobWV0YWRhdGEpIHtcbiAgICAgICAgZXh0cmFNZXRhZGF0YVJlZi5jdXJyZW50ID0ge1xuICAgICAgICAgIC4uLmV4dHJhTWV0YWRhdGFSZWYuY3VycmVudCxcbiAgICAgICAgICAuLi5tZXRhZGF0YSxcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKCFpbnB1dCkgcmV0dXJuO1xuXG4gICAgICBhcHBlbmQoXG4gICAgICAgIHtcbiAgICAgICAgICBjb250ZW50OiBpbnB1dCxcbiAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB9LFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKTtcbiAgICAgIHNldElucHV0KCcnKTtcbiAgICB9LFxuICAgIFtpbnB1dCwgYXBwZW5kXSxcbiAgKTtcblxuICBjb25zdCBoYW5kbGVJbnB1dENoYW5nZSA9IChlOiBhbnkpID0+IHtcbiAgICBzZXRJbnB1dChlLnRhcmdldC52YWx1ZSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBtZXNzYWdlczogbWVzc2FnZXMgfHwgW10sXG4gICAgZXJyb3IsXG4gICAgYXBwZW5kLFxuICAgIHJlbG9hZCxcbiAgICBzdG9wLFxuICAgIHNldE1lc3NhZ2VzLFxuICAgIGlucHV0LFxuICAgIHNldElucHV0LFxuICAgIGhhbmRsZUlucHV0Q2hhbmdlLFxuICAgIGhhbmRsZVN1Ym1pdCxcbiAgICBpc0xvYWRpbmcsXG4gICAgZGF0YTogc3RyZWFtRGF0YSxcbiAgfTtcbn1cbiIsImltcG9ydCB7XG4gIEFzc2lzdGFudE1lc3NhZ2UsXG4gIERhdGFNZXNzYWdlLFxuICBGdW5jdGlvbkNhbGwsXG4gIEpTT05WYWx1ZSxcbiAgVG9vbENhbGwsXG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgU3RyZWFtU3RyaW5nIH0gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyZWFtUGFydDxDT0RFIGV4dGVuZHMgc3RyaW5nLCBOQU1FIGV4dGVuZHMgc3RyaW5nLCBUWVBFPiB7XG4gIGNvZGU6IENPREU7XG4gIG5hbWU6IE5BTUU7XG4gIHBhcnNlOiAodmFsdWU6IEpTT05WYWx1ZSkgPT4geyB0eXBlOiBOQU1FOyB2YWx1ZTogVFlQRSB9O1xufVxuXG5jb25zdCB0ZXh0U3RyZWFtUGFydDogU3RyZWFtUGFydDwnMCcsICd0ZXh0Jywgc3RyaW5nPiA9IHtcbiAgY29kZTogJzAnLFxuICBuYW1lOiAndGV4dCcsXG4gIHBhcnNlOiAodmFsdWU6IEpTT05WYWx1ZSkgPT4ge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1widGV4dFwiIHBhcnRzIGV4cGVjdCBhIHN0cmluZyB2YWx1ZS4nKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdHlwZTogJ3RleHQnLCB2YWx1ZSB9O1xuICB9LFxufTtcblxuY29uc3QgZnVuY3Rpb25DYWxsU3RyZWFtUGFydDogU3RyZWFtUGFydDxcbiAgJzEnLFxuICAnZnVuY3Rpb25fY2FsbCcsXG4gIHsgZnVuY3Rpb25fY2FsbDogRnVuY3Rpb25DYWxsIH1cbj4gPSB7XG4gIGNvZGU6ICcxJyxcbiAgbmFtZTogJ2Z1bmN0aW9uX2NhbGwnLFxuICBwYXJzZTogKHZhbHVlOiBKU09OVmFsdWUpID0+IHtcbiAgICBpZiAoXG4gICAgICB2YWx1ZSA9PSBudWxsIHx8XG4gICAgICB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8XG4gICAgICAhKCdmdW5jdGlvbl9jYWxsJyBpbiB2YWx1ZSkgfHxcbiAgICAgIHR5cGVvZiB2YWx1ZS5mdW5jdGlvbl9jYWxsICE9PSAnb2JqZWN0JyB8fFxuICAgICAgdmFsdWUuZnVuY3Rpb25fY2FsbCA9PSBudWxsIHx8XG4gICAgICAhKCduYW1lJyBpbiB2YWx1ZS5mdW5jdGlvbl9jYWxsKSB8fFxuICAgICAgISgnYXJndW1lbnRzJyBpbiB2YWx1ZS5mdW5jdGlvbl9jYWxsKSB8fFxuICAgICAgdHlwZW9mIHZhbHVlLmZ1bmN0aW9uX2NhbGwubmFtZSAhPT0gJ3N0cmluZycgfHxcbiAgICAgIHR5cGVvZiB2YWx1ZS5mdW5jdGlvbl9jYWxsLmFyZ3VtZW50cyAhPT0gJ3N0cmluZydcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1wiZnVuY3Rpb25fY2FsbFwiIHBhcnRzIGV4cGVjdCBhbiBvYmplY3Qgd2l0aCBhIFwiZnVuY3Rpb25fY2FsbFwiIHByb3BlcnR5LicsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbCcsXG4gICAgICB2YWx1ZTogdmFsdWUgYXMgdW5rbm93biBhcyB7IGZ1bmN0aW9uX2NhbGw6IEZ1bmN0aW9uQ2FsbCB9LFxuICAgIH07XG4gIH0sXG59O1xuXG5jb25zdCBkYXRhU3RyZWFtUGFydDogU3RyZWFtUGFydDwnMicsICdkYXRhJywgQXJyYXk8SlNPTlZhbHVlPj4gPSB7XG4gIGNvZGU6ICcyJyxcbiAgbmFtZTogJ2RhdGEnLFxuICBwYXJzZTogKHZhbHVlOiBKU09OVmFsdWUpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1wiZGF0YVwiIHBhcnRzIGV4cGVjdCBhbiBhcnJheSB2YWx1ZS4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4geyB0eXBlOiAnZGF0YScsIHZhbHVlIH07XG4gIH0sXG59O1xuXG5jb25zdCBlcnJvclN0cmVhbVBhcnQ6IFN0cmVhbVBhcnQ8JzMnLCAnZXJyb3InLCBzdHJpbmc+ID0ge1xuICBjb2RlOiAnMycsXG4gIG5hbWU6ICdlcnJvcicsXG4gIHBhcnNlOiAodmFsdWU6IEpTT05WYWx1ZSkgPT4ge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1wiZXJyb3JcIiBwYXJ0cyBleHBlY3QgYSBzdHJpbmcgdmFsdWUuJyk7XG4gICAgfVxuICAgIHJldHVybiB7IHR5cGU6ICdlcnJvcicsIHZhbHVlIH07XG4gIH0sXG59O1xuXG5jb25zdCBhc3Npc3RhbnRNZXNzYWdlU3RyZWFtUGFydDogU3RyZWFtUGFydDxcbiAgJzQnLFxuICAnYXNzaXN0YW50X21lc3NhZ2UnLFxuICBBc3Npc3RhbnRNZXNzYWdlXG4+ID0ge1xuICBjb2RlOiAnNCcsXG4gIG5hbWU6ICdhc3Npc3RhbnRfbWVzc2FnZScsXG4gIHBhcnNlOiAodmFsdWU6IEpTT05WYWx1ZSkgPT4ge1xuICAgIGlmIChcbiAgICAgIHZhbHVlID09IG51bGwgfHxcbiAgICAgIHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcgfHxcbiAgICAgICEoJ2lkJyBpbiB2YWx1ZSkgfHxcbiAgICAgICEoJ3JvbGUnIGluIHZhbHVlKSB8fFxuICAgICAgISgnY29udGVudCcgaW4gdmFsdWUpIHx8XG4gICAgICB0eXBlb2YgdmFsdWUuaWQgIT09ICdzdHJpbmcnIHx8XG4gICAgICB0eXBlb2YgdmFsdWUucm9sZSAhPT0gJ3N0cmluZycgfHxcbiAgICAgIHZhbHVlLnJvbGUgIT09ICdhc3Npc3RhbnQnIHx8XG4gICAgICAhQXJyYXkuaXNBcnJheSh2YWx1ZS5jb250ZW50KSB8fFxuICAgICAgIXZhbHVlLmNvbnRlbnQuZXZlcnkoXG4gICAgICAgIGl0ZW0gPT5cbiAgICAgICAgICBpdGVtICE9IG51bGwgJiZcbiAgICAgICAgICB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAndHlwZScgaW4gaXRlbSAmJlxuICAgICAgICAgIGl0ZW0udHlwZSA9PT0gJ3RleHQnICYmXG4gICAgICAgICAgJ3RleHQnIGluIGl0ZW0gJiZcbiAgICAgICAgICBpdGVtLnRleHQgIT0gbnVsbCAmJlxuICAgICAgICAgIHR5cGVvZiBpdGVtLnRleHQgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgJ3ZhbHVlJyBpbiBpdGVtLnRleHQgJiZcbiAgICAgICAgICB0eXBlb2YgaXRlbS50ZXh0LnZhbHVlID09PSAnc3RyaW5nJyxcbiAgICAgIClcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1wiYXNzaXN0YW50X21lc3NhZ2VcIiBwYXJ0cyBleHBlY3QgYW4gb2JqZWN0IHdpdGggYW4gXCJpZFwiLCBcInJvbGVcIiwgYW5kIFwiY29udGVudFwiIHByb3BlcnR5LicsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnYXNzaXN0YW50X21lc3NhZ2UnLFxuICAgICAgdmFsdWU6IHZhbHVlIGFzIEFzc2lzdGFudE1lc3NhZ2UsXG4gICAgfTtcbiAgfSxcbn07XG5cbmNvbnN0IGFzc2lzdGFudENvbnRyb2xEYXRhU3RyZWFtUGFydDogU3RyZWFtUGFydDxcbiAgJzUnLFxuICAnYXNzaXN0YW50X2NvbnRyb2xfZGF0YScsXG4gIHtcbiAgICB0aHJlYWRJZDogc3RyaW5nO1xuICAgIG1lc3NhZ2VJZDogc3RyaW5nO1xuICB9XG4+ID0ge1xuICBjb2RlOiAnNScsXG4gIG5hbWU6ICdhc3Npc3RhbnRfY29udHJvbF9kYXRhJyxcbiAgcGFyc2U6ICh2YWx1ZTogSlNPTlZhbHVlKSA9PiB7XG4gICAgaWYgKFxuICAgICAgdmFsdWUgPT0gbnVsbCB8fFxuICAgICAgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JyB8fFxuICAgICAgISgndGhyZWFkSWQnIGluIHZhbHVlKSB8fFxuICAgICAgISgnbWVzc2FnZUlkJyBpbiB2YWx1ZSkgfHxcbiAgICAgIHR5cGVvZiB2YWx1ZS50aHJlYWRJZCAhPT0gJ3N0cmluZycgfHxcbiAgICAgIHR5cGVvZiB2YWx1ZS5tZXNzYWdlSWQgIT09ICdzdHJpbmcnXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdcImFzc2lzdGFudF9jb250cm9sX2RhdGFcIiBwYXJ0cyBleHBlY3QgYW4gb2JqZWN0IHdpdGggYSBcInRocmVhZElkXCIgYW5kIFwibWVzc2FnZUlkXCIgcHJvcGVydHkuJyxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdhc3Npc3RhbnRfY29udHJvbF9kYXRhJyxcbiAgICAgIHZhbHVlOiB7XG4gICAgICAgIHRocmVhZElkOiB2YWx1ZS50aHJlYWRJZCxcbiAgICAgICAgbWVzc2FnZUlkOiB2YWx1ZS5tZXNzYWdlSWQsXG4gICAgICB9LFxuICAgIH07XG4gIH0sXG59O1xuXG5jb25zdCBkYXRhTWVzc2FnZVN0cmVhbVBhcnQ6IFN0cmVhbVBhcnQ8JzYnLCAnZGF0YV9tZXNzYWdlJywgRGF0YU1lc3NhZ2U+ID0ge1xuICBjb2RlOiAnNicsXG4gIG5hbWU6ICdkYXRhX21lc3NhZ2UnLFxuICBwYXJzZTogKHZhbHVlOiBKU09OVmFsdWUpID0+IHtcbiAgICBpZiAoXG4gICAgICB2YWx1ZSA9PSBudWxsIHx8XG4gICAgICB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8XG4gICAgICAhKCdyb2xlJyBpbiB2YWx1ZSkgfHxcbiAgICAgICEoJ2RhdGEnIGluIHZhbHVlKSB8fFxuICAgICAgdHlwZW9mIHZhbHVlLnJvbGUgIT09ICdzdHJpbmcnIHx8XG4gICAgICB2YWx1ZS5yb2xlICE9PSAnZGF0YSdcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1wiZGF0YV9tZXNzYWdlXCIgcGFydHMgZXhwZWN0IGFuIG9iamVjdCB3aXRoIGEgXCJyb2xlXCIgYW5kIFwiZGF0YVwiIHByb3BlcnR5LicsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnZGF0YV9tZXNzYWdlJyxcbiAgICAgIHZhbHVlOiB2YWx1ZSBhcyBEYXRhTWVzc2FnZSxcbiAgICB9O1xuICB9LFxufTtcblxuY29uc3QgdG9vbENhbGxTdHJlYW1QYXJ0OiBTdHJlYW1QYXJ0PFxuICAnNycsXG4gICd0b29sX2NhbGxzJyxcbiAgeyB0b29sX2NhbGxzOiBUb29sQ2FsbFtdIH1cbj4gPSB7XG4gIGNvZGU6ICc3JyxcbiAgbmFtZTogJ3Rvb2xfY2FsbHMnLFxuICBwYXJzZTogKHZhbHVlOiBKU09OVmFsdWUpID0+IHtcbiAgICBpZiAoXG4gICAgICB2YWx1ZSA9PSBudWxsIHx8XG4gICAgICB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8XG4gICAgICAhKCd0b29sX2NhbGxzJyBpbiB2YWx1ZSkgfHxcbiAgICAgIHR5cGVvZiB2YWx1ZS50b29sX2NhbGxzICE9PSAnb2JqZWN0JyB8fFxuICAgICAgdmFsdWUudG9vbF9jYWxscyA9PSBudWxsIHx8XG4gICAgICAhQXJyYXkuaXNBcnJheSh2YWx1ZS50b29sX2NhbGxzKSB8fFxuICAgICAgdmFsdWUudG9vbF9jYWxscy5zb21lKFxuICAgICAgICB0YyA9PlxuICAgICAgICAgIHRjID09IG51bGwgfHxcbiAgICAgICAgICB0eXBlb2YgdGMgIT09ICdvYmplY3QnIHx8XG4gICAgICAgICAgISgnaWQnIGluIHRjKSB8fFxuICAgICAgICAgIHR5cGVvZiB0Yy5pZCAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgICAhKCd0eXBlJyBpbiB0YykgfHxcbiAgICAgICAgICB0eXBlb2YgdGMudHlwZSAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgICAhKCdmdW5jdGlvbicgaW4gdGMpIHx8XG4gICAgICAgICAgdGMuZnVuY3Rpb24gPT0gbnVsbCB8fFxuICAgICAgICAgIHR5cGVvZiB0Yy5mdW5jdGlvbiAhPT0gJ29iamVjdCcgfHxcbiAgICAgICAgICAhKCdhcmd1bWVudHMnIGluIHRjLmZ1bmN0aW9uKSB8fFxuICAgICAgICAgIHR5cGVvZiB0Yy5mdW5jdGlvbi5uYW1lICE9PSAnc3RyaW5nJyB8fFxuICAgICAgICAgIHR5cGVvZiB0Yy5mdW5jdGlvbi5hcmd1bWVudHMgIT09ICdzdHJpbmcnLFxuICAgICAgKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnXCJ0b29sX2NhbGxzXCIgcGFydHMgZXhwZWN0IGFuIG9iamVjdCB3aXRoIGEgVG9vbENhbGxQYXlsb2FkLicsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAndG9vbF9jYWxscycsXG4gICAgICB2YWx1ZTogdmFsdWUgYXMgdW5rbm93biBhcyB7IHRvb2xfY2FsbHM6IFRvb2xDYWxsW10gfSxcbiAgICB9O1xuICB9LFxufTtcblxuY29uc3QgbWVzc2FnZUFubm90YXRpb25zU3RyZWFtUGFydDogU3RyZWFtUGFydDxcbiAgJzgnLFxuICAnbWVzc2FnZV9hbm5vdGF0aW9ucycsXG4gIEFycmF5PEpTT05WYWx1ZT5cbj4gPSB7XG4gIGNvZGU6ICc4JyxcbiAgbmFtZTogJ21lc3NhZ2VfYW5ub3RhdGlvbnMnLFxuICBwYXJzZTogKHZhbHVlOiBKU09OVmFsdWUpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1wibWVzc2FnZV9hbm5vdGF0aW9uc1wiIHBhcnRzIGV4cGVjdCBhbiBhcnJheSB2YWx1ZS4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4geyB0eXBlOiAnbWVzc2FnZV9hbm5vdGF0aW9ucycsIHZhbHVlIH07XG4gIH0sXG59O1xuXG5jb25zdCBzdHJlYW1QYXJ0cyA9IFtcbiAgdGV4dFN0cmVhbVBhcnQsXG4gIGZ1bmN0aW9uQ2FsbFN0cmVhbVBhcnQsXG4gIGRhdGFTdHJlYW1QYXJ0LFxuICBlcnJvclN0cmVhbVBhcnQsXG4gIGFzc2lzdGFudE1lc3NhZ2VTdHJlYW1QYXJ0LFxuICBhc3Npc3RhbnRDb250cm9sRGF0YVN0cmVhbVBhcnQsXG4gIGRhdGFNZXNzYWdlU3RyZWFtUGFydCxcbiAgdG9vbENhbGxTdHJlYW1QYXJ0LFxuICBtZXNzYWdlQW5ub3RhdGlvbnNTdHJlYW1QYXJ0LFxuXSBhcyBjb25zdDtcblxuLy8gdW5pb24gdHlwZSBvZiBhbGwgc3RyZWFtIHBhcnRzXG50eXBlIFN0cmVhbVBhcnRzID1cbiAgfCB0eXBlb2YgdGV4dFN0cmVhbVBhcnRcbiAgfCB0eXBlb2YgZnVuY3Rpb25DYWxsU3RyZWFtUGFydFxuICB8IHR5cGVvZiBkYXRhU3RyZWFtUGFydFxuICB8IHR5cGVvZiBlcnJvclN0cmVhbVBhcnRcbiAgfCB0eXBlb2YgYXNzaXN0YW50TWVzc2FnZVN0cmVhbVBhcnRcbiAgfCB0eXBlb2YgYXNzaXN0YW50Q29udHJvbERhdGFTdHJlYW1QYXJ0XG4gIHwgdHlwZW9mIGRhdGFNZXNzYWdlU3RyZWFtUGFydFxuICB8IHR5cGVvZiB0b29sQ2FsbFN0cmVhbVBhcnRcbiAgfCB0eXBlb2YgbWVzc2FnZUFubm90YXRpb25zU3RyZWFtUGFydDtcbi8qKlxuICogTWFwcyB0aGUgdHlwZSBvZiBhIHN0cmVhbSBwYXJ0IHRvIGl0cyB2YWx1ZSB0eXBlLlxuICovXG50eXBlIFN0cmVhbVBhcnRWYWx1ZVR5cGUgPSB7XG4gIFtQIGluIFN0cmVhbVBhcnRzIGFzIFBbJ25hbWUnXV06IFJldHVyblR5cGU8UFsncGFyc2UnXT5bJ3ZhbHVlJ107XG59O1xuXG5leHBvcnQgdHlwZSBTdHJlYW1QYXJ0VHlwZSA9XG4gIHwgUmV0dXJuVHlwZTx0eXBlb2YgdGV4dFN0cmVhbVBhcnQucGFyc2U+XG4gIHwgUmV0dXJuVHlwZTx0eXBlb2YgZnVuY3Rpb25DYWxsU3RyZWFtUGFydC5wYXJzZT5cbiAgfCBSZXR1cm5UeXBlPHR5cGVvZiBkYXRhU3RyZWFtUGFydC5wYXJzZT5cbiAgfCBSZXR1cm5UeXBlPHR5cGVvZiBlcnJvclN0cmVhbVBhcnQucGFyc2U+XG4gIHwgUmV0dXJuVHlwZTx0eXBlb2YgYXNzaXN0YW50TWVzc2FnZVN0cmVhbVBhcnQucGFyc2U+XG4gIHwgUmV0dXJuVHlwZTx0eXBlb2YgYXNzaXN0YW50Q29udHJvbERhdGFTdHJlYW1QYXJ0LnBhcnNlPlxuICB8IFJldHVyblR5cGU8dHlwZW9mIGRhdGFNZXNzYWdlU3RyZWFtUGFydC5wYXJzZT5cbiAgfCBSZXR1cm5UeXBlPHR5cGVvZiB0b29sQ2FsbFN0cmVhbVBhcnQucGFyc2U+XG4gIHwgUmV0dXJuVHlwZTx0eXBlb2YgbWVzc2FnZUFubm90YXRpb25zU3RyZWFtUGFydC5wYXJzZT47XG5cbmV4cG9ydCBjb25zdCBzdHJlYW1QYXJ0c0J5Q29kZSA9IHtcbiAgW3RleHRTdHJlYW1QYXJ0LmNvZGVdOiB0ZXh0U3RyZWFtUGFydCxcbiAgW2Z1bmN0aW9uQ2FsbFN0cmVhbVBhcnQuY29kZV06IGZ1bmN0aW9uQ2FsbFN0cmVhbVBhcnQsXG4gIFtkYXRhU3RyZWFtUGFydC5jb2RlXTogZGF0YVN0cmVhbVBhcnQsXG4gIFtlcnJvclN0cmVhbVBhcnQuY29kZV06IGVycm9yU3RyZWFtUGFydCxcbiAgW2Fzc2lzdGFudE1lc3NhZ2VTdHJlYW1QYXJ0LmNvZGVdOiBhc3Npc3RhbnRNZXNzYWdlU3RyZWFtUGFydCxcbiAgW2Fzc2lzdGFudENvbnRyb2xEYXRhU3RyZWFtUGFydC5jb2RlXTogYXNzaXN0YW50Q29udHJvbERhdGFTdHJlYW1QYXJ0LFxuICBbZGF0YU1lc3NhZ2VTdHJlYW1QYXJ0LmNvZGVdOiBkYXRhTWVzc2FnZVN0cmVhbVBhcnQsXG4gIFt0b29sQ2FsbFN0cmVhbVBhcnQuY29kZV06IHRvb2xDYWxsU3RyZWFtUGFydCxcbiAgW21lc3NhZ2VBbm5vdGF0aW9uc1N0cmVhbVBhcnQuY29kZV06IG1lc3NhZ2VBbm5vdGF0aW9uc1N0cmVhbVBhcnQsXG59IGFzIGNvbnN0O1xuXG4vKipcbiAqIFRoZSBtYXAgb2YgcHJlZml4ZXMgZm9yIGRhdGEgaW4gdGhlIHN0cmVhbVxuICpcbiAqIC0gMDogVGV4dCBmcm9tIHRoZSBMTE0gcmVzcG9uc2VcbiAqIC0gMTogKE9wZW5BSSkgZnVuY3Rpb25fY2FsbCByZXNwb25zZXNcbiAqIC0gMjogY3VzdG9tIEpTT04gYWRkZWQgYnkgdGhlIHVzZXIgdXNpbmcgYERhdGFgXG4gKiAtIDY6IChPcGVuQUkpIHRvb2xfY2FsbCByZXNwb25zZXNcbiAqXG4gKiBFeGFtcGxlOlxuICogYGBgXG4gKiAwOlZlcmNlbFxuICogMDonc1xuICogMDogQUlcbiAqIDA6IEFJXG4gKiAwOiBTREtcbiAqIDA6IGlzIGdyZWF0XG4gKiAwOiFcbiAqIDI6IHsgXCJzb21lSnNvblwiOiBcInZhbHVlXCIgfVxuICogMToge1wiZnVuY3Rpb25fY2FsbFwiOiB7XCJuYW1lXCI6IFwiZ2V0X2N1cnJlbnRfd2VhdGhlclwiLCBcImFyZ3VtZW50c1wiOiBcIntcXFxcblxcXFxcImxvY2F0aW9uXFxcXFwiOiBcXFxcXCJDaGFybG90dGVzdmlsbGUsIFZpcmdpbmlhXFxcXFwiLFxcXFxuXFxcXFwiZm9ybWF0XFxcXFwiOiBcXFxcXCJjZWxzaXVzXFxcXFwiXFxcXG59XCJ9fVxuICogNjoge1widG9vbF9jYWxsXCI6IHtcImlkXCI6IFwidG9vbF8wXCIsIFwidHlwZVwiOiBcImZ1bmN0aW9uXCIsIFwiZnVuY3Rpb25cIjoge1wibmFtZVwiOiBcImdldF9jdXJyZW50X3dlYXRoZXJcIiwgXCJhcmd1bWVudHNcIjogXCJ7XFxcXG5cXFxcXCJsb2NhdGlvblxcXFxcIjogXFxcXFwiQ2hhcmxvdHRlc3ZpbGxlLCBWaXJnaW5pYVxcXFxcIixcXFxcblxcXFxcImZvcm1hdFxcXFxcIjogXFxcXFwiY2Vsc2l1c1xcXFxcIlxcXFxufVwifX19XG4gKmBgYFxuICovXG5leHBvcnQgY29uc3QgU3RyZWFtU3RyaW5nUHJlZml4ZXMgPSB7XG4gIFt0ZXh0U3RyZWFtUGFydC5uYW1lXTogdGV4dFN0cmVhbVBhcnQuY29kZSxcbiAgW2Z1bmN0aW9uQ2FsbFN0cmVhbVBhcnQubmFtZV06IGZ1bmN0aW9uQ2FsbFN0cmVhbVBhcnQuY29kZSxcbiAgW2RhdGFTdHJlYW1QYXJ0Lm5hbWVdOiBkYXRhU3RyZWFtUGFydC5jb2RlLFxuICBbZXJyb3JTdHJlYW1QYXJ0Lm5hbWVdOiBlcnJvclN0cmVhbVBhcnQuY29kZSxcbiAgW2Fzc2lzdGFudE1lc3NhZ2VTdHJlYW1QYXJ0Lm5hbWVdOiBhc3Npc3RhbnRNZXNzYWdlU3RyZWFtUGFydC5jb2RlLFxuICBbYXNzaXN0YW50Q29udHJvbERhdGFTdHJlYW1QYXJ0Lm5hbWVdOiBhc3Npc3RhbnRDb250cm9sRGF0YVN0cmVhbVBhcnQuY29kZSxcbiAgW2RhdGFNZXNzYWdlU3RyZWFtUGFydC5uYW1lXTogZGF0YU1lc3NhZ2VTdHJlYW1QYXJ0LmNvZGUsXG4gIFt0b29sQ2FsbFN0cmVhbVBhcnQubmFtZV06IHRvb2xDYWxsU3RyZWFtUGFydC5jb2RlLFxuICBbbWVzc2FnZUFubm90YXRpb25zU3RyZWFtUGFydC5uYW1lXTogbWVzc2FnZUFubm90YXRpb25zU3RyZWFtUGFydC5jb2RlLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IGNvbnN0IHZhbGlkQ29kZXMgPSBzdHJlYW1QYXJ0cy5tYXAocGFydCA9PiBwYXJ0LmNvZGUpO1xuXG4vKipcblBhcnNlcyBhIHN0cmVhbSBwYXJ0IGZyb20gYSBzdHJpbmcuXG5cbkBwYXJhbSBsaW5lIFRoZSBzdHJpbmcgdG8gcGFyc2UuXG5AcmV0dXJucyBUaGUgcGFyc2VkIHN0cmVhbSBwYXJ0LlxuQHRocm93cyBBbiBlcnJvciBpZiB0aGUgc3RyaW5nIGNhbm5vdCBiZSBwYXJzZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBwYXJzZVN0cmVhbVBhcnQgPSAobGluZTogc3RyaW5nKTogU3RyZWFtUGFydFR5cGUgPT4ge1xuICBjb25zdCBmaXJzdFNlcGFyYXRvckluZGV4ID0gbGluZS5pbmRleE9mKCc6Jyk7XG5cbiAgaWYgKGZpcnN0U2VwYXJhdG9ySW5kZXggPT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gcGFyc2Ugc3RyZWFtIHN0cmluZy4gTm8gc2VwYXJhdG9yIGZvdW5kLicpO1xuICB9XG5cbiAgY29uc3QgcHJlZml4ID0gbGluZS5zbGljZSgwLCBmaXJzdFNlcGFyYXRvckluZGV4KTtcblxuICBpZiAoIXZhbGlkQ29kZXMuaW5jbHVkZXMocHJlZml4IGFzIGtleW9mIHR5cGVvZiBzdHJlYW1QYXJ0c0J5Q29kZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBwYXJzZSBzdHJlYW0gc3RyaW5nLiBJbnZhbGlkIGNvZGUgJHtwcmVmaXh9LmApO1xuICB9XG5cbiAgY29uc3QgY29kZSA9IHByZWZpeCBhcyBrZXlvZiB0eXBlb2Ygc3RyZWFtUGFydHNCeUNvZGU7XG5cbiAgY29uc3QgdGV4dFZhbHVlID0gbGluZS5zbGljZShmaXJzdFNlcGFyYXRvckluZGV4ICsgMSk7XG4gIGNvbnN0IGpzb25WYWx1ZTogSlNPTlZhbHVlID0gSlNPTi5wYXJzZSh0ZXh0VmFsdWUpO1xuXG4gIHJldHVybiBzdHJlYW1QYXJ0c0J5Q29kZVtjb2RlXS5wYXJzZShqc29uVmFsdWUpO1xufTtcblxuLyoqXG5QcmVwZW5kcyBhIHN0cmluZyB3aXRoIGEgcHJlZml4IGZyb20gdGhlIGBTdHJlYW1DaHVua1ByZWZpeGVzYCwgSlNPTi1pZmllcyBpdCxcbmFuZCBhcHBlbmRzIGEgbmV3IGxpbmUuXG5cbkl0IGVuc3VyZXMgdHlwZS1zYWZldHkgZm9yIHRoZSBwYXJ0IHR5cGUgYW5kIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0U3RyZWFtUGFydDxUIGV4dGVuZHMga2V5b2YgU3RyZWFtUGFydFZhbHVlVHlwZT4oXG4gIHR5cGU6IFQsXG4gIHZhbHVlOiBTdHJlYW1QYXJ0VmFsdWVUeXBlW1RdLFxuKTogU3RyZWFtU3RyaW5nIHtcbiAgY29uc3Qgc3RyZWFtUGFydCA9IHN0cmVhbVBhcnRzLmZpbmQocGFydCA9PiBwYXJ0Lm5hbWUgPT09IHR5cGUpO1xuXG4gIGlmICghc3RyZWFtUGFydCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdHJlYW0gcGFydCB0eXBlOiAke3R5cGV9YCk7XG4gIH1cblxuICByZXR1cm4gYCR7c3RyZWFtUGFydC5jb2RlfToke0pTT04uc3RyaW5naWZ5KHZhbHVlKX1cXG5gO1xufVxuIiwiaW1wb3J0IHsgU3RyZWFtUGFydFR5cGUsIHBhcnNlU3RyZWFtUGFydCB9IGZyb20gJy4vc3RyZWFtLXBhcnRzJztcblxuY29uc3QgTkVXTElORSA9ICdcXG4nLmNoYXJDb2RlQXQoMCk7XG5cbi8vIGNvbmNhdGVuYXRlcyBhbGwgdGhlIGNodW5rcyBpbnRvIGEgc2luZ2xlIFVpbnQ4QXJyYXlcbmZ1bmN0aW9uIGNvbmNhdENodW5rcyhjaHVua3M6IFVpbnQ4QXJyYXlbXSwgdG90YWxMZW5ndGg6IG51bWJlcikge1xuICBjb25zdCBjb25jYXRlbmF0ZWRDaHVua3MgPSBuZXcgVWludDhBcnJheSh0b3RhbExlbmd0aCk7XG5cbiAgbGV0IG9mZnNldCA9IDA7XG4gIGZvciAoY29uc3QgY2h1bmsgb2YgY2h1bmtzKSB7XG4gICAgY29uY2F0ZW5hdGVkQ2h1bmtzLnNldChjaHVuaywgb2Zmc2V0KTtcbiAgICBvZmZzZXQgKz0gY2h1bmsubGVuZ3RoO1xuICB9XG4gIGNodW5rcy5sZW5ndGggPSAwO1xuXG4gIHJldHVybiBjb25jYXRlbmF0ZWRDaHVua3M7XG59XG5cbi8qKlxuQ29udmVydHMgYSBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXIgaW50byBhbiBhc3luYyBnZW5lcmF0b3IgdGhhdCB5aWVsZHNcblN0cmVhbVBhcnQgb2JqZWN0cy5cblxuQHBhcmFtIHJlYWRlciBcbiAgICAgICBSZWFkZXIgZm9yIHRoZSBzdHJlYW0gdG8gcmVhZCBmcm9tLlxuQHBhcmFtIGlzQWJvcnRlZFxuICAgICAgIE9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnVlIGlmIHRoZSByZXF1ZXN0IGhhcyBiZWVuIGFib3J0ZWQuXG4gICAgICAgSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSwgdGhlIGdlbmVyYXRvciB3aWxsIHN0b3AgcmVhZGluZyB0aGUgc3RyZWFtLlxuICAgICAgIElmIHRoZSBmdW5jdGlvbiBpcyBub3QgcHJvdmlkZWQsIHRoZSBnZW5lcmF0b3Igd2lsbCBub3Qgc3RvcCByZWFkaW5nIHRoZSBzdHJlYW0uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiogcmVhZERhdGFTdHJlYW0oXG4gIHJlYWRlcjogUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyPFVpbnQ4QXJyYXk+LFxuICB7XG4gICAgaXNBYm9ydGVkLFxuICB9OiB7XG4gICAgaXNBYm9ydGVkPzogKCkgPT4gYm9vbGVhbjtcbiAgfSA9IHt9LFxuKTogQXN5bmNHZW5lcmF0b3I8U3RyZWFtUGFydFR5cGU+IHtcbiAgLy8gaW1wbGVtZW50YXRpb24gbm90ZTogdGhpcyBzbGlnaHRseSBtb3JlIGNvbXBsZXggYWxnb3JpdGhtIGlzIHJlcXVpcmVkXG4gIC8vIHRvIHBhc3MgdGhlIHRlc3RzIGluIHRoZSBlZGdlIGVudmlyb25tZW50LlxuXG4gIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbiAgY29uc3QgY2h1bmtzOiBVaW50OEFycmF5W10gPSBbXTtcbiAgbGV0IHRvdGFsTGVuZ3RoID0gMDtcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIGNvbnN0IHsgdmFsdWUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG5cbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGNodW5rcy5wdXNoKHZhbHVlKTtcbiAgICAgIHRvdGFsTGVuZ3RoICs9IHZhbHVlLmxlbmd0aDtcbiAgICAgIGlmICh2YWx1ZVt2YWx1ZS5sZW5ndGggLSAxXSAhPT0gTkVXTElORSkge1xuICAgICAgICAvLyBpZiB0aGUgbGFzdCBjaGFyYWN0ZXIgaXMgbm90IGEgbmV3bGluZSwgd2UgaGF2ZSBub3QgcmVhZCB0aGUgd2hvbGUgSlNPTiB2YWx1ZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2h1bmtzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgYnJlYWs7IC8vIHdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kIG9mIHRoZSBzdHJlYW1cbiAgICB9XG5cbiAgICBjb25zdCBjb25jYXRlbmF0ZWRDaHVua3MgPSBjb25jYXRDaHVua3MoY2h1bmtzLCB0b3RhbExlbmd0aCk7XG4gICAgdG90YWxMZW5ndGggPSAwO1xuXG4gICAgY29uc3Qgc3RyZWFtUGFydHMgPSBkZWNvZGVyXG4gICAgICAuZGVjb2RlKGNvbmNhdGVuYXRlZENodW5rcywgeyBzdHJlYW06IHRydWUgfSlcbiAgICAgIC5zcGxpdCgnXFxuJylcbiAgICAgIC5maWx0ZXIobGluZSA9PiBsaW5lICE9PSAnJykgLy8gc3BsaXR0aW5nIGxlYXZlcyBhbiBlbXB0eSBzdHJpbmcgYXQgdGhlIGVuZFxuICAgICAgLm1hcChwYXJzZVN0cmVhbVBhcnQpO1xuXG4gICAgZm9yIChjb25zdCBzdHJlYW1QYXJ0IG9mIHN0cmVhbVBhcnRzKSB7XG4gICAgICB5aWVsZCBzdHJlYW1QYXJ0O1xuICAgIH1cblxuICAgIC8vIFRoZSByZXF1ZXN0IGhhcyBiZWVuIGFib3J0ZWQsIHN0b3AgcmVhZGluZyB0aGUgc3RyZWFtLlxuICAgIGlmIChpc0Fib3J0ZWQ/LigpKSB7XG4gICAgICByZWFkZXIuY2FuY2VsKCk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IGN1c3RvbUFscGhhYmV0IH0gZnJvbSAnbmFub2lkL25vbi1zZWN1cmUnO1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhIDctY2hhcmFjdGVyIHJhbmRvbSBzdHJpbmcgdG8gdXNlIGZvciBJRHMuIE5vdCBzZWN1cmUuXG4gKi9cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZUlkID0gY3VzdG9tQWxwaGFiZXQoXG4gICcwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicsXG4gIDcsXG4pO1xuIiwiaW1wb3J0IHsgcmVhZERhdGFTdHJlYW0gfSBmcm9tICcuL3JlYWQtZGF0YS1zdHJlYW0nO1xuaW1wb3J0IHR5cGUgeyBGdW5jdGlvbkNhbGwsIEpTT05WYWx1ZSwgTWVzc2FnZSwgVG9vbENhbGwgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGdlbmVyYXRlSWQgYXMgZ2VuZXJhdGVJZEZ1bmN0aW9uIH0gZnJvbSAnLi9nZW5lcmF0ZS1pZCc7XG5cbnR5cGUgUHJlZml4TWFwID0ge1xuICB0ZXh0PzogTWVzc2FnZTtcbiAgZnVuY3Rpb25fY2FsbD86IE1lc3NhZ2UgJiB7XG4gICAgcm9sZTogJ2Fzc2lzdGFudCc7XG4gICAgZnVuY3Rpb25fY2FsbDogRnVuY3Rpb25DYWxsO1xuICB9O1xuICB0b29sX2NhbGxzPzogTWVzc2FnZSAmIHtcbiAgICByb2xlOiAnYXNzaXN0YW50JztcbiAgICB0b29sX2NhbGxzOiBUb29sQ2FsbFtdO1xuICB9O1xuICBkYXRhOiBKU09OVmFsdWVbXTtcbn07XG5cbmZ1bmN0aW9uIGFzc2lnbkFubm90YXRpb25zVG9NZXNzYWdlPFQgZXh0ZW5kcyBNZXNzYWdlIHwgbnVsbCB8IHVuZGVmaW5lZD4oXG4gIG1lc3NhZ2U6IFQsXG4gIGFubm90YXRpb25zOiBKU09OVmFsdWVbXSB8IHVuZGVmaW5lZCxcbik6IFQge1xuICBpZiAoIW1lc3NhZ2UgfHwgIWFubm90YXRpb25zIHx8ICFhbm5vdGF0aW9ucy5sZW5ndGgpIHJldHVybiBtZXNzYWdlO1xuICByZXR1cm4geyAuLi5tZXNzYWdlLCBhbm5vdGF0aW9uczogWy4uLmFubm90YXRpb25zXSB9IGFzIFQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwYXJzZUNvbXBsZXhSZXNwb25zZSh7XG4gIHJlYWRlcixcbiAgYWJvcnRDb250cm9sbGVyUmVmLFxuICB1cGRhdGUsXG4gIG9uRmluaXNoLFxuICBnZW5lcmF0ZUlkID0gZ2VuZXJhdGVJZEZ1bmN0aW9uLFxuICBnZXRDdXJyZW50RGF0ZSA9ICgpID0+IG5ldyBEYXRlKCksXG59OiB7XG4gIHJlYWRlcjogUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyPFVpbnQ4QXJyYXk+O1xuICBhYm9ydENvbnRyb2xsZXJSZWY/OiB7XG4gICAgY3VycmVudDogQWJvcnRDb250cm9sbGVyIHwgbnVsbDtcbiAgfTtcbiAgdXBkYXRlOiAobWVyZ2VkOiBNZXNzYWdlW10sIGRhdGE6IEpTT05WYWx1ZVtdIHwgdW5kZWZpbmVkKSA9PiB2b2lkO1xuICBvbkZpbmlzaD86IChwcmVmaXhNYXA6IFByZWZpeE1hcCkgPT4gdm9pZDtcbiAgZ2VuZXJhdGVJZD86ICgpID0+IHN0cmluZztcbiAgZ2V0Q3VycmVudERhdGU/OiAoKSA9PiBEYXRlO1xufSkge1xuICBjb25zdCBjcmVhdGVkQXQgPSBnZXRDdXJyZW50RGF0ZSgpO1xuICBjb25zdCBwcmVmaXhNYXA6IFByZWZpeE1hcCA9IHtcbiAgICBkYXRhOiBbXSxcbiAgfTtcblxuICAvLyBrZWVwIGxpc3Qgb2YgY3VycmVudCBtZXNzYWdlIGFubm90YXRpb25zIGZvciBtZXNzYWdlXG4gIGxldCBtZXNzYWdlX2Fubm90YXRpb25zOiBKU09OVmFsdWVbXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICAvLyB3ZSBjcmVhdGUgYSBtYXAgb2YgZWFjaCBwcmVmaXgsIGFuZCBmb3IgZWFjaCBwcmVmaXhlZCBtZXNzYWdlIHdlIHB1c2ggdG8gdGhlIG1hcFxuICBmb3IgYXdhaXQgKGNvbnN0IHsgdHlwZSwgdmFsdWUgfSBvZiByZWFkRGF0YVN0cmVhbShyZWFkZXIsIHtcbiAgICBpc0Fib3J0ZWQ6ICgpID0+IGFib3J0Q29udHJvbGxlclJlZj8uY3VycmVudCA9PT0gbnVsbCxcbiAgfSkpIHtcbiAgICBpZiAodHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICBpZiAocHJlZml4TWFwWyd0ZXh0J10pIHtcbiAgICAgICAgcHJlZml4TWFwWyd0ZXh0J10gPSB7XG4gICAgICAgICAgLi4ucHJlZml4TWFwWyd0ZXh0J10sXG4gICAgICAgICAgY29udGVudDogKHByZWZpeE1hcFsndGV4dCddLmNvbnRlbnQgfHwgJycpICsgdmFsdWUsXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcmVmaXhNYXBbJ3RleHQnXSA9IHtcbiAgICAgICAgICBpZDogZ2VuZXJhdGVJZCgpLFxuICAgICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLFxuICAgICAgICAgIGNvbnRlbnQ6IHZhbHVlLFxuICAgICAgICAgIGNyZWF0ZWRBdCxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgZnVuY3Rpb25DYWxsTWVzc2FnZTogTWVzc2FnZSB8IG51bGwgfCB1bmRlZmluZWQgPSBudWxsO1xuXG4gICAgaWYgKHR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgcHJlZml4TWFwWydmdW5jdGlvbl9jYWxsJ10gPSB7XG4gICAgICAgIGlkOiBnZW5lcmF0ZUlkKCksXG4gICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLFxuICAgICAgICBjb250ZW50OiAnJyxcbiAgICAgICAgZnVuY3Rpb25fY2FsbDogdmFsdWUuZnVuY3Rpb25fY2FsbCxcbiAgICAgICAgbmFtZTogdmFsdWUuZnVuY3Rpb25fY2FsbC5uYW1lLFxuICAgICAgICBjcmVhdGVkQXQsXG4gICAgICB9O1xuXG4gICAgICBmdW5jdGlvbkNhbGxNZXNzYWdlID0gcHJlZml4TWFwWydmdW5jdGlvbl9jYWxsJ107XG4gICAgfVxuXG4gICAgbGV0IHRvb2xDYWxsTWVzc2FnZTogTWVzc2FnZSB8IG51bGwgfCB1bmRlZmluZWQgPSBudWxsO1xuXG4gICAgaWYgKHR5cGUgPT09ICd0b29sX2NhbGxzJykge1xuICAgICAgcHJlZml4TWFwWyd0b29sX2NhbGxzJ10gPSB7XG4gICAgICAgIGlkOiBnZW5lcmF0ZUlkKCksXG4gICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLFxuICAgICAgICBjb250ZW50OiAnJyxcbiAgICAgICAgdG9vbF9jYWxsczogdmFsdWUudG9vbF9jYWxscyxcbiAgICAgICAgY3JlYXRlZEF0LFxuICAgICAgfTtcblxuICAgICAgdG9vbENhbGxNZXNzYWdlID0gcHJlZml4TWFwWyd0b29sX2NhbGxzJ107XG4gICAgfVxuXG4gICAgaWYgKHR5cGUgPT09ICdkYXRhJykge1xuICAgICAgcHJlZml4TWFwWydkYXRhJ10ucHVzaCguLi52YWx1ZSk7XG4gICAgfVxuXG4gICAgbGV0IHJlc3BvbnNlTWVzc2FnZSA9IHByZWZpeE1hcFsndGV4dCddO1xuXG4gICAgaWYgKHR5cGUgPT09ICdtZXNzYWdlX2Fubm90YXRpb25zJykge1xuICAgICAgaWYgKCFtZXNzYWdlX2Fubm90YXRpb25zKSB7XG4gICAgICAgIG1lc3NhZ2VfYW5ub3RhdGlvbnMgPSBbLi4udmFsdWVdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWVzc2FnZV9hbm5vdGF0aW9ucy5wdXNoKC4uLnZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIGFueSBleGlzdGluZyBtZXNzYWdlIHdpdGggdGhlIGxhdGVzdCBhbm5vdGF0aW9uc1xuICAgICAgZnVuY3Rpb25DYWxsTWVzc2FnZSA9IGFzc2lnbkFubm90YXRpb25zVG9NZXNzYWdlKFxuICAgICAgICBwcmVmaXhNYXBbJ2Z1bmN0aW9uX2NhbGwnXSxcbiAgICAgICAgbWVzc2FnZV9hbm5vdGF0aW9ucyxcbiAgICAgICk7XG4gICAgICB0b29sQ2FsbE1lc3NhZ2UgPSBhc3NpZ25Bbm5vdGF0aW9uc1RvTWVzc2FnZShcbiAgICAgICAgcHJlZml4TWFwWyd0b29sX2NhbGxzJ10sXG4gICAgICAgIG1lc3NhZ2VfYW5ub3RhdGlvbnMsXG4gICAgICApO1xuICAgICAgcmVzcG9uc2VNZXNzYWdlID0gYXNzaWduQW5ub3RhdGlvbnNUb01lc3NhZ2UoXG4gICAgICAgIHByZWZpeE1hcFsndGV4dCddLFxuICAgICAgICBtZXNzYWdlX2Fubm90YXRpb25zLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBrZWVwcyB0aGUgcHJlZml4TWFwIHVwIHRvIGRhdGUgd2l0aCB0aGUgbGF0ZXN0IGFubm90YXRpb25zLCBldmVuIGlmIGFubm90YXRpb25zIHByZWNlZGVkIHRoZSBtZXNzYWdlXG4gICAgaWYgKG1lc3NhZ2VfYW5ub3RhdGlvbnM/Lmxlbmd0aCkge1xuICAgICAgY29uc3QgbWVzc2FnZVByZWZpeEtleXM6IChrZXlvZiBQcmVmaXhNYXApW10gPSBbXG4gICAgICAgICd0ZXh0JyxcbiAgICAgICAgJ2Z1bmN0aW9uX2NhbGwnLFxuICAgICAgICAndG9vbF9jYWxscycsXG4gICAgICBdO1xuICAgICAgbWVzc2FnZVByZWZpeEtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBpZiAocHJlZml4TWFwW2tleV0pIHtcbiAgICAgICAgICAocHJlZml4TWFwW2tleV0gYXMgTWVzc2FnZSkuYW5ub3RhdGlvbnMgPSBbLi4ubWVzc2FnZV9hbm5vdGF0aW9ucyFdO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBXZSBhZGQgZnVuY3Rpb24gJiB0b29sIGNhbGxzIGFuZCByZXNwb25zZSBtZXNzYWdlcyB0byB0aGUgbWVzc2FnZXNbXSwgYnV0IGRhdGEgaXMgaXRzIG93biB0aGluZ1xuICAgIGNvbnN0IG1lcmdlZCA9IFtmdW5jdGlvbkNhbGxNZXNzYWdlLCB0b29sQ2FsbE1lc3NhZ2UsIHJlc3BvbnNlTWVzc2FnZV1cbiAgICAgIC5maWx0ZXIoQm9vbGVhbilcbiAgICAgIC5tYXAobWVzc2FnZSA9PiAoe1xuICAgICAgICAuLi5hc3NpZ25Bbm5vdGF0aW9uc1RvTWVzc2FnZShtZXNzYWdlLCBtZXNzYWdlX2Fubm90YXRpb25zKSxcbiAgICAgIH0pKSBhcyBNZXNzYWdlW107XG5cbiAgICB1cGRhdGUobWVyZ2VkLCBbLi4ucHJlZml4TWFwWydkYXRhJ11dKTsgLy8gbWFrZSBhIGNvcHkgb2YgdGhlIGRhdGEgYXJyYXlcbiAgfVxuXG4gIG9uRmluaXNoPy4ocHJlZml4TWFwKTtcblxuICByZXR1cm4ge1xuICAgIG1lc3NhZ2VzOiBbXG4gICAgICBwcmVmaXhNYXAudGV4dCxcbiAgICAgIHByZWZpeE1hcC5mdW5jdGlvbl9jYWxsLFxuICAgICAgcHJlZml4TWFwLnRvb2xfY2FsbHMsXG4gICAgXS5maWx0ZXIoQm9vbGVhbikgYXMgTWVzc2FnZVtdLFxuICAgIGRhdGE6IHByZWZpeE1hcC5kYXRhLFxuICB9O1xufVxuIiwiaW1wb3J0IHtcbiAgU3RyZWFtUGFydFR5cGUsXG4gIFN0cmVhbVN0cmluZ1ByZWZpeGVzLFxuICBwYXJzZVN0cmVhbVBhcnQsXG59IGZyb20gJy4vc3RyZWFtLXBhcnRzJztcblxuZXhwb3J0ICogZnJvbSAnLi9nZW5lcmF0ZS1pZCc7XG5cbi8vIFRPRE8gcmVtb3ZlIChicmVha2luZyBjaGFuZ2UpXG5leHBvcnQgeyBnZW5lcmF0ZUlkIGFzIG5hbm9pZCB9IGZyb20gJy4vZ2VuZXJhdGUtaWQnO1xuXG4vLyBFeHBvcnQgc3RyZWFtIGRhdGEgdXRpbGl0aWVzIGZvciBjdXN0b20gc3RyZWFtIGltcGxlbWVudGF0aW9ucyxcbi8vIGJvdGggb24gdGhlIGNsaWVudCBhbmQgc2VydmVyIHNpZGUuXG5leHBvcnQgdHlwZSB7IFN0cmVhbVBhcnQgfSBmcm9tICcuL3N0cmVhbS1wYXJ0cyc7XG5leHBvcnQgeyBmb3JtYXRTdHJlYW1QYXJ0LCBwYXJzZVN0cmVhbVBhcnQgfSBmcm9tICcuL3N0cmVhbS1wYXJ0cyc7XG5leHBvcnQgeyByZWFkRGF0YVN0cmVhbSB9IGZyb20gJy4vcmVhZC1kYXRhLXN0cmVhbSc7XG5cbi8vIHNpbXBsZSBkZWNvZGVyIHNpZ25hdHVyZXM6XG5mdW5jdGlvbiBjcmVhdGVDaHVua0RlY29kZXIoKTogKGNodW5rOiBVaW50OEFycmF5IHwgdW5kZWZpbmVkKSA9PiBzdHJpbmc7XG5mdW5jdGlvbiBjcmVhdGVDaHVua0RlY29kZXIoXG4gIGNvbXBsZXg6IGZhbHNlLFxuKTogKGNodW5rOiBVaW50OEFycmF5IHwgdW5kZWZpbmVkKSA9PiBzdHJpbmc7XG4vLyBjb21wbGV4IGRlY29kZXIgc2lnbmF0dXJlOlxuZnVuY3Rpb24gY3JlYXRlQ2h1bmtEZWNvZGVyKFxuICBjb21wbGV4OiB0cnVlLFxuKTogKGNodW5rOiBVaW50OEFycmF5IHwgdW5kZWZpbmVkKSA9PiBTdHJlYW1QYXJ0VHlwZVtdO1xuLy8gY29tYmluZWQgc2lnbmF0dXJlIGZvciB3aGVuIHRoZSBjbGllbnQgY2FsbHMgdGhpcyBmdW5jdGlvbiB3aXRoIGEgYm9vbGVhbjpcbmZ1bmN0aW9uIGNyZWF0ZUNodW5rRGVjb2RlcihcbiAgY29tcGxleD86IGJvb2xlYW4sXG4pOiAoY2h1bms6IFVpbnQ4QXJyYXkgfCB1bmRlZmluZWQpID0+IFN0cmVhbVBhcnRUeXBlW10gfCBzdHJpbmc7XG5mdW5jdGlvbiBjcmVhdGVDaHVua0RlY29kZXIoY29tcGxleD86IGJvb2xlYW4pIHtcbiAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuXG4gIGlmICghY29tcGxleCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoY2h1bms6IFVpbnQ4QXJyYXkgfCB1bmRlZmluZWQpOiBzdHJpbmcge1xuICAgICAgaWYgKCFjaHVuaykgcmV0dXJuICcnO1xuICAgICAgcmV0dXJuIGRlY29kZXIuZGVjb2RlKGNodW5rLCB7IHN0cmVhbTogdHJ1ZSB9KTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChjaHVuazogVWludDhBcnJheSB8IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IGRlY29kZWQgPSBkZWNvZGVyXG4gICAgICAuZGVjb2RlKGNodW5rLCB7IHN0cmVhbTogdHJ1ZSB9KVxuICAgICAgLnNwbGl0KCdcXG4nKVxuICAgICAgLmZpbHRlcihsaW5lID0+IGxpbmUgIT09ICcnKTsgLy8gc3BsaXR0aW5nIGxlYXZlcyBhbiBlbXB0eSBzdHJpbmcgYXQgdGhlIGVuZFxuXG4gICAgcmV0dXJuIGRlY29kZWQubWFwKHBhcnNlU3RyZWFtUGFydCkuZmlsdGVyKEJvb2xlYW4pO1xuICB9O1xufVxuXG5leHBvcnQgeyBjcmVhdGVDaHVua0RlY29kZXIgfTtcblxuZXhwb3J0IGNvbnN0IGlzU3RyZWFtU3RyaW5nRXF1YWxUb1R5cGUgPSAoXG4gIHR5cGU6IGtleW9mIHR5cGVvZiBTdHJlYW1TdHJpbmdQcmVmaXhlcyxcbiAgdmFsdWU6IHN0cmluZyxcbik6IHZhbHVlIGlzIFN0cmVhbVN0cmluZyA9PlxuICB2YWx1ZS5zdGFydHNXaXRoKGAke1N0cmVhbVN0cmluZ1ByZWZpeGVzW3R5cGVdfTpgKSAmJiB2YWx1ZS5lbmRzV2l0aCgnXFxuJyk7XG5cbmV4cG9ydCB0eXBlIFN0cmVhbVN0cmluZyA9XG4gIGAkeyh0eXBlb2YgU3RyZWFtU3RyaW5nUHJlZml4ZXMpW2tleW9mIHR5cGVvZiBTdHJlYW1TdHJpbmdQcmVmaXhlc119OiR7c3RyaW5nfVxcbmA7XG4iLCJpbXBvcnQgeyBwYXJzZUNvbXBsZXhSZXNwb25zZSB9IGZyb20gJy4vcGFyc2UtY29tcGxleC1yZXNwb25zZSc7XG5pbXBvcnQgeyBJZEdlbmVyYXRvciwgSlNPTlZhbHVlLCBNZXNzYWdlIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBjcmVhdGVDaHVua0RlY29kZXIgfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGxDaGF0QXBpKHtcbiAgYXBpLFxuICBtZXNzYWdlcyxcbiAgYm9keSxcbiAgc3RyZWFtTW9kZSA9ICdzdHJlYW0tZGF0YScsXG4gIGNyZWRlbnRpYWxzLFxuICBoZWFkZXJzLFxuICBhYm9ydENvbnRyb2xsZXIsXG4gIHJlc3RvcmVNZXNzYWdlc09uRmFpbHVyZSxcbiAgb25SZXNwb25zZSxcbiAgb25VcGRhdGUsXG4gIG9uRmluaXNoLFxuICBnZW5lcmF0ZUlkLFxufToge1xuICBhcGk6IHN0cmluZztcbiAgbWVzc2FnZXM6IE9taXQ8TWVzc2FnZSwgJ2lkJz5bXTtcbiAgYm9keTogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgc3RyZWFtTW9kZT86ICdzdHJlYW0tZGF0YScgfCAndGV4dCc7XG4gIGNyZWRlbnRpYWxzPzogUmVxdWVzdENyZWRlbnRpYWxzO1xuICBoZWFkZXJzPzogSGVhZGVyc0luaXQ7XG4gIGFib3J0Q29udHJvbGxlcj86ICgpID0+IEFib3J0Q29udHJvbGxlciB8IG51bGw7XG4gIHJlc3RvcmVNZXNzYWdlc09uRmFpbHVyZTogKCkgPT4gdm9pZDtcbiAgb25SZXNwb25zZT86IChyZXNwb25zZTogUmVzcG9uc2UpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+O1xuICBvblVwZGF0ZTogKG1lcmdlZDogTWVzc2FnZVtdLCBkYXRhOiBKU09OVmFsdWVbXSB8IHVuZGVmaW5lZCkgPT4gdm9pZDtcbiAgb25GaW5pc2g/OiAobWVzc2FnZTogTWVzc2FnZSkgPT4gdm9pZDtcbiAgZ2VuZXJhdGVJZDogSWRHZW5lcmF0b3I7XG59KSB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYXBpLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgbWVzc2FnZXMsXG4gICAgICAuLi5ib2R5LFxuICAgIH0pLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAuLi5oZWFkZXJzLFxuICAgIH0sXG4gICAgc2lnbmFsOiBhYm9ydENvbnRyb2xsZXI/LigpPy5zaWduYWwsXG4gICAgY3JlZGVudGlhbHMsXG4gIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgcmVzdG9yZU1lc3NhZ2VzT25GYWlsdXJlKCk7XG4gICAgdGhyb3cgZXJyO1xuICB9KTtcblxuICBpZiAob25SZXNwb25zZSkge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBvblJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgcmVzdG9yZU1lc3NhZ2VzT25GYWlsdXJlKCk7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgKGF3YWl0IHJlc3BvbnNlLnRleHQoKSkgfHwgJ0ZhaWxlZCB0byBmZXRjaCB0aGUgY2hhdCByZXNwb25zZS4nLFxuICAgICk7XG4gIH1cblxuICBpZiAoIXJlc3BvbnNlLmJvZHkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSByZXNwb25zZSBib2R5IGlzIGVtcHR5LicpO1xuICB9XG5cbiAgY29uc3QgcmVhZGVyID0gcmVzcG9uc2UuYm9keS5nZXRSZWFkZXIoKTtcblxuICBzd2l0Y2ggKHN0cmVhbU1vZGUpIHtcbiAgICBjYXNlICd0ZXh0Jzoge1xuICAgICAgY29uc3QgZGVjb2RlciA9IGNyZWF0ZUNodW5rRGVjb2RlcigpO1xuXG4gICAgICBjb25zdCByZXN1bHRNZXNzYWdlID0ge1xuICAgICAgICBpZDogZ2VuZXJhdGVJZCgpLFxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnIGFzIGNvbnN0LFxuICAgICAgICBjb250ZW50OiAnJyxcbiAgICAgIH07XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXN1bHRNZXNzYWdlLmNvbnRlbnQgKz0gZGVjb2Rlcih2YWx1ZSk7XG4gICAgICAgIHJlc3VsdE1lc3NhZ2UuaWQgPSBnZW5lcmF0ZUlkKCk7XG5cbiAgICAgICAgLy8gbm90ZTogY3JlYXRpbmcgYSBuZXcgbWVzc2FnZSBvYmplY3QgaXMgcmVxdWlyZWQgZm9yIFNvbGlkLmpzIHN0cmVhbWluZ1xuICAgICAgICBvblVwZGF0ZShbeyAuLi5yZXN1bHRNZXNzYWdlIH1dLCBbXSk7XG5cbiAgICAgICAgLy8gVGhlIHJlcXVlc3QgaGFzIGJlZW4gYWJvcnRlZCwgc3RvcCByZWFkaW5nIHRoZSBzdHJlYW0uXG4gICAgICAgIGlmIChhYm9ydENvbnRyb2xsZXI/LigpID09PSBudWxsKSB7XG4gICAgICAgICAgcmVhZGVyLmNhbmNlbCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG9uRmluaXNoPy4ocmVzdWx0TWVzc2FnZSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1lc3NhZ2VzOiBbcmVzdWx0TWVzc2FnZV0sXG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjYXNlICdzdHJlYW0tZGF0YSc6IHtcbiAgICAgIHJldHVybiBhd2FpdCBwYXJzZUNvbXBsZXhSZXNwb25zZSh7XG4gICAgICAgIHJlYWRlcixcbiAgICAgICAgYWJvcnRDb250cm9sbGVyUmVmOlxuICAgICAgICAgIGFib3J0Q29udHJvbGxlciAhPSBudWxsID8geyBjdXJyZW50OiBhYm9ydENvbnRyb2xsZXIoKSB9IDogdW5kZWZpbmVkLFxuICAgICAgICB1cGRhdGU6IG9uVXBkYXRlLFxuICAgICAgICBvbkZpbmlzaChwcmVmaXhNYXApIHtcbiAgICAgICAgICBpZiAob25GaW5pc2ggJiYgcHJlZml4TWFwLnRleHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgb25GaW5pc2gocHJlZml4TWFwLnRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZ2VuZXJhdGVJZCxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIGNvbnN0IGV4aGF1c3RpdmVDaGVjazogbmV2ZXIgPSBzdHJlYW1Nb2RlO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHN0cmVhbSBtb2RlOiAke2V4aGF1c3RpdmVDaGVja31gKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIENoYXRSZXF1ZXN0LFxuICBGdW5jdGlvbkNhbGwsXG4gIEpTT05WYWx1ZSxcbiAgTWVzc2FnZSxcbiAgVG9vbENhbGwsXG59IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0NoYXRTdHJlYW0oe1xuICBnZXRTdHJlYW1lZFJlc3BvbnNlLFxuICBleHBlcmltZW50YWxfb25GdW5jdGlvbkNhbGwsXG4gIGV4cGVyaW1lbnRhbF9vblRvb2xDYWxsLFxuICB1cGRhdGVDaGF0UmVxdWVzdCxcbiAgZ2V0Q3VycmVudE1lc3NhZ2VzLFxufToge1xuICBnZXRTdHJlYW1lZFJlc3BvbnNlOiAoKSA9PiBQcm9taXNlPFxuICAgIE1lc3NhZ2UgfCB7IG1lc3NhZ2VzOiBNZXNzYWdlW107IGRhdGE6IEpTT05WYWx1ZVtdIH1cbiAgPjtcbiAgZXhwZXJpbWVudGFsX29uRnVuY3Rpb25DYWxsPzogKFxuICAgIGNoYXRNZXNzYWdlczogTWVzc2FnZVtdLFxuICAgIGZ1bmN0aW9uQ2FsbDogRnVuY3Rpb25DYWxsLFxuICApID0+IFByb21pc2U8dm9pZCB8IENoYXRSZXF1ZXN0PjtcbiAgZXhwZXJpbWVudGFsX29uVG9vbENhbGw/OiAoXG4gICAgY2hhdE1lc3NhZ2VzOiBNZXNzYWdlW10sXG4gICAgdG9vbENhbGxzOiBUb29sQ2FsbFtdLFxuICApID0+IFByb21pc2U8dm9pZCB8IENoYXRSZXF1ZXN0PjtcbiAgdXBkYXRlQ2hhdFJlcXVlc3Q6IChjaGF0UmVxdWVzdDogQ2hhdFJlcXVlc3QpID0+IHZvaWQ7XG4gIGdldEN1cnJlbnRNZXNzYWdlczogKCkgPT4gTWVzc2FnZVtdO1xufSkge1xuICB3aGlsZSAodHJ1ZSkge1xuICAgIC8vIFRPRE8tU1RSRUFNREFUQTogVGhpcyBzaG91bGQgYmUgeyAgY29uc3QgeyBtZXNzYWdlczogc3RyZWFtZWRSZXNwb25zZU1lc3NhZ2VzLCBkYXRhIH0gPVxuICAgIC8vIGF3YWl0IGdldFN0cmVhbWVkUmVzcG9uc2UofSBvbmNlIFN0cmVhbSBEYXRhIGlzIG5vdCBleHBlcmltZW50YWxcbiAgICBjb25zdCBtZXNzYWdlc0FuZERhdGFPckp1c3RNZXNzYWdlID0gYXdhaXQgZ2V0U3RyZWFtZWRSZXNwb25zZSgpO1xuXG4gICAgLy8gVXNpbmcgZXhwZXJpbWVudGFsIHN0cmVhbSBkYXRhXG4gICAgaWYgKCdtZXNzYWdlcycgaW4gbWVzc2FnZXNBbmREYXRhT3JKdXN0TWVzc2FnZSkge1xuICAgICAgbGV0IGhhc0ZvbGxvd2luZ1Jlc3BvbnNlID0gZmFsc2U7XG5cbiAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBtZXNzYWdlc0FuZERhdGFPckp1c3RNZXNzYWdlLm1lc3NhZ2VzKSB7XG4gICAgICAgIC8vIFNlZSBpZiB0aGUgbWVzc2FnZSBoYXMgYSBjb21wbGV0ZSBmdW5jdGlvbiBjYWxsIG9yIHRvb2wgY2FsbFxuICAgICAgICBpZiAoXG4gICAgICAgICAgKG1lc3NhZ2UuZnVuY3Rpb25fY2FsbCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICB0eXBlb2YgbWVzc2FnZS5mdW5jdGlvbl9jYWxsID09PSAnc3RyaW5nJykgJiZcbiAgICAgICAgICAobWVzc2FnZS50b29sX2NhbGxzID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIHR5cGVvZiBtZXNzYWdlLnRvb2xfY2FsbHMgPT09ICdzdHJpbmcnKVxuICAgICAgICApIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGhhc0ZvbGxvd2luZ1Jlc3BvbnNlID0gdHJ1ZTtcbiAgICAgICAgLy8gVHJ5IHRvIGhhbmRsZSBmdW5jdGlvbiBjYWxsXG4gICAgICAgIGlmIChleHBlcmltZW50YWxfb25GdW5jdGlvbkNhbGwpIHtcbiAgICAgICAgICBjb25zdCBmdW5jdGlvbkNhbGwgPSBtZXNzYWdlLmZ1bmN0aW9uX2NhbGw7XG4gICAgICAgICAgLy8gTWFrZSBzdXJlIGZ1bmN0aW9uQ2FsbCBpcyBhbiBvYmplY3RcbiAgICAgICAgICAvLyBJZiBub3QsIHdlIGdvdCB0b29sIGNhbGxzIGluc3RlYWQgb2YgZnVuY3Rpb24gY2FsbHNcbiAgICAgICAgICBpZiAodHlwZW9mIGZ1bmN0aW9uQ2FsbCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgJ2V4cGVyaW1lbnRhbF9vbkZ1bmN0aW9uQ2FsbCBzaG91bGQgbm90IGJlIGRlZmluZWQgd2hlbiB1c2luZyB0b29scycsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gVXNlciBoYW5kbGVzIHRoZSBmdW5jdGlvbiBjYWxsIGluIHRoZWlyIG93biBmdW5jdGlvbkNhbGxIYW5kbGVyLlxuICAgICAgICAgIC8vIFRoZSBcImFyZ3VtZW50c1wiIGtleSBvZiB0aGUgZnVuY3Rpb24gY2FsbCBvYmplY3Qgd2lsbCBzdGlsbCBiZSBhIHN0cmluZyB3aGljaCB3aWxsIGhhdmUgdG8gYmUgcGFyc2VkIGluIHRoZSBmdW5jdGlvbiBoYW5kbGVyLlxuICAgICAgICAgIC8vIElmIHRoZSBcImFyZ3VtZW50c1wiIEpTT04gaXMgbWFsZm9ybWVkIGR1ZSB0byBtb2RlbCBlcnJvciB0aGUgdXNlciB3aWxsIGhhdmUgdG8gaGFuZGxlIHRoYXQgdGhlbXNlbHZlcy5cblxuICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uQ2FsbFJlc3BvbnNlOiBDaGF0UmVxdWVzdCB8IHZvaWQgPVxuICAgICAgICAgICAgYXdhaXQgZXhwZXJpbWVudGFsX29uRnVuY3Rpb25DYWxsKFxuICAgICAgICAgICAgICBnZXRDdXJyZW50TWVzc2FnZXMoKSxcbiAgICAgICAgICAgICAgZnVuY3Rpb25DYWxsLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGRvZXMgbm90IHJldHVybiBhbnl0aGluZyBhcyBhIHJlc3VsdCBvZiB0aGUgZnVuY3Rpb24gY2FsbCwgdGhlIGxvb3Agd2lsbCBicmVhay5cbiAgICAgICAgICBpZiAoZnVuY3Rpb25DYWxsUmVzcG9uc2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGFzRm9sbG93aW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEEgZnVuY3Rpb24gY2FsbCByZXNwb25zZSB3YXMgcmV0dXJuZWQuXG4gICAgICAgICAgLy8gVGhlIHVwZGF0ZWQgY2hhdCB3aXRoIGZ1bmN0aW9uIGNhbGwgcmVzcG9uc2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBBUEkgaW4gdGhlIG5leHQgaXRlcmF0aW9uIG9mIHRoZSBsb29wLlxuICAgICAgICAgIHVwZGF0ZUNoYXRSZXF1ZXN0KGZ1bmN0aW9uQ2FsbFJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUcnkgdG8gaGFuZGxlIHRvb2wgY2FsbFxuICAgICAgICBpZiAoZXhwZXJpbWVudGFsX29uVG9vbENhbGwpIHtcbiAgICAgICAgICBjb25zdCB0b29sQ2FsbHMgPSBtZXNzYWdlLnRvb2xfY2FsbHM7XG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHRvb2xDYWxscyBpcyBhbiBhcnJheSBvZiBvYmplY3RzXG4gICAgICAgICAgLy8gSWYgbm90LCB3ZSBnb3QgZnVuY3Rpb24gY2FsbHMgaW5zdGVhZCBvZiB0b29sIGNhbGxzXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgIUFycmF5LmlzQXJyYXkodG9vbENhbGxzKSB8fFxuICAgICAgICAgICAgdG9vbENhbGxzLnNvbWUodG9vbENhbGwgPT4gdHlwZW9mIHRvb2xDYWxsICE9PSAnb2JqZWN0JylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgJ2V4cGVyaW1lbnRhbF9vblRvb2xDYWxsIHNob3VsZCBub3QgYmUgZGVmaW5lZCB3aGVuIHVzaW5nIHRvb2xzJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBVc2VyIGhhbmRsZXMgdGhlIGZ1bmN0aW9uIGNhbGwgaW4gdGhlaXIgb3duIGZ1bmN0aW9uQ2FsbEhhbmRsZXIuXG4gICAgICAgICAgLy8gVGhlIFwiYXJndW1lbnRzXCIga2V5IG9mIHRoZSBmdW5jdGlvbiBjYWxsIG9iamVjdCB3aWxsIHN0aWxsIGJlIGEgc3RyaW5nIHdoaWNoIHdpbGwgaGF2ZSB0byBiZSBwYXJzZWQgaW4gdGhlIGZ1bmN0aW9uIGhhbmRsZXIuXG4gICAgICAgICAgLy8gSWYgdGhlIFwiYXJndW1lbnRzXCIgSlNPTiBpcyBtYWxmb3JtZWQgZHVlIHRvIG1vZGVsIGVycm9yIHRoZSB1c2VyIHdpbGwgaGF2ZSB0byBoYW5kbGUgdGhhdCB0aGVtc2VsdmVzLlxuICAgICAgICAgIGNvbnN0IHRvb2xDYWxsUmVzcG9uc2U6IENoYXRSZXF1ZXN0IHwgdm9pZCA9XG4gICAgICAgICAgICBhd2FpdCBleHBlcmltZW50YWxfb25Ub29sQ2FsbChnZXRDdXJyZW50TWVzc2FnZXMoKSwgdG9vbENhbGxzKTtcblxuICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGRvZXMgbm90IHJldHVybiBhbnl0aGluZyBhcyBhIHJlc3VsdCBvZiB0aGUgZnVuY3Rpb24gY2FsbCwgdGhlIGxvb3Agd2lsbCBicmVhay5cbiAgICAgICAgICBpZiAodG9vbENhbGxSZXNwb25zZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBoYXNGb2xsb3dpbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQSBmdW5jdGlvbiBjYWxsIHJlc3BvbnNlIHdhcyByZXR1cm5lZC5cbiAgICAgICAgICAvLyBUaGUgdXBkYXRlZCBjaGF0IHdpdGggZnVuY3Rpb24gY2FsbCByZXNwb25zZSB3aWxsIGJlIHNlbnQgdG8gdGhlIEFQSSBpbiB0aGUgbmV4dCBpdGVyYXRpb24gb2YgdGhlIGxvb3AuXG4gICAgICAgICAgdXBkYXRlQ2hhdFJlcXVlc3QodG9vbENhbGxSZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghaGFzRm9sbG93aW5nUmVzcG9uc2UpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHN0cmVhbWVkUmVzcG9uc2VNZXNzYWdlID0gbWVzc2FnZXNBbmREYXRhT3JKdXN0TWVzc2FnZTtcblxuICAgICAgLy8gVE9ETy1TVFJFQU1EQVRBOiBSZW1vdmUgdGhpcyBvbmNlIFN0cmVhbSBEYXRhIGlzIG5vdCBleHBlcmltZW50YWxcbiAgICAgIGlmIChcbiAgICAgICAgKHN0cmVhbWVkUmVzcG9uc2VNZXNzYWdlLmZ1bmN0aW9uX2NhbGwgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgIHR5cGVvZiBzdHJlYW1lZFJlc3BvbnNlTWVzc2FnZS5mdW5jdGlvbl9jYWxsID09PSAnc3RyaW5nJykgJiZcbiAgICAgICAgKHN0cmVhbWVkUmVzcG9uc2VNZXNzYWdlLnRvb2xfY2FsbHMgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgIHR5cGVvZiBzdHJlYW1lZFJlc3BvbnNlTWVzc2FnZS50b29sX2NhbGxzID09PSAnc3RyaW5nJylcbiAgICAgICkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UgZ2V0IGhlcmUgYW5kIGFyZSBleHBlY3RpbmcgYSBmdW5jdGlvbiBjYWxsLCB0aGUgbWVzc2FnZSBzaG91bGQgaGF2ZSBvbmUsIGlmIG5vdCB3YXJuIGFuZCBjb250aW51ZVxuICAgICAgaWYgKGV4cGVyaW1lbnRhbF9vbkZ1bmN0aW9uQ2FsbCkge1xuICAgICAgICBjb25zdCBmdW5jdGlvbkNhbGwgPSBzdHJlYW1lZFJlc3BvbnNlTWVzc2FnZS5mdW5jdGlvbl9jYWxsO1xuICAgICAgICBpZiAoISh0eXBlb2YgZnVuY3Rpb25DYWxsID09PSAnb2JqZWN0JykpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAnZXhwZXJpbWVudGFsX29uRnVuY3Rpb25DYWxsIHNob3VsZCBub3QgYmUgZGVmaW5lZCB3aGVuIHVzaW5nIHRvb2xzJyxcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZ1bmN0aW9uQ2FsbFJlc3BvbnNlOiBDaGF0UmVxdWVzdCB8IHZvaWQgPVxuICAgICAgICAgIGF3YWl0IGV4cGVyaW1lbnRhbF9vbkZ1bmN0aW9uQ2FsbChnZXRDdXJyZW50TWVzc2FnZXMoKSwgZnVuY3Rpb25DYWxsKTtcblxuICAgICAgICAvLyBJZiB0aGUgdXNlciBkb2VzIG5vdCByZXR1cm4gYW55dGhpbmcgYXMgYSByZXN1bHQgb2YgdGhlIGZ1bmN0aW9uIGNhbGwsIHRoZSBsb29wIHdpbGwgYnJlYWsuXG4gICAgICAgIGlmIChmdW5jdGlvbkNhbGxSZXNwb25zZSA9PT0gdW5kZWZpbmVkKSBicmVhaztcbiAgICAgICAgLy8gQSBmdW5jdGlvbiBjYWxsIHJlc3BvbnNlIHdhcyByZXR1cm5lZC5cbiAgICAgICAgLy8gVGhlIHVwZGF0ZWQgY2hhdCB3aXRoIGZ1bmN0aW9uIGNhbGwgcmVzcG9uc2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBBUEkgaW4gdGhlIG5leHQgaXRlcmF0aW9uIG9mIHRoZSBsb29wLlxuICAgICAgICBmaXhGdW5jdGlvbkNhbGxBcmd1bWVudHMoZnVuY3Rpb25DYWxsUmVzcG9uc2UpO1xuICAgICAgICB1cGRhdGVDaGF0UmVxdWVzdChmdW5jdGlvbkNhbGxSZXNwb25zZSk7XG4gICAgICB9XG4gICAgICAvLyBJZiB3ZSBnZXQgaGVyZSBhbmQgYXJlIGV4cGVjdGluZyBhIHRvb2wgY2FsbCwgdGhlIG1lc3NhZ2Ugc2hvdWxkIGhhdmUgb25lLCBpZiBub3Qgd2FybiBhbmQgY29udGludWVcbiAgICAgIGlmIChleHBlcmltZW50YWxfb25Ub29sQ2FsbCkge1xuICAgICAgICBjb25zdCB0b29sQ2FsbHMgPSBzdHJlYW1lZFJlc3BvbnNlTWVzc2FnZS50b29sX2NhbGxzO1xuICAgICAgICBpZiAoISh0eXBlb2YgdG9vbENhbGxzID09PSAnb2JqZWN0JykpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAnZXhwZXJpbWVudGFsX29uVG9vbENhbGwgc2hvdWxkIG5vdCBiZSBkZWZpbmVkIHdoZW4gdXNpbmcgZnVuY3Rpb25zJyxcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xDYWxsUmVzcG9uc2U6IENoYXRSZXF1ZXN0IHwgdm9pZCA9XG4gICAgICAgICAgYXdhaXQgZXhwZXJpbWVudGFsX29uVG9vbENhbGwoZ2V0Q3VycmVudE1lc3NhZ2VzKCksIHRvb2xDYWxscyk7XG5cbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgZG9lcyBub3QgcmV0dXJuIGFueXRoaW5nIGFzIGEgcmVzdWx0IG9mIHRoZSBmdW5jdGlvbiBjYWxsLCB0aGUgbG9vcCB3aWxsIGJyZWFrLlxuICAgICAgICBpZiAodG9vbENhbGxSZXNwb25zZSA9PT0gdW5kZWZpbmVkKSBicmVhaztcbiAgICAgICAgLy8gQSBmdW5jdGlvbiBjYWxsIHJlc3BvbnNlIHdhcyByZXR1cm5lZC5cbiAgICAgICAgLy8gVGhlIHVwZGF0ZWQgY2hhdCB3aXRoIGZ1bmN0aW9uIGNhbGwgcmVzcG9uc2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBBUEkgaW4gdGhlIG5leHQgaXRlcmF0aW9uIG9mIHRoZSBsb29wLlxuICAgICAgICBmaXhGdW5jdGlvbkNhbGxBcmd1bWVudHModG9vbENhbGxSZXNwb25zZSk7XG4gICAgICAgIHVwZGF0ZUNoYXRSZXF1ZXN0KHRvb2xDYWxsUmVzcG9uc2UpO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgZnVuY3Rpb24gY2FsbCBhcmd1bWVudHMgYXJlIHNlbnQgYmFjayB0byB0aGUgQVBJIGFzIGEgc3RyaW5nXG4gICAgICBmdW5jdGlvbiBmaXhGdW5jdGlvbkNhbGxBcmd1bWVudHMocmVzcG9uc2U6IENoYXRSZXF1ZXN0KSB7XG4gICAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiByZXNwb25zZS5tZXNzYWdlcykge1xuICAgICAgICAgIGlmIChtZXNzYWdlLnRvb2xfY2FsbHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0b29sQ2FsbCBvZiBtZXNzYWdlLnRvb2xfY2FsbHMpIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0b29sQ2FsbCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMgJiZcbiAgICAgICAgICAgICAgICAgIHR5cGVvZiB0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMgIT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMgPSBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG1lc3NhZ2UuZnVuY3Rpb25fY2FsbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UuZnVuY3Rpb25fY2FsbCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZnVuY3Rpb25fY2FsbC5hcmd1bWVudHMgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgbWVzc2FnZS5mdW5jdGlvbl9jYWxsLmFyZ3VtZW50cyAhPT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5mdW5jdGlvbl9jYWxsLmFyZ3VtZW50cyA9IEpTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZS5mdW5jdGlvbl9jYWxsLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VJZCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1c2VTV1IgZnJvbSAnc3dyJztcbmltcG9ydCB7IGNhbGxDb21wbGV0aW9uQXBpIH0gZnJvbSAnLi4vc2hhcmVkL2NhbGwtY29tcGxldGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgSlNPTlZhbHVlLFxuICBSZXF1ZXN0T3B0aW9ucyxcbiAgVXNlQ29tcGxldGlvbk9wdGlvbnMsXG59IGZyb20gJy4uL3NoYXJlZC90eXBlcyc7XG5cbmV4cG9ydCB0eXBlIHsgVXNlQ29tcGxldGlvbk9wdGlvbnMgfTtcblxuZXhwb3J0IHR5cGUgVXNlQ29tcGxldGlvbkhlbHBlcnMgPSB7XG4gIC8qKiBUaGUgY3VycmVudCBjb21wbGV0aW9uIHJlc3VsdCAqL1xuICBjb21wbGV0aW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBTZW5kIGEgbmV3IHByb21wdCB0byB0aGUgQVBJIGVuZHBvaW50IGFuZCB1cGRhdGUgdGhlIGNvbXBsZXRpb24gc3RhdGUuXG4gICAqL1xuICBjb21wbGV0ZTogKFxuICAgIHByb21wdDogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyxcbiAgKSA9PiBQcm9taXNlPHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ+O1xuICAvKiogVGhlIGVycm9yIG9iamVjdCBvZiB0aGUgQVBJIHJlcXVlc3QgKi9cbiAgZXJyb3I6IHVuZGVmaW5lZCB8IEVycm9yO1xuICAvKipcbiAgICogQWJvcnQgdGhlIGN1cnJlbnQgQVBJIHJlcXVlc3QgYnV0IGtlZXAgdGhlIGdlbmVyYXRlZCB0b2tlbnMuXG4gICAqL1xuICBzdG9wOiAoKSA9PiB2b2lkO1xuICAvKipcbiAgICogVXBkYXRlIHRoZSBgY29tcGxldGlvbmAgc3RhdGUgbG9jYWxseS5cbiAgICovXG4gIHNldENvbXBsZXRpb246IChjb21wbGV0aW9uOiBzdHJpbmcpID0+IHZvaWQ7XG4gIC8qKiBUaGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgaW5wdXQgKi9cbiAgaW5wdXQ6IHN0cmluZztcbiAgLyoqIHNldFN0YXRlLXBvd2VyZWQgbWV0aG9kIHRvIHVwZGF0ZSB0aGUgaW5wdXQgdmFsdWUgKi9cbiAgc2V0SW5wdXQ6IFJlYWN0LkRpc3BhdGNoPFJlYWN0LlNldFN0YXRlQWN0aW9uPHN0cmluZz4+O1xuICAvKipcbiAgICogQW4gaW5wdXQvdGV4dGFyZWEtcmVhZHkgb25DaGFuZ2UgaGFuZGxlciB0byBjb250cm9sIHRoZSB2YWx1ZSBvZiB0aGUgaW5wdXRcbiAgICogQGV4YW1wbGVcbiAgICogYGBganN4XG4gICAqIDxpbnB1dCBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9IHZhbHVlPXtpbnB1dH0gLz5cbiAgICogYGBgXG4gICAqL1xuICBoYW5kbGVJbnB1dENoYW5nZTogKFxuICAgIGU6XG4gICAgICB8IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+XG4gICAgICB8IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxUZXh0QXJlYUVsZW1lbnQ+LFxuICApID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBGb3JtIHN1Ym1pc3Npb24gaGFuZGxlciB0byBhdXRvbWF0aWNhbGx5IHJlc2V0IGlucHV0IGFuZCBhcHBlbmQgYSB1c2VyIG1lc3NhZ2VcbiAgICogQGV4YW1wbGVcbiAgICogYGBganN4XG4gICAqIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9PlxuICAgKiAgPGlucHV0IG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX0gdmFsdWU9e2lucHV0fSAvPlxuICAgKiA8L2Zvcm0+XG4gICAqIGBgYFxuICAgKi9cbiAgaGFuZGxlU3VibWl0OiAoZTogUmVhY3QuRm9ybUV2ZW50PEhUTUxGb3JtRWxlbWVudD4pID0+IHZvaWQ7XG4gIC8qKiBXaGV0aGVyIHRoZSBBUEkgcmVxdWVzdCBpcyBpbiBwcm9ncmVzcyAqL1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG4gIC8qKiBBZGRpdGlvbmFsIGRhdGEgYWRkZWQgb24gdGhlIHNlcnZlciB2aWEgU3RyZWFtRGF0YSAqL1xuICBkYXRhPzogSlNPTlZhbHVlW107XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlQ29tcGxldGlvbih7XG4gIGFwaSA9ICcvYXBpL2NvbXBsZXRpb24nLFxuICBpZCxcbiAgaW5pdGlhbENvbXBsZXRpb24gPSAnJyxcbiAgaW5pdGlhbElucHV0ID0gJycsXG4gIGNyZWRlbnRpYWxzLFxuICBoZWFkZXJzLFxuICBib2R5LFxuICBzdHJlYW1Nb2RlLFxuICBvblJlc3BvbnNlLFxuICBvbkZpbmlzaCxcbiAgb25FcnJvcixcbn06IFVzZUNvbXBsZXRpb25PcHRpb25zID0ge30pOiBVc2VDb21wbGV0aW9uSGVscGVycyB7XG4gIC8vIEdlbmVyYXRlIGFuIHVuaXF1ZSBpZCBmb3IgdGhlIGNvbXBsZXRpb24gaWYgbm90IHByb3ZpZGVkLlxuICBjb25zdCBob29rSWQgPSB1c2VJZCgpO1xuICBjb25zdCBjb21wbGV0aW9uSWQgPSBpZCB8fCBob29rSWQ7XG5cbiAgLy8gU3RvcmUgdGhlIGNvbXBsZXRpb24gc3RhdGUgaW4gU1dSLCB1c2luZyB0aGUgY29tcGxldGlvbklkIGFzIHRoZSBrZXkgdG8gc2hhcmUgc3RhdGVzLlxuICBjb25zdCB7IGRhdGEsIG11dGF0ZSB9ID0gdXNlU1dSPHN0cmluZz4oW2FwaSwgY29tcGxldGlvbklkXSwgbnVsbCwge1xuICAgIGZhbGxiYWNrRGF0YTogaW5pdGlhbENvbXBsZXRpb24sXG4gIH0pO1xuXG4gIGNvbnN0IHsgZGF0YTogaXNMb2FkaW5nID0gZmFsc2UsIG11dGF0ZTogbXV0YXRlTG9hZGluZyB9ID0gdXNlU1dSPGJvb2xlYW4+KFxuICAgIFtjb21wbGV0aW9uSWQsICdsb2FkaW5nJ10sXG4gICAgbnVsbCxcbiAgKTtcblxuICBjb25zdCB7IGRhdGE6IHN0cmVhbURhdGEsIG11dGF0ZTogbXV0YXRlU3RyZWFtRGF0YSB9ID0gdXNlU1dSPFxuICAgIEpTT05WYWx1ZVtdIHwgdW5kZWZpbmVkXG4gID4oW2NvbXBsZXRpb25JZCwgJ3N0cmVhbURhdGEnXSwgbnVsbCk7XG5cbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTx1bmRlZmluZWQgfCBFcnJvcj4odW5kZWZpbmVkKTtcbiAgY29uc3QgY29tcGxldGlvbiA9IGRhdGEhO1xuXG4gIC8vIEFib3J0IGNvbnRyb2xsZXIgdG8gY2FuY2VsIHRoZSBjdXJyZW50IEFQSSBjYWxsLlxuICBjb25zdCBbYWJvcnRDb250cm9sbGVyLCBzZXRBYm9ydENvbnRyb2xsZXJdID1cbiAgICB1c2VTdGF0ZTxBYm9ydENvbnRyb2xsZXIgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBleHRyYU1ldGFkYXRhUmVmID0gdXNlUmVmKHtcbiAgICBjcmVkZW50aWFscyxcbiAgICBoZWFkZXJzLFxuICAgIGJvZHksXG4gIH0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGV4dHJhTWV0YWRhdGFSZWYuY3VycmVudCA9IHtcbiAgICAgIGNyZWRlbnRpYWxzLFxuICAgICAgaGVhZGVycyxcbiAgICAgIGJvZHksXG4gICAgfTtcbiAgfSwgW2NyZWRlbnRpYWxzLCBoZWFkZXJzLCBib2R5XSk7XG5cbiAgY29uc3QgdHJpZ2dlclJlcXVlc3QgPSB1c2VDYWxsYmFjayhcbiAgICBhc3luYyAocHJvbXB0OiBzdHJpbmcsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucykgPT5cbiAgICAgIGNhbGxDb21wbGV0aW9uQXBpKHtcbiAgICAgICAgYXBpLFxuICAgICAgICBwcm9tcHQsXG4gICAgICAgIGNyZWRlbnRpYWxzOiBleHRyYU1ldGFkYXRhUmVmLmN1cnJlbnQuY3JlZGVudGlhbHMsXG4gICAgICAgIGhlYWRlcnM6IHsgLi4uZXh0cmFNZXRhZGF0YVJlZi5jdXJyZW50LmhlYWRlcnMsIC4uLm9wdGlvbnM/LmhlYWRlcnMgfSxcbiAgICAgICAgYm9keToge1xuICAgICAgICAgIC4uLmV4dHJhTWV0YWRhdGFSZWYuY3VycmVudC5ib2R5LFxuICAgICAgICAgIC4uLm9wdGlvbnM/LmJvZHksXG4gICAgICAgIH0sXG4gICAgICAgIHN0cmVhbU1vZGUsXG4gICAgICAgIHNldENvbXBsZXRpb246IGNvbXBsZXRpb24gPT4gbXV0YXRlKGNvbXBsZXRpb24sIGZhbHNlKSxcbiAgICAgICAgc2V0TG9hZGluZzogbXV0YXRlTG9hZGluZyxcbiAgICAgICAgc2V0RXJyb3IsXG4gICAgICAgIHNldEFib3J0Q29udHJvbGxlcixcbiAgICAgICAgb25SZXNwb25zZSxcbiAgICAgICAgb25GaW5pc2gsXG4gICAgICAgIG9uRXJyb3IsXG4gICAgICAgIG9uRGF0YTogZGF0YSA9PiB7XG4gICAgICAgICAgbXV0YXRlU3RyZWFtRGF0YShbLi4uKHN0cmVhbURhdGEgfHwgW10pLCAuLi4oZGF0YSB8fCBbXSldLCBmYWxzZSk7XG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICBbXG4gICAgICBtdXRhdGUsXG4gICAgICBtdXRhdGVMb2FkaW5nLFxuICAgICAgYXBpLFxuICAgICAgZXh0cmFNZXRhZGF0YVJlZixcbiAgICAgIHNldEFib3J0Q29udHJvbGxlcixcbiAgICAgIG9uUmVzcG9uc2UsXG4gICAgICBvbkZpbmlzaCxcbiAgICAgIG9uRXJyb3IsXG4gICAgICBzZXRFcnJvcixcbiAgICAgIHN0cmVhbURhdGEsXG4gICAgICBtdXRhdGVTdHJlYW1EYXRhLFxuICAgIF0sXG4gICk7XG5cbiAgY29uc3Qgc3RvcCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoYWJvcnRDb250cm9sbGVyKSB7XG4gICAgICBhYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIHNldEFib3J0Q29udHJvbGxlcihudWxsKTtcbiAgICB9XG4gIH0sIFthYm9ydENvbnRyb2xsZXJdKTtcblxuICBjb25zdCBzZXRDb21wbGV0aW9uID0gdXNlQ2FsbGJhY2soXG4gICAgKGNvbXBsZXRpb246IHN0cmluZykgPT4ge1xuICAgICAgbXV0YXRlKGNvbXBsZXRpb24sIGZhbHNlKTtcbiAgICB9LFxuICAgIFttdXRhdGVdLFxuICApO1xuXG4gIGNvbnN0IGNvbXBsZXRlID0gdXNlQ2FsbGJhY2s8VXNlQ29tcGxldGlvbkhlbHBlcnNbJ2NvbXBsZXRlJ10+KFxuICAgIGFzeW5jIChwcm9tcHQsIG9wdGlvbnMpID0+IHtcbiAgICAgIHJldHVybiB0cmlnZ2VyUmVxdWVzdChwcm9tcHQsIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgW3RyaWdnZXJSZXF1ZXN0XSxcbiAgKTtcblxuICBjb25zdCBbaW5wdXQsIHNldElucHV0XSA9IHVzZVN0YXRlKGluaXRpYWxJbnB1dCk7XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gdXNlQ2FsbGJhY2soXG4gICAgKGU6IFJlYWN0LkZvcm1FdmVudDxIVE1MRm9ybUVsZW1lbnQ+KSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoIWlucHV0KSByZXR1cm47XG4gICAgICByZXR1cm4gY29tcGxldGUoaW5wdXQpO1xuICAgIH0sXG4gICAgW2lucHV0LCBjb21wbGV0ZV0sXG4gICk7XG5cbiAgY29uc3QgaGFuZGxlSW5wdXRDaGFuZ2UgPSAoZTogYW55KSA9PiB7XG4gICAgc2V0SW5wdXQoZS50YXJnZXQudmFsdWUpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgY29tcGxldGlvbixcbiAgICBjb21wbGV0ZSxcbiAgICBlcnJvcixcbiAgICBzZXRDb21wbGV0aW9uLFxuICAgIHN0b3AsXG4gICAgaW5wdXQsXG4gICAgc2V0SW5wdXQsXG4gICAgaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgaGFuZGxlU3VibWl0LFxuICAgIGlzTG9hZGluZyxcbiAgICBkYXRhOiBzdHJlYW1EYXRhLFxuICB9O1xufVxuIiwiaW1wb3J0IHsgcmVhZERhdGFTdHJlYW0gfSBmcm9tICcuL3JlYWQtZGF0YS1zdHJlYW0nO1xuaW1wb3J0IHsgSlNPTlZhbHVlIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBjcmVhdGVDaHVua0RlY29kZXIgfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGxDb21wbGV0aW9uQXBpKHtcbiAgYXBpLFxuICBwcm9tcHQsXG4gIGNyZWRlbnRpYWxzLFxuICBoZWFkZXJzLFxuICBib2R5LFxuICBzdHJlYW1Nb2RlID0gJ3N0cmVhbS1kYXRhJyxcbiAgc2V0Q29tcGxldGlvbixcbiAgc2V0TG9hZGluZyxcbiAgc2V0RXJyb3IsXG4gIHNldEFib3J0Q29udHJvbGxlcixcbiAgb25SZXNwb25zZSxcbiAgb25GaW5pc2gsXG4gIG9uRXJyb3IsXG4gIG9uRGF0YSxcbn06IHtcbiAgYXBpOiBzdHJpbmc7XG4gIHByb21wdDogc3RyaW5nO1xuICBjcmVkZW50aWFscz86IFJlcXVlc3RDcmVkZW50aWFscztcbiAgaGVhZGVycz86IEhlYWRlcnNJbml0O1xuICBib2R5OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBzdHJlYW1Nb2RlPzogJ3N0cmVhbS1kYXRhJyB8ICd0ZXh0JztcbiAgc2V0Q29tcGxldGlvbjogKGNvbXBsZXRpb246IHN0cmluZykgPT4gdm9pZDtcbiAgc2V0TG9hZGluZzogKGxvYWRpbmc6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHNldEVycm9yOiAoZXJyb3I6IEVycm9yIHwgdW5kZWZpbmVkKSA9PiB2b2lkO1xuICBzZXRBYm9ydENvbnRyb2xsZXI6IChhYm9ydENvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlciB8IG51bGwpID0+IHZvaWQ7XG4gIG9uUmVzcG9uc2U/OiAocmVzcG9uc2U6IFJlc3BvbnNlKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPjtcbiAgb25GaW5pc2g/OiAocHJvbXB0OiBzdHJpbmcsIGNvbXBsZXRpb246IHN0cmluZykgPT4gdm9pZDtcbiAgb25FcnJvcj86IChlcnJvcjogRXJyb3IpID0+IHZvaWQ7XG4gIG9uRGF0YT86IChkYXRhOiBKU09OVmFsdWVbXSkgPT4gdm9pZDtcbn0pIHtcbiAgdHJ5IHtcbiAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgIHNldEVycm9yKHVuZGVmaW5lZCk7XG5cbiAgICBjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgc2V0QWJvcnRDb250cm9sbGVyKGFib3J0Q29udHJvbGxlcik7XG5cbiAgICAvLyBFbXB0eSB0aGUgY29tcGxldGlvbiBpbW1lZGlhdGVseS5cbiAgICBzZXRDb21wbGV0aW9uKCcnKTtcblxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGFwaSwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHByb21wdCxcbiAgICAgICAgLi4uYm9keSxcbiAgICAgIH0pLFxuICAgICAgY3JlZGVudGlhbHMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIC4uLmhlYWRlcnMsXG4gICAgICB9LFxuICAgICAgc2lnbmFsOiBhYm9ydENvbnRyb2xsZXIuc2lnbmFsLFxuICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfSk7XG5cbiAgICBpZiAob25SZXNwb25zZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgb25SZXNwb25zZShyZXMpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXJlcy5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAoYXdhaXQgcmVzLnRleHQoKSkgfHwgJ0ZhaWxlZCB0byBmZXRjaCB0aGUgY2hhdCByZXNwb25zZS4nLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIXJlcy5ib2R5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSByZXNwb25zZSBib2R5IGlzIGVtcHR5LicpO1xuICAgIH1cblxuICAgIGxldCByZXN1bHQgPSAnJztcbiAgICBjb25zdCByZWFkZXIgPSByZXMuYm9keS5nZXRSZWFkZXIoKTtcblxuICAgIHN3aXRjaCAoc3RyZWFtTW9kZSkge1xuICAgICAgY2FzZSAndGV4dCc6IHtcbiAgICAgICAgY29uc3QgZGVjb2RlciA9IGNyZWF0ZUNodW5rRGVjb2RlcigpO1xuXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgY29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBjb21wbGV0aW9uIHN0YXRlIHdpdGggdGhlIG5ldyBtZXNzYWdlIHRva2Vucy5cbiAgICAgICAgICByZXN1bHQgKz0gZGVjb2Rlcih2YWx1ZSk7XG4gICAgICAgICAgc2V0Q29tcGxldGlvbihyZXN1bHQpO1xuXG4gICAgICAgICAgLy8gVGhlIHJlcXVlc3QgaGFzIGJlZW4gYWJvcnRlZCwgc3RvcCByZWFkaW5nIHRoZSBzdHJlYW0uXG4gICAgICAgICAgaWYgKGFib3J0Q29udHJvbGxlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmVhZGVyLmNhbmNlbCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3N0cmVhbS1kYXRhJzoge1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IHsgdHlwZSwgdmFsdWUgfSBvZiByZWFkRGF0YVN0cmVhbShyZWFkZXIsIHtcbiAgICAgICAgICBpc0Fib3J0ZWQ6ICgpID0+IGFib3J0Q29udHJvbGxlciA9PT0gbnVsbCxcbiAgICAgICAgfSkpIHtcbiAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3RleHQnOiB7XG4gICAgICAgICAgICAgIHJlc3VsdCArPSB2YWx1ZTtcbiAgICAgICAgICAgICAgc2V0Q29tcGxldGlvbihyZXN1bHQpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgIG9uRGF0YT8uKHZhbHVlKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGNvbnN0IGV4aGF1c3RpdmVDaGVjazogbmV2ZXIgPSBzdHJlYW1Nb2RlO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gc3RyZWFtIG1vZGU6ICR7ZXhoYXVzdGl2ZUNoZWNrfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvbkZpbmlzaCkge1xuICAgICAgb25GaW5pc2gocHJvbXB0LCByZXN1bHQpO1xuICAgIH1cblxuICAgIHNldEFib3J0Q29udHJvbGxlcihudWxsKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICAvLyBJZ25vcmUgYWJvcnQgZXJyb3JzIGFzIHRoZXkgYXJlIGV4cGVjdGVkLlxuICAgIGlmICgoZXJyIGFzIGFueSkubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICBzZXRBYm9ydENvbnRyb2xsZXIobnVsbCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGlmIChvbkVycm9yKSB7XG4gICAgICAgIG9uRXJyb3IoZXJyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRFcnJvcihlcnIgYXMgRXJyb3IpO1xuICB9IGZpbmFsbHkge1xuICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICB9XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSByZWFjdC1ob29rcy9ydWxlcy1vZi1ob29rcyAqL1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgZ2VuZXJhdGVJZCB9IGZyb20gJy4uL3NoYXJlZC9nZW5lcmF0ZS1pZCc7XG5pbXBvcnQgeyByZWFkRGF0YVN0cmVhbSB9IGZyb20gJy4uL3NoYXJlZC9yZWFkLWRhdGEtc3RyZWFtJztcbmltcG9ydCB7IENyZWF0ZU1lc3NhZ2UsIE1lc3NhZ2UgfSBmcm9tICcuLi9zaGFyZWQvdHlwZXMnO1xuXG5leHBvcnQgdHlwZSBBc3Npc3RhbnRTdGF0dXMgPSAnaW5fcHJvZ3Jlc3MnIHwgJ2F3YWl0aW5nX21lc3NhZ2UnO1xuXG5leHBvcnQgdHlwZSBVc2VBc3Npc3RhbnRIZWxwZXJzID0ge1xuICAvKipcbiAgICogVGhlIGN1cnJlbnQgYXJyYXkgb2YgY2hhdCBtZXNzYWdlcy5cbiAgICovXG4gIG1lc3NhZ2VzOiBNZXNzYWdlW107XG5cbiAgLyoqXG4gICAqIHNldFN0YXRlLXBvd2VyZWQgbWV0aG9kIHRvIHVwZGF0ZSB0aGUgbWVzc2FnZXMgYXJyYXkuXG4gICAqL1xuICBzZXRNZXNzYWdlczogUmVhY3QuRGlzcGF0Y2g8UmVhY3QuU2V0U3RhdGVBY3Rpb248TWVzc2FnZVtdPj47XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHRocmVhZCBJRC5cbiAgICovXG4gIHRocmVhZElkOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBpbnB1dCBmaWVsZC5cbiAgICovXG4gIGlucHV0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEFwcGVuZCBhIHVzZXIgbWVzc2FnZSB0byB0aGUgY2hhdCBsaXN0LiBUaGlzIHRyaWdnZXJzIHRoZSBBUEkgY2FsbCB0byBmZXRjaFxuICAgKiB0aGUgYXNzaXN0YW50J3MgcmVzcG9uc2UuXG4gICAqIEBwYXJhbSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIGFwcGVuZFxuICAgKiBAcGFyYW0gcmVxdWVzdE9wdGlvbnMgQWRkaXRpb25hbCBvcHRpb25zIHRvIHBhc3MgdG8gdGhlIEFQSSBjYWxsXG4gICAqL1xuICBhcHBlbmQ6IChcbiAgICBtZXNzYWdlOiBNZXNzYWdlIHwgQ3JlYXRlTWVzc2FnZSxcbiAgICByZXF1ZXN0T3B0aW9ucz86IHtcbiAgICAgIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICAgIH0sXG4gICkgPT4gUHJvbWlzZTx2b2lkPjtcblxuICAvKipcbiAgICogc2V0U3RhdGUtcG93ZXJlZCBtZXRob2QgdG8gdXBkYXRlIHRoZSBpbnB1dCB2YWx1ZS5cbiAgICovXG4gIHNldElucHV0OiBSZWFjdC5EaXNwYXRjaDxSZWFjdC5TZXRTdGF0ZUFjdGlvbjxzdHJpbmc+PjtcblxuICAvKipcbiAgICogSGFuZGxlciBmb3IgdGhlIGBvbkNoYW5nZWAgZXZlbnQgb2YgdGhlIGlucHV0IGZpZWxkIHRvIGNvbnRyb2wgdGhlIGlucHV0J3MgdmFsdWUuXG4gICAqL1xuICBoYW5kbGVJbnB1dENoYW5nZTogKFxuICAgIGV2ZW50OlxuICAgICAgfCBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PlxuICAgICAgfCBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MVGV4dEFyZWFFbGVtZW50PixcbiAgKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBGb3JtIHN1Ym1pc3Npb24gaGFuZGxlciB0aGF0IGF1dG9tYXRpY2FsbHkgcmVzZXRzIHRoZSBpbnB1dCBmaWVsZCBhbmQgYXBwZW5kcyBhIHVzZXIgbWVzc2FnZS5cbiAgICovXG4gIHN1Ym1pdE1lc3NhZ2U6IChcbiAgICBldmVudD86IFJlYWN0LkZvcm1FdmVudDxIVE1MRm9ybUVsZW1lbnQ+LFxuICAgIHJlcXVlc3RPcHRpb25zPzoge1xuICAgICAgZGF0YT86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gICAgfSxcbiAgKSA9PiBQcm9taXNlPHZvaWQ+O1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBzdGF0dXMgb2YgdGhlIGFzc2lzdGFudC4gVGhpcyBjYW4gYmUgdXNlZCB0byBzaG93IGEgbG9hZGluZyBpbmRpY2F0b3IuXG4gICAqL1xuICBzdGF0dXM6IEFzc2lzdGFudFN0YXR1cztcblxuICAvKipcbiAgICogVGhlIGVycm9yIHRocm93biBkdXJpbmcgdGhlIGFzc2lzdGFudCBtZXNzYWdlIHByb2Nlc3NpbmcsIGlmIGFueS5cbiAgICovXG4gIGVycm9yOiB1bmRlZmluZWQgfCB1bmtub3duO1xufTtcblxuZXhwb3J0IHR5cGUgVXNlQXNzaXN0YW50T3B0aW9ucyA9IHtcbiAgLyoqXG4gICAqIFRoZSBBUEkgZW5kcG9pbnQgdGhhdCBhY2NlcHRzIGEgYHsgdGhyZWFkSWQ6IHN0cmluZyB8IG51bGw7IG1lc3NhZ2U6IHN0cmluZzsgfWAgb2JqZWN0IGFuZCByZXR1cm5zIGFuIGBBc3Npc3RhbnRSZXNwb25zZWAgc3RyZWFtLlxuICAgKiBUaGUgdGhyZWFkSWQgcmVmZXJzIHRvIGFuIGV4aXN0aW5nIHRocmVhZCB3aXRoIG1lc3NhZ2VzIChvciBpcyBgbnVsbGAgdG8gY3JlYXRlIGEgbmV3IHRocmVhZCkuXG4gICAqIFRoZSBtZXNzYWdlIGlzIHRoZSBuZXh0IG1lc3NhZ2UgdGhhdCBzaG91bGQgYmUgYXBwZW5kZWQgdG8gdGhlIHRocmVhZCBhbmQgc2VudCB0byB0aGUgYXNzaXN0YW50LlxuICAgKi9cbiAgYXBpOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEFuIG9wdGlvbmFsIHN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIElEIG9mIGFuIGV4aXN0aW5nIHRocmVhZC5cbiAgICogSWYgbm90IHByb3ZpZGVkLCBhIG5ldyB0aHJlYWQgd2lsbCBiZSBjcmVhdGVkLlxuICAgKi9cbiAgdGhyZWFkSWQ/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEFuIG9wdGlvbmFsIGxpdGVyYWwgdGhhdCBzZXRzIHRoZSBtb2RlIG9mIGNyZWRlbnRpYWxzIHRvIGJlIHVzZWQgb24gdGhlIHJlcXVlc3QuXG4gICAqIERlZmF1bHRzIHRvIFwic2FtZS1vcmlnaW5cIi5cbiAgICovXG4gIGNyZWRlbnRpYWxzPzogUmVxdWVzdENyZWRlbnRpYWxzO1xuXG4gIC8qKlxuICAgKiBBbiBvcHRpb25hbCBvYmplY3Qgb2YgaGVhZGVycyB0byBiZSBwYXNzZWQgdG8gdGhlIEFQSSBlbmRwb2ludC5cbiAgICovXG4gIGhlYWRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHwgSGVhZGVycztcblxuICAvKipcbiAgICogQW4gb3B0aW9uYWwsIGFkZGl0aW9uYWwgYm9keSBvYmplY3QgdG8gYmUgcGFzc2VkIHRvIHRoZSBBUEkgZW5kcG9pbnQuXG4gICAqL1xuICBib2R5Pzogb2JqZWN0O1xuXG4gIC8qKlxuICAgKiBBbiBvcHRpb25hbCBjYWxsYmFjayB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gdGhlIGFzc2lzdGFudCBlbmNvdW50ZXJzIGFuIGVycm9yLlxuICAgKi9cbiAgb25FcnJvcj86IChlcnJvcjogRXJyb3IpID0+IHZvaWQ7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlQXNzaXN0YW50KHtcbiAgYXBpLFxuICB0aHJlYWRJZDogdGhyZWFkSWRQYXJhbSxcbiAgY3JlZGVudGlhbHMsXG4gIGhlYWRlcnMsXG4gIGJvZHksXG4gIG9uRXJyb3IsXG59OiBVc2VBc3Npc3RhbnRPcHRpb25zKTogVXNlQXNzaXN0YW50SGVscGVycyB7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8TWVzc2FnZVtdPihbXSk7XG4gIGNvbnN0IFtpbnB1dCwgc2V0SW5wdXRdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbdGhyZWFkSWQsIHNldFRocmVhZElkXSA9IHVzZVN0YXRlPHN0cmluZyB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcbiAgY29uc3QgW3N0YXR1cywgc2V0U3RhdHVzXSA9IHVzZVN0YXRlPEFzc2lzdGFudFN0YXR1cz4oJ2F3YWl0aW5nX21lc3NhZ2UnKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTx1bmRlZmluZWQgfCBFcnJvcj4odW5kZWZpbmVkKTtcblxuICBjb25zdCBoYW5kbGVJbnB1dENoYW5nZSA9IChcbiAgICBldmVudDpcbiAgICAgIHwgUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD5cbiAgICAgIHwgUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFRleHRBcmVhRWxlbWVudD4sXG4gICkgPT4ge1xuICAgIHNldElucHV0KGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gIH07XG5cbiAgY29uc3QgYXBwZW5kID0gYXN5bmMgKFxuICAgIG1lc3NhZ2U6IE1lc3NhZ2UgfCBDcmVhdGVNZXNzYWdlLFxuICAgIHJlcXVlc3RPcHRpb25zPzoge1xuICAgICAgZGF0YT86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gICAgfSxcbiAgKSA9PiB7XG4gICAgc2V0U3RhdHVzKCdpbl9wcm9ncmVzcycpO1xuXG4gICAgc2V0TWVzc2FnZXMobWVzc2FnZXMgPT4gW1xuICAgICAgLi4ubWVzc2FnZXMsXG4gICAgICB7XG4gICAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICAgIGlkOiBtZXNzYWdlLmlkID8/IGdlbmVyYXRlSWQoKSxcbiAgICAgIH0sXG4gICAgXSk7XG5cbiAgICBzZXRJbnB1dCgnJyk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZmV0Y2goYXBpLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBjcmVkZW50aWFscyxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCAuLi5oZWFkZXJzIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAuLi5ib2R5LFxuICAgICAgICAgIC8vIGFsd2F5cyB1c2UgdXNlci1wcm92aWRlZCB0aHJlYWRJZCB3aGVuIGF2YWlsYWJsZTpcbiAgICAgICAgICB0aHJlYWRJZDogdGhyZWFkSWRQYXJhbSA/PyB0aHJlYWRJZCA/PyBudWxsLFxuICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UuY29udGVudCxcblxuICAgICAgICAgIC8vIG9wdGlvbmFsIHJlcXVlc3QgZGF0YTpcbiAgICAgICAgICBkYXRhOiByZXF1ZXN0T3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3VsdC5ib2R5ID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgcmVzcG9uc2UgYm9keSBpcyBlbXB0eS4nKTtcbiAgICAgIH1cblxuICAgICAgZm9yIGF3YWl0IChjb25zdCB7IHR5cGUsIHZhbHVlIH0gb2YgcmVhZERhdGFTdHJlYW0oXG4gICAgICAgIHJlc3VsdC5ib2R5LmdldFJlYWRlcigpLFxuICAgICAgKSkge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICBjYXNlICdhc3Npc3RhbnRfbWVzc2FnZSc6IHtcbiAgICAgICAgICAgIHNldE1lc3NhZ2VzKG1lc3NhZ2VzID0+IFtcbiAgICAgICAgICAgICAgLi4ubWVzc2FnZXMsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogdmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgcm9sZTogdmFsdWUucm9sZSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB2YWx1ZS5jb250ZW50WzBdLnRleHQudmFsdWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgJ3RleHQnOiB7XG4gICAgICAgICAgICAvLyB0ZXh0IGRlbHRhIC0gYWRkIHRvIGxhc3QgbWVzc2FnZTpcbiAgICAgICAgICAgIHNldE1lc3NhZ2VzKG1lc3NhZ2VzID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgbGFzdE1lc3NhZ2UgPSBtZXNzYWdlc1ttZXNzYWdlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAuLi5tZXNzYWdlcy5zbGljZSgwLCBtZXNzYWdlcy5sZW5ndGggLSAxKSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBpZDogbGFzdE1lc3NhZ2UuaWQsXG4gICAgICAgICAgICAgICAgICByb2xlOiBsYXN0TWVzc2FnZS5yb2xlLFxuICAgICAgICAgICAgICAgICAgY29udGVudDogbGFzdE1lc3NhZ2UuY29udGVudCArIHZhbHVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAnZGF0YV9tZXNzYWdlJzoge1xuICAgICAgICAgICAgc2V0TWVzc2FnZXMobWVzc2FnZXMgPT4gW1xuICAgICAgICAgICAgICAuLi5tZXNzYWdlcyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pZCA/PyBnZW5lcmF0ZUlkKCksXG4gICAgICAgICAgICAgICAgcm9sZTogJ2RhdGEnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHZhbHVlLmRhdGEsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgJ2Fzc2lzdGFudF9jb250cm9sX2RhdGEnOiB7XG4gICAgICAgICAgICBzZXRUaHJlYWRJZCh2YWx1ZS50aHJlYWRJZCk7XG5cbiAgICAgICAgICAgIC8vIHNldCBpZCBvZiBsYXN0IG1lc3NhZ2U6XG4gICAgICAgICAgICBzZXRNZXNzYWdlcyhtZXNzYWdlcyA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGxhc3RNZXNzYWdlID0gbWVzc2FnZXNbbWVzc2FnZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgIGxhc3RNZXNzYWdlLmlkID0gdmFsdWUubWVzc2FnZUlkO1xuICAgICAgICAgICAgICByZXR1cm4gWy4uLm1lc3NhZ2VzLnNsaWNlKDAsIG1lc3NhZ2VzLmxlbmd0aCAtIDEpLCBsYXN0TWVzc2FnZV07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAnZXJyb3InOiB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck9iaiA9IG5ldyBFcnJvcih2YWx1ZSk7XG4gICAgICAgICAgICBzZXRFcnJvcihlcnJvck9iaik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKG9uRXJyb3IgJiYgZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgIH1cblxuICAgICAgc2V0RXJyb3IoZXJyb3IgYXMgRXJyb3IpO1xuICAgIH1cblxuICAgIHNldFN0YXR1cygnYXdhaXRpbmdfbWVzc2FnZScpO1xuICB9O1xuXG4gIGNvbnN0IHN1Ym1pdE1lc3NhZ2UgPSBhc3luYyAoXG4gICAgZXZlbnQ/OiBSZWFjdC5Gb3JtRXZlbnQ8SFRNTEZvcm1FbGVtZW50PixcbiAgICByZXF1ZXN0T3B0aW9ucz86IHtcbiAgICAgIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICAgIH0sXG4gICkgPT4ge1xuICAgIGV2ZW50Py5wcmV2ZW50RGVmYXVsdD8uKCk7XG5cbiAgICBpZiAoaW5wdXQgPT09ICcnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYXBwZW5kKHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBpbnB1dCB9LCByZXF1ZXN0T3B0aW9ucyk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBhcHBlbmQsXG4gICAgbWVzc2FnZXMsXG4gICAgc2V0TWVzc2FnZXMsXG4gICAgdGhyZWFkSWQsXG4gICAgaW5wdXQsXG4gICAgc2V0SW5wdXQsXG4gICAgaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgc3VibWl0TWVzc2FnZSxcbiAgICBzdGF0dXMsXG4gICAgZXJyb3IsXG4gIH07XG59XG5cbi8qKlxuQGRlcHJlY2F0ZWQgVXNlIGB1c2VBc3Npc3RhbnRgIGluc3RlYWQuXG4gKi9cbmV4cG9ydCBjb25zdCBleHBlcmltZW50YWxfdXNlQXNzaXN0YW50ID0gdXNlQXNzaXN0YW50O1xuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlSWQiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZVNXUiIsInRleHRTdHJlYW1QYXJ0IiwiY29kZSIsIm5hbWUiLCJwYXJzZSIsInZhbHVlIiwiRXJyb3IiLCJ0eXBlIiwiZnVuY3Rpb25DYWxsU3RyZWFtUGFydCIsImZ1bmN0aW9uX2NhbGwiLCJhcmd1bWVudHMiLCJkYXRhU3RyZWFtUGFydCIsIkFycmF5IiwiaXNBcnJheSIsImVycm9yU3RyZWFtUGFydCIsImFzc2lzdGFudE1lc3NhZ2VTdHJlYW1QYXJ0IiwiaWQiLCJyb2xlIiwiY29udGVudCIsImV2ZXJ5IiwiaXRlbSIsInRleHQiLCJhc3Npc3RhbnRDb250cm9sRGF0YVN0cmVhbVBhcnQiLCJ0aHJlYWRJZCIsIm1lc3NhZ2VJZCIsImRhdGFNZXNzYWdlU3RyZWFtUGFydCIsInRvb2xDYWxsU3RyZWFtUGFydCIsInRvb2xfY2FsbHMiLCJzb21lIiwidGMiLCJmdW5jdGlvbiIsIm1lc3NhZ2VBbm5vdGF0aW9uc1N0cmVhbVBhcnQiLCJzdHJlYW1QYXJ0cyIsInN0cmVhbVBhcnRzQnlDb2RlIiwiU3RyZWFtU3RyaW5nUHJlZml4ZXMiLCJ2YWxpZENvZGVzIiwibWFwIiwicGFydCIsInBhcnNlU3RyZWFtUGFydCIsImxpbmUiLCJmaXJzdFNlcGFyYXRvckluZGV4IiwiaW5kZXhPZiIsInByZWZpeCIsInNsaWNlIiwiaW5jbHVkZXMiLCJ0ZXh0VmFsdWUiLCJqc29uVmFsdWUiLCJKU09OIiwiTkVXTElORSIsImNoYXJDb2RlQXQiLCJjb25jYXRDaHVua3MiLCJjaHVua3MiLCJ0b3RhbExlbmd0aCIsImNvbmNhdGVuYXRlZENodW5rcyIsIlVpbnQ4QXJyYXkiLCJvZmZzZXQiLCJjaHVuayIsInNldCIsImxlbmd0aCIsInJlYWREYXRhU3RyZWFtIiwicmVhZGVyIiwiaXNBYm9ydGVkIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwicmVhZCIsInB1c2giLCJkZWNvZGUiLCJzdHJlYW0iLCJzcGxpdCIsImZpbHRlciIsInN0cmVhbVBhcnQiLCJjYW5jZWwiLCJjdXN0b21BbHBoYWJldCIsImdlbmVyYXRlSWQiLCJhc3NpZ25Bbm5vdGF0aW9uc1RvTWVzc2FnZSIsIm1lc3NhZ2UiLCJhbm5vdGF0aW9ucyIsInBhcnNlQ29tcGxleFJlc3BvbnNlIiwiYWJvcnRDb250cm9sbGVyUmVmIiwidXBkYXRlIiwib25GaW5pc2giLCJnZXRDdXJyZW50RGF0ZSIsIkRhdGUiLCJjcmVhdGVkQXQiLCJwcmVmaXhNYXAiLCJkYXRhIiwibWVzc2FnZV9hbm5vdGF0aW9ucyIsImN1cnJlbnQiLCJmdW5jdGlvbkNhbGxNZXNzYWdlIiwidG9vbENhbGxNZXNzYWdlIiwicmVzcG9uc2VNZXNzYWdlIiwibWVzc2FnZVByZWZpeEtleXMiLCJmb3JFYWNoIiwia2V5IiwibWVyZ2VkIiwiQm9vbGVhbiIsIm1lc3NhZ2VzIiwiY3JlYXRlQ2h1bmtEZWNvZGVyIiwiY29tcGxleCIsImRlY29kZWQiLCJjYWxsQ2hhdEFwaSIsImFwaSIsImJvZHkiLCJzdHJlYW1Nb2RlIiwiY3JlZGVudGlhbHMiLCJoZWFkZXJzIiwiYWJvcnRDb250cm9sbGVyIiwicmVzdG9yZU1lc3NhZ2VzT25GYWlsdXJlIiwib25SZXNwb25zZSIsIm9uVXBkYXRlIiwiX2EiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwic3RyaW5naWZ5Iiwic2lnbmFsIiwiY2F0Y2giLCJlcnIiLCJvayIsImdldFJlYWRlciIsInJlc3VsdE1lc3NhZ2UiLCJkb25lIiwiZXhoYXVzdGl2ZUNoZWNrIiwicHJvY2Vzc0NoYXRTdHJlYW0iLCJnZXRTdHJlYW1lZFJlc3BvbnNlIiwiZXhwZXJpbWVudGFsX29uRnVuY3Rpb25DYWxsIiwiZXhwZXJpbWVudGFsX29uVG9vbENhbGwiLCJ1cGRhdGVDaGF0UmVxdWVzdCIsImdldEN1cnJlbnRNZXNzYWdlcyIsIm1lc3NhZ2VzQW5kRGF0YU9ySnVzdE1lc3NhZ2UiLCJoYXNGb2xsb3dpbmdSZXNwb25zZSIsImZ1bmN0aW9uQ2FsbCIsImNvbnNvbGUiLCJ3YXJuIiwiZnVuY3Rpb25DYWxsUmVzcG9uc2UiLCJ0b29sQ2FsbHMiLCJ0b29sQ2FsbCIsInRvb2xDYWxsUmVzcG9uc2UiLCJmaXhGdW5jdGlvbkNhbGxBcmd1bWVudHMiLCJzdHJlYW1lZFJlc3BvbnNlTWVzc2FnZSIsImNoYXRSZXF1ZXN0IiwibXV0YXRlIiwibXV0YXRlU3RyZWFtRGF0YSIsImV4aXN0aW5nRGF0YSIsImV4dHJhTWV0YWRhdGFSZWYiLCJtZXNzYWdlc1JlZiIsInNlbmRFeHRyYU1lc3NhZ2VGaWVsZHMiLCJfYiIsInByZXZpb3VzTWVzc2FnZXMiLCJjb25zdHJ1Y3RlZE1lc3NhZ2VzUGF5bG9hZCIsInRvb2xfY2FsbF9pZCIsInJlcGx5SWQiLCJyZWFkUm93IiwicHJvbWlzZSIsInVpIiwibmV4dCIsImUiLCJvcHRpb25zIiwiZnVuY3Rpb25zIiwidG9vbHMiLCJ0b29sX2Nob2ljZSIsInVzZUNoYXQiLCJpbml0aWFsTWVzc2FnZXMiLCJpbml0aWFsSW5wdXQiLCJvbkVycm9yIiwiaG9va0lkIiwiaWRLZXkiLCJjaGF0S2V5IiwiaW5pdGlhbE1lc3NhZ2VzRmFsbGJhY2siLCJmYWxsYmFja0RhdGEiLCJpc0xvYWRpbmciLCJtdXRhdGVMb2FkaW5nIiwic3RyZWFtRGF0YSIsImVycm9yIiwic2V0RXJyb3IiLCJ0cmlnZ2VyUmVxdWVzdCIsIkFib3J0Q29udHJvbGxlciIsImNoYXRSZXF1ZXN0UGFyYW0iLCJhcHBlbmQiLCJjb25jYXQiLCJyZWxvYWQiLCJsYXN0TWVzc2FnZSIsInN0b3AiLCJhYm9ydCIsInNldE1lc3NhZ2VzIiwiaW5wdXQiLCJzZXRJbnB1dCIsImhhbmRsZVN1Ym1pdCIsIm1ldGFkYXRhIiwicHJldmVudERlZmF1bHQiLCJoYW5kbGVJbnB1dENoYW5nZSIsInRhcmdldCIsImNhbGxDb21wbGV0aW9uQXBpIiwicHJvbXB0Iiwic2V0Q29tcGxldGlvbiIsInNldExvYWRpbmciLCJzZXRBYm9ydENvbnRyb2xsZXIiLCJvbkRhdGEiLCJyZXMiLCJyZXN1bHQiLCJ1c2VDb21wbGV0aW9uIiwiaW5pdGlhbENvbXBsZXRpb24iLCJjb21wbGV0aW9uSWQiLCJjb21wbGV0aW9uIiwiY29tcGxldGUiLCJ1c2VBc3Npc3RhbnQiLCJ0aHJlYWRJZFBhcmFtIiwic2V0VGhyZWFkSWQiLCJzdGF0dXMiLCJzZXRTdGF0dXMiLCJldmVudCIsInJlcXVlc3RPcHRpb25zIiwiZXJyb3JPYmoiLCJzdWJtaXRNZXNzYWdlIiwiY2FsbCIsImV4cGVyaW1lbnRhbF91c2VBc3Npc3RhbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/ai/react/dist/index.mjs\n");

/***/ })

};
;